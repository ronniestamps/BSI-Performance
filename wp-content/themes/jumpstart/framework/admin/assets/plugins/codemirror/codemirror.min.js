(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{this.CodeMirror=a()}}})(function(){var b7=/gecko\/\d/i.test(navigator.userAgent);var ec=/MSIE \d/.test(navigator.userAgent);var bU=ec&&(document.documentMode==null||document.documentMode<8);var bR=ec&&(document.documentMode==null||document.documentMode<9);var bQ=ec&&(document.documentMode==null||document.documentMode<10);var br=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent);var dd=ec||br;var cC=/WebKit\//.test(navigator.userAgent);var dg=cC&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var cN=/Chrome\//.test(navigator.userAgent);var dv=/Opera\//.test(navigator.userAgent);var au=/Apple Computer/.test(navigator.vendor);var aW=/KHTML\//.test(navigator.userAgent);var cl=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent);var cH=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var eR=/PhantomJS/.test(navigator.userAgent);var eq=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var dI=eq||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var bN=eq||/Mac/.test(navigator.platform);var aC=/win/i.test(navigator.platform);var aJ=dv&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(aJ){aJ=Number(aJ[1])}if(aJ&&aJ>=15){dv=false;cC=true}var by=bN&&(dg||dv&&(aJ==null||aJ<12.11));var fn=b7||(dd&&!bR);var fq=false,aS=false;function G(fx,fy){if(!(this instanceof G)){return new G(fx,fy)}this.options=fy=fy||{};for(var fz in es){if(!fy.hasOwnProperty(fz)){fy[fz]=es[fz]}}bX(fy);var fB=fy.value;if(typeof fB=="string"){fB=new an(fB,fy.mode)}this.doc=fB;var fA=this.display=new ea(fx,fB);fA.wrapper.CodeMirror=this;dE(this);cu(this);if(fy.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(fy.autofocus&&!dI){d2(this)}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new fv()};if(ec){setTimeout(ce(eM,this,true),20)}fa(this);var fw=this;cs(this,function(){fw.curOp.forceUpdate=true;dD(fw,fB);if((fy.autofocus&&!dI)||dh()==fA.input){setTimeout(ce(cj,fw),20)}else{aG(fw)}for(var fD in aZ){if(aZ.hasOwnProperty(fD)){aZ[fD](fw,fy[fD],bV)}}for(var fC=0;fC<aT.length;++fC){aT[fC](fw)}})}function ea(fw,fy){var fz=this;var fx=fz.input=fg("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(cC){fx.style.width="1000px"}else{fx.setAttribute("wrap","off")}if(eq){fx.style.border="1px solid black"}fx.setAttribute("autocorrect","off");fx.setAttribute("autocapitalize","off");fx.setAttribute("spellcheck","false");fz.inputDiv=fg("div",[fx],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");fz.scrollbarH=fg("div",[fg("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");fz.scrollbarV=fg("div",[fg("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");fz.scrollbarFiller=fg("div",null,"CodeMirror-scrollbar-filler");fz.gutterFiller=fg("div",null,"CodeMirror-gutter-filler");fz.lineDiv=fg("div",null,"CodeMirror-code");fz.selectionDiv=fg("div",null,null,"position: relative; z-index: 1");fz.cursorDiv=fg("div",null,"CodeMirror-cursors");fz.measure=fg("div",null,"CodeMirror-measure");fz.lineMeasure=fg("div",null,"CodeMirror-measure");fz.lineSpace=fg("div",[fz.measure,fz.lineMeasure,fz.selectionDiv,fz.cursorDiv,fz.lineDiv],null,"position: relative; outline: none");fz.mover=fg("div",[fg("div",[fz.lineSpace],"CodeMirror-lines")],null,"position: relative");fz.sizer=fg("div",[fz.mover],"CodeMirror-sizer");fz.heightForcer=fg("div",null,null,"position: absolute; height: "+a4+"px; width: 1px;");fz.gutters=fg("div",null,"CodeMirror-gutters");fz.lineGutter=null;fz.scroller=fg("div",[fz.sizer,fz.heightForcer,fz.gutters],"CodeMirror-scroll");fz.scroller.setAttribute("tabIndex","-1");fz.wrapper=fg("div",[fz.inputDiv,fz.scrollbarH,fz.scrollbarV,fz.scrollbarFiller,fz.gutterFiller,fz.scroller],"CodeMirror");if(bU){fz.gutters.style.zIndex=-1;fz.scroller.style.paddingRight=0}if(eq){fx.style.width="0px"}if(!cC){fz.scroller.draggable=true}if(aW){fz.inputDiv.style.height="1px";fz.inputDiv.style.position="absolute"}if(bU){fz.scrollbarH.style.minHeight=fz.scrollbarV.style.minWidth="18px"}if(fw.appendChild){fw.appendChild(fz.wrapper)}else{fw(fz.wrapper)}fz.viewFrom=fz.viewTo=fy.first;fz.view=[];fz.externalMeasured=null;fz.viewOffset=0;fz.lastSizeC=0;fz.updateLineNumbers=null;fz.lineNumWidth=fz.lineNumInnerWidth=fz.lineNumChars=null;fz.prevInput="";fz.alignWidgets=false;fz.pollingFast=false;fz.poll=new fv();fz.cachedCharWidth=fz.cachedTextHeight=fz.cachedPaddingH=null;fz.inaccurateSelection=false;fz.maxLine=null;fz.maxLineLength=0;fz.maxLineChanged=false;fz.wheelDX=fz.wheelDY=fz.wheelStartX=fz.wheelStartY=null;fz.shift=false}function bb(fw){fw.doc.mode=G.getMode(fw.options,fw.doc.modeOption);dN(fw)}function dN(fw){fw.doc.iter(function(fx){if(fx.stateAfter){fx.stateAfter=null}if(fx.styles){fx.styles=null}});fw.doc.frontier=fw.doc.first;dH(fw,100);fw.state.modeGen++;if(fw.curOp){ac(fw)}}function d8(fw){if(fw.options.lineWrapping){fw.display.wrapper.className+=" CodeMirror-wrap";fw.display.sizer.style.minWidth=""}else{fw.display.wrapper.className=fw.display.wrapper.className.replace(" CodeMirror-wrap","");g(fw)}U(fw);ac(fw);af(fw);setTimeout(function(){eo(fw)},100)}function aY(fw){var fy=aI(fw.display),fx=fw.options.lineWrapping;var fz=fx&&Math.max(5,fw.display.scroller.clientWidth/c9(fw.display)-3);return function(fB){if(eT(fw.doc,fB)){return 0}var fA=0;if(fB.widgets){for(var fC=0;fC<fB.widgets.length;fC++){if(fB.widgets[fC].height){fA+=fB.widgets[fC].height}}}if(fx){return fA+(Math.ceil(fB.text.length/fz)||1)*fy}else{return fA+fy}}}function U(fw){var fy=fw.doc,fx=aY(fw);fy.iter(function(fz){var fA=fx(fz);if(fA!=fz.height){fj(fz,fA)}})}function ft(fw){var fy=ex[fw.options.keyMap],fx=fy.style;fw.display.wrapper.className=fw.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(fx?" cm-keymap-"+fx:"")}function cu(fw){fw.display.wrapper.className=fw.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+fw.options.theme.replace(/(^|\s)\s*/g," cm-s-");af(fw)}function c2(fw){dE(fw);ac(fw);setTimeout(function(){d6(fw)},20)}function dE(fw){var fx=fw.display.gutters,fC=fw.options.gutters;du(fx);for(var fy=0;fy<fC.length;++fy){var fA=fC[fy];var fB=fx.appendChild(fg("div",null,"CodeMirror-gutter "+fA));if(fA=="CodeMirror-linenumbers"){fw.display.lineGutter=fB;fB.style.width=(fw.display.lineNumWidth||1)+"px"}}fx.style.display=fy?"":"none";var fz=fx.offsetWidth;fw.display.sizer.style.marginLeft=fz+"px";if(fy){fw.display.scrollbarH.style.left=fw.options.fixedGutter?fz+"px":0}}function dO(fy){if(fy.height==0){return 0}var fx=fy.text.length,fw,fA=fy;while(fw=ef(fA)){var fz=fw.find(0,true);fA=fz.from.line;fx+=fz.from.ch-fz.to.ch}fA=fy;while(fw=dW(fA)){var fz=fw.find(0,true);fx-=fA.text.length-fz.from.ch;fA=fz.to.line;fx+=fA.text.length-fz.to.ch}return fx}function g(fw){var fy=fw.display,fx=fw.doc;fy.maxLine=eC(fx,fx.first);fy.maxLineLength=dO(fy.maxLine);fy.maxLineChanged=true;fx.iter(function(fA){var fz=dO(fA);if(fz>fy.maxLineLength){fy.maxLineLength=fz;fy.maxLine=fA}})}function bX(fw){var fx=cT(fw.gutters,"CodeMirror-linenumbers");if(fx==-1&&fw.lineNumbers){fw.gutters=fw.gutters.concat(["CodeMirror-linenumbers"])}else{if(fx>-1&&!fw.lineNumbers){fw.gutters=fw.gutters.slice(0);fw.gutters.splice(fx,1)}}}function c6(fx){var fw=fx.display.scroller;return{clientHeight:fw.clientHeight,barHeight:fx.display.scrollbarV.clientHeight,scrollWidth:fw.scrollWidth,clientWidth:fw.clientWidth,barWidth:fx.display.scrollbarH.clientWidth,docHeight:Math.round(fx.doc.height+bq(fx.display))}}function eo(fw,fA){if(!fA){fA=c6(fw)}var fC=fw.display;var fz=fA.docHeight+a4;var fB=fA.scrollWidth>fA.clientWidth;var fx=fz>fA.clientHeight;if(fx){fC.scrollbarV.style.display="block";fC.scrollbarV.style.bottom=fB?k(fC.measure)+"px":"0";fC.scrollbarV.firstChild.style.height=Math.max(0,fz-fA.clientHeight+(fA.barHeight||fC.scrollbarV.clientHeight))+"px"}else{fC.scrollbarV.style.display="";fC.scrollbarV.firstChild.style.height="0"}if(fB){fC.scrollbarH.style.display="block";fC.scrollbarH.style.right=fx?k(fC.measure)+"px":"0";fC.scrollbarH.firstChild.style.width=(fA.scrollWidth-fA.clientWidth+(fA.barWidth||fC.scrollbarH.clientWidth))+"px"}else{fC.scrollbarH.style.display="";fC.scrollbarH.firstChild.style.width="0"}if(fB&&fx){fC.scrollbarFiller.style.display="block";fC.scrollbarFiller.style.height=fC.scrollbarFiller.style.width=k(fC.measure)+"px"}else{fC.scrollbarFiller.style.display=""}if(fB&&fw.options.coverGutterNextToScrollbar&&fw.options.fixedGutter){fC.gutterFiller.style.display="block";fC.gutterFiller.style.height=k(fC.measure)+"px";fC.gutterFiller.style.width=fC.gutters.offsetWidth+"px"}else{fC.gutterFiller.style.display=""}if(cl&&k(fC.measure)===0){fC.scrollbarV.style.minWidth=fC.scrollbarH.style.minHeight=cH?"18px":"12px";var fy=function(fD){if(K(fD)!=fC.scrollbarV&&K(fD)!=fC.scrollbarH){cE(fw,dU)(fD)}};bF(fC.scrollbarV,"mousedown",fy);bF(fC.scrollbarH,"mousedown",fy)}}function bM(fy,fC,fE){var fz=fE&&fE.top!=null?fE.top:fy.scroller.scrollTop;fz=Math.floor(fz-ev(fy));var fw=fE&&fE.bottom!=null?fE.bottom:fz+fy.wrapper.clientHeight;var fA=bo(fC,fz),fB=bo(fC,fw);if(fE&&fE.ensure){var fx=fE.ensure.from.line,fD=fE.ensure.to.line;if(fx<fA){return{from:fx,to:bo(fC,bu(eC(fC,fx))+fy.wrapper.clientHeight)}}if(Math.min(fD,fC.lastLine())>=fB){return{from:bo(fC,bu(eC(fC,fD))-fy.wrapper.clientHeight),to:fD}}}return{from:fA,to:fB}}function d6(fE){var fC=fE.display,fD=fC.view;if(!fC.alignWidgets&&(!fC.gutters.firstChild||!fE.options.fixedGutter)){return}var fA=dq(fC)-fC.scroller.scrollLeft+fE.doc.scrollLeft;var fw=fC.gutters.offsetWidth,fx=fA+"px";for(var fz=0;fz<fD.length;fz++){if(!fD[fz].hidden){if(fE.options.fixedGutter&&fD[fz].gutter){fD[fz].gutter.style.left=fx}var fB=fD[fz].alignable;if(fB){for(var fy=0;fy<fB.length;fy++){fB[fy].style.left=fx}}}}if(fE.options.fixedGutter){fC.gutters.style.left=(fA+fw)+"px"}}function dy(fw){if(!fw.options.lineNumbers){return false}var fC=fw.doc,fy=dT(fw.options,fC.first+fC.size-1),fB=fw.display;if(fy.length!=fB.lineNumChars){var fD=fB.measure.appendChild(fg("div",[fg("div",fy)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var fz=fD.firstChild.offsetWidth,fA=fD.offsetWidth-fz;fB.lineGutter.style.width="";fB.lineNumInnerWidth=Math.max(fz,fB.lineGutter.offsetWidth-fA);fB.lineNumWidth=fB.lineNumInnerWidth+fA;fB.lineNumChars=fB.lineNumInnerWidth?fy.length:-1;fB.lineGutter.style.width=fB.lineNumWidth+"px";var fx=fB.gutters.offsetWidth;fB.scrollbarH.style.left=fw.options.fixedGutter?fx+"px":0;fB.sizer.style.marginLeft=fx+"px";return true}return false}function dT(fw,fx){return String(fw.lineNumberFormatter(fx+fw.firstLineNumber))}function dq(fw){return fw.scroller.getBoundingClientRect().left-fw.sizer.getBoundingClientRect().left}function de(fB,fE,fF){var fD=fB.display.viewFrom,fC=fB.display.viewTo,fz;var fw=bM(fB.display,fB.doc,fE);for(var fy=true;;fy=false){var fx=fB.display.scroller.clientWidth;if(!cR(fB,fw,fF)){break}fz=true;if(fB.display.maxLineChanged&&!fB.options.lineWrapping){b(fB)}var fA=c6(fB);bl(fB);c5(fB,fA);eo(fB,fA);if(fy&&fB.options.lineWrapping&&fx!=fB.display.scroller.clientWidth){fF=true;continue}fF=false;if(fE&&fE.top!=null){fE={top:Math.min(fA.docHeight-a4-fA.clientHeight,fE.top)}}fw=bM(fB.display,fB.doc,fE);if(fw.from>=fB.display.viewFrom&&fw.to<=fB.display.viewTo){break}}fB.display.updateLineNumbers=null;if(fz){Z(fB,"update",fB);if(fB.display.viewFrom!=fD||fB.display.viewTo!=fC){Z(fB,"viewportChange",fB,fB.display.viewFrom,fB.display.viewTo)}}return fz}function cR(fG,fy,fH){var fA=fG.display,fF=fG.doc;if(!fA.wrapper.offsetWidth){dY(fG);return}if(!fH&&fy.from>=fA.viewFrom&&fy.to<=fA.viewTo&&cM(fG)==0){return}if(dy(fG)){dY(fG)}var fE=ez(fG);var fz=fF.first+fF.size;var fD=Math.max(fy.from-fG.options.viewportMargin,fF.first);var fC=Math.min(fz,fy.to+fG.options.viewportMargin);if(fA.viewFrom<fD&&fD-fA.viewFrom<20){fD=Math.max(fF.first,fA.viewFrom)}if(fA.viewTo>fC&&fA.viewTo-fC<20){fC=Math.min(fz,fA.viewTo)}if(aS){fD=aH(fG.doc,fD);fC=dw(fG.doc,fC)}var fx=fD!=fA.viewFrom||fC!=fA.viewTo||fA.lastSizeC!=fA.wrapper.clientHeight;cw(fG,fD,fC);fA.viewOffset=bu(eC(fG.doc,fA.viewFrom));fG.display.mover.style.top=fA.viewOffset+"px";var fw=cM(fG);if(!fx&&fw==0&&!fH){return}var fB=dh();if(fw>4){fA.lineDiv.style.display="none"}b5(fG,fA.updateLineNumbers,fE);if(fw>4){fA.lineDiv.style.display=""}if(fB&&dh()!=fB&&fB.offsetHeight){fB.focus()}du(fA.cursorDiv);du(fA.selectionDiv);if(fx){fA.lastSizeC=fA.wrapper.clientHeight;dH(fG,400)}aU(fG);return true}function b(fw){var fA=fw.display;var fy=dJ(fw,fA.maxLine,fA.maxLine.text.length).left;fA.maxLineChanged=false;var fx=Math.max(0,fy+3);var fz=Math.max(0,fA.sizer.offsetLeft+fx+a4-fA.scroller.clientWidth);fA.sizer.style.minWidth=fx+"px";if(fz<fw.doc.scrollLeft){bm(fw,Math.min(fA.scroller.scrollLeft,fz),true)}}function c5(fw,fx){fw.display.sizer.style.minHeight=fw.display.heightForcer.style.top=fx.docHeight+"px";fw.display.gutters.style.height=Math.max(fx.docHeight,fx.clientHeight-a4)+"px"}function aU(fD){var fB=fD.display;var fx=fB.lineDiv.offsetTop;for(var fy=0;fy<fB.view.length;fy++){var fE=fB.view[fy],fF;if(fE.hidden){continue}if(bU){var fA=fE.node.offsetTop+fE.node.offsetHeight;fF=fA-fx;fx=fA}else{var fz=fE.node.getBoundingClientRect();fF=fz.bottom-fz.top}var fC=fE.line.height-fF;if(fF<2){fF=aI(fB)}if(fC>0.001||fC<-0.001){fj(fE.line,fF);bT(fE.line);if(fE.rest){for(var fw=0;fw<fE.rest.length;fw++){bT(fE.rest[fw])}}}}}function bT(fw){if(fw.widgets){for(var fx=0;fx<fw.widgets.length;++fx){fw.widgets[fx].height=fw.widgets[fx].node.offsetHeight}}}function ez(fw){var fA=fw.display,fz={},fy={};for(var fB=fA.gutters.firstChild,fx=0;fB;fB=fB.nextSibling,++fx){fz[fw.options.gutters[fx]]=fB.offsetLeft;fy[fw.options.gutters[fx]]=fB.offsetWidth}return{fixedPos:dq(fA),gutterTotalWidth:fA.gutters.offsetWidth,gutterLeft:fz,gutterWidth:fy,wrapperWidth:fA.wrapper.clientWidth}}function b5(fH,fy,fG){var fD=fH.display,fJ=fH.options.lineNumbers;var fw=fD.lineDiv,fI=fw.firstChild;function fC(fL){var fK=fL.nextSibling;if(cC&&bN&&fH.display.currentWheelTarget==fL){fL.style.display="none"}else{fL.parentNode.removeChild(fL)}return fK}var fE=fD.view,fB=fD.viewFrom;for(var fz=0;fz<fE.length;fz++){var fA=fE[fz];if(fA.hidden){}else{if(!fA.node){var fx=aw(fH,fA,fB,fG);fw.insertBefore(fx,fI)}else{while(fI!=fA.node){fI=fC(fI)}var fF=fJ&&fy!=null&&fy<=fB&&fA.lineNumber;if(fA.changes){if(cT(fA.changes,"gutter")>-1){fF=false}W(fH,fA,fB,fG)}if(fF){du(fA.lineNumber);fA.lineNumber.appendChild(document.createTextNode(dT(fH.options,fB)))}fI=fA.node.nextSibling}}fB+=fA.size}while(fI){fI=fC(fI)}}function W(fw,fy,fA,fB){for(var fx=0;fx<fy.changes.length;fx++){var fz=fy.changes[fx];if(fz=="text"){eI(fw,fy)}else{if(fz=="gutter"){cQ(fw,fy,fA,fB)}else{if(fz=="class"){db(fy)}else{if(fz=="widget"){aj(fy,fB)}}}}}fy.changes=null}function e3(fw){if(fw.node==fw.text){fw.node=fg("div",null,null,"position: relative");if(fw.text.parentNode){fw.text.parentNode.replaceChild(fw.node,fw.text)}fw.node.appendChild(fw.text);if(bU){fw.node.style.zIndex=2}}return fw.node}function dV(fx){var fw=fx.bgClass?fx.bgClass+" "+(fx.line.bgClass||""):fx.line.bgClass;if(fw){fw+=" CodeMirror-linebackground"}if(fx.background){if(fw){fx.background.className=fw}else{fx.background.parentNode.removeChild(fx.background);fx.background=null}}else{if(fw){var fy=e3(fx);fx.background=fy.insertBefore(fg("div",null,fw),fy.firstChild)}}}function dn(fw,fx){var fy=fw.display.externalMeasured;if(fy&&fy.line==fx.line){fw.display.externalMeasured=null;fx.measure=fy.measure;return fy.built}return ei(fw,fx)}function eI(fw,fz){var fx=fz.text.className;var fy=dn(fw,fz);if(fz.text==fz.node){fz.node=fy.pre}fz.text.parentNode.replaceChild(fy.pre,fz.text);fz.text=fy.pre;if(fy.bgClass!=fz.bgClass||fy.textClass!=fz.textClass){fz.bgClass=fy.bgClass;fz.textClass=fy.textClass;db(fz)}else{if(fx){fz.text.className=fx}}}function db(fx){dV(fx);if(fx.line.wrapClass){e3(fx).className=fx.line.wrapClass}else{if(fx.node!=fx.text){fx.node.className=""}}var fw=fx.textClass?fx.textClass+" "+(fx.line.textClass||""):fx.line.textClass;fx.text.className=fw||""}function cQ(fE,fC,fB,fD){if(fC.gutter){fC.node.removeChild(fC.gutter);fC.gutter=null}var fz=fC.line.gutterMarkers;if(fE.options.lineNumbers||fz){var fx=e3(fC);var fA=fC.gutter=fx.insertBefore(fg("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(fE.options.fixedGutter?fD.fixedPos:-fD.gutterTotalWidth)+"px"),fC.text);if(fE.options.lineNumbers&&(!fz||!fz["CodeMirror-linenumbers"])){fC.lineNumber=fA.appendChild(fg("div",dT(fE.options,fB),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+fD.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+fE.display.lineNumInnerWidth+"px"))}if(fz){for(var fy=0;fy<fE.options.gutters.length;++fy){var fw=fE.options.gutters[fy],fF=fz.hasOwnProperty(fw)&&fz[fw];if(fF){fA.appendChild(fg("div",[fF],"CodeMirror-gutter-elt","left: "+fD.gutterLeft[fw]+"px; width: "+fD.gutterWidth[fw]+"px"))}}}}}function aj(fw,fz){if(fw.alignable){fw.alignable=null}for(var fy=fw.node.firstChild,fx;fy;fy=fx){var fx=fy.nextSibling;if(fy.className=="CodeMirror-linewidget"){fw.node.removeChild(fy)}}eQ(fw,fz)}function aw(fw,fy,fz,fA){var fx=dn(fw,fy);fy.text=fy.node=fx.pre;if(fx.bgClass){fy.bgClass=fx.bgClass}if(fx.textClass){fy.textClass=fx.textClass}db(fy);cQ(fw,fy,fz,fA);eQ(fy,fA);return fy.node}function eQ(fx,fy){fk(fx.line,fx,fy,true);if(fx.rest){for(var fw=0;fw<fx.rest.length;fw++){fk(fx.rest[fw],fx,fy,false)}}}function fk(fE,fB,fD,fz){if(!fE.widgets){return}var fw=e3(fB);for(var fy=0,fC=fE.widgets;fy<fC.length;++fy){var fA=fC[fy],fx=fg("div",[fA.node],"CodeMirror-linewidget");if(!fA.handleMouseEvents){fx.ignoreEvents=true}bn(fA,fx,fB,fD);if(fz&&fA.above){fw.insertBefore(fx,fB.gutter||fB.text)}else{fw.appendChild(fx)}Z(fA,"redraw")}}function bn(fz,fy,fw,fA){if(fz.noHScroll){(fw.alignable||(fw.alignable=[])).push(fy);var fx=fA.wrapperWidth;fy.style.left=fA.fixedPos+"px";if(!fz.coverGutter){fx-=fA.gutterTotalWidth;fy.style.paddingLeft=fA.gutterTotalWidth+"px"}fy.style.width=fx+"px"}if(fz.coverGutter){fy.style.zIndex=5;fy.style.position="relative";if(!fz.noHScroll){fy.style.marginLeft=-fA.gutterTotalWidth+"px"}}}var T=G.Pos=function(fw,fx){if(!(this instanceof T)){return new T(fw,fx)}this.line=fw;this.ch=fx};var bY=G.cmpPos=function(fx,fw){return fx.line-fw.line||fx.ch-fw.ch};function b2(fw){return T(fw.line,fw.ch)}function bh(fx,fw){return bY(fx,fw)<0?fw:fx}function ak(fx,fw){return bY(fx,fw)<0?fx:fw}function fh(fw,fx){this.ranges=fw;this.primIndex=fx}fh.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(fw){if(fw==this){return true}if(fw.primIndex!=this.primIndex||fw.ranges.length!=this.ranges.length){return false}for(var fy=0;fy<this.ranges.length;fy++){var fx=this.ranges[fy],fz=fw.ranges[fy];if(bY(fx.anchor,fz.anchor)!=0||bY(fx.head,fz.head)!=0){return false}}return true},deepCopy:function(){for(var fw=[],fx=0;fx<this.ranges.length;fx++){fw[fx]=new dr(b2(this.ranges[fx].anchor),b2(this.ranges[fx].head))}return new fh(fw,this.primIndex)},somethingSelected:function(){for(var fw=0;fw<this.ranges.length;fw++){if(!this.ranges[fw].empty()){return true}}return false},contains:function(fz,fw){if(!fw){fw=fz}for(var fy=0;fy<this.ranges.length;fy++){var fx=this.ranges[fy];if(bY(fw,fx.from())>=0&&bY(fz,fx.to())<=0){return fy}}return -1}};function dr(fw,fx){this.anchor=fw;this.head=fx}dr.prototype={from:function(){return ak(this.anchor,this.head)},to:function(){return bh(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cf(fw,fD){var fy=fw[fD];fw.sort(function(fG,fF){return bY(fG.from(),fF.from())});fD=cT(fw,fy);for(var fA=1;fA<fw.length;fA++){var fE=fw[fA],fx=fw[fA-1];if(bY(fx.to(),fE.from())>=0){var fB=ak(fx.from(),fE.from()),fC=bh(fx.to(),fE.to());var fz=fx.empty()?fE.from()==fE.head:fx.from()==fx.head;if(fA<=fD){--fD}fw.splice(--fA,2,new dr(fz?fC:fB,fz?fB:fC))}}return new fh(fw,fD)}function eh(fw,fx){return new fh([new dr(fw,fx||fw)],0)}function cG(fw,fx){return Math.max(fw.first,Math.min(fx,fw.first+fw.size-1))}function e4(fx,fy){if(fy.line<fx.first){return T(fx.first,0)}var fw=fx.first+fx.size-1;if(fy.line>fw){return T(fw,eC(fx,fw).text.length)}return eP(fy,eC(fx,fy.line).text.length)}function eP(fy,fx){var fw=fy.ch;if(fw==null||fw>fx){return T(fy.line,fx)}else{if(fw<0){return T(fy.line,0)}else{return fy}}}function bP(fx,fw){return fw>=fx.first&&fw<fx.first+fx.size}function ds(fy,fz){for(var fw=[],fx=0;fx<fz.length;fx++){fw[fx]=e4(fy,fz[fx])}return fw}function eS(fB,fx,fA,fw){if(fB.cm&&fB.cm.display.shift||fB.extend){var fz=fx.anchor;if(fw){var fy=bY(fA,fz)<0;if(fy!=(bY(fw,fz)<0)){fz=fA;fA=fw}else{if(fy!=(bY(fA,fw)<0)){fA=fw}}}return new dr(fz,fA)}else{return new dr(fw||fA,fA)}}function fd(fz,fy,fw,fx){bC(fz,new fh([eS(fz,fz.sel.primary(),fy,fw)],0),fx)}function ap(fB,fA,fy){for(var fx=[],fz=0;fz<fB.sel.ranges.length;fz++){fx[fz]=eS(fB,fB.sel.ranges[fz],fA[fz],null)}var fw=cf(fx,fB.sel.primIndex);bC(fB,fw,fy)}function f(fA,fz,fx,fy){var fw=fA.sel.ranges.slice(0);fw[fz]=fx;bC(fA,cf(fw,fA.sel.primIndex),fy)}function E(fz,fx,fy,fw){bC(fz,eh(fx,fy),fw)}function d(fy,fw){var fx={ranges:fw.ranges,update:function(fz){this.ranges=[];for(var fA=0;fA<fz.length;fA++){this.ranges[fA]=new dr(e4(fy,fz[fA].anchor),e4(fy,fz[fA].head))}}};av(fy,"beforeSelectionChange",fy,fx);if(fy.cm){av(fy.cm,"beforeSelectionChange",fy.cm,fx)}if(fx.ranges!=fw.ranges){return cf(fx.ranges,fx.ranges.length-1)}else{return fw}}function eu(fA,fz,fx){var fw=fA.history.done,fy=e2(fw);if(fy&&fy.ranges){fw[fw.length-1]=fz;dQ(fA,fz,fx)}else{bC(fA,fz,fx)}}function bC(fy,fx,fw){dQ(fy,fx,fw);fp(fy,fy.sel,fy.cm?fy.cm.curOp.id:NaN,fw)}function dQ(fz,fy,fx){if(eF(fz,"beforeSelectionChange")||fz.cm&&eF(fz.cm,"beforeSelectionChange")){fy=d(fz,fy)}var fw=bY(fy.primary().head,fz.sel.primary().head)<0?-1:1;cK(fz,n(fz,fy,fw,true));if(!(fx&&fx.scroll===false)&&fz.cm){e1(fz.cm)}}function cK(fx,fw){if(fw.equals(fx.sel)){return}fx.sel=fw;if(fx.cm){fx.cm.curOp.updateInput=fx.cm.curOp.selectionChanged=fx.cm.curOp.cursorActivity=true}Z(fx,"cursorActivity",fx)}function dZ(fw){cK(fw,n(fw,fw.sel,null,false),V)}function n(fE,fw,fB,fC){var fy;for(var fz=0;fz<fw.ranges.length;fz++){var fA=fw.ranges[fz];var fD=bD(fE,fA.anchor,fB,fC);var fx=bD(fE,fA.head,fB,fC);if(fy||fD!=fA.anchor||fx!=fA.head){if(!fy){fy=fw.ranges.slice(0,fz)}fy[fz]=new dr(fD,fx)}}return fy?cf(fy,fw.primIndex):fw}function bD(fF,fE,fB,fC){var fG=false,fy=fE;var fz=fB||1;fF.cantEdit=false;search:for(;;){var fH=eC(fF,fy.line);if(fH.markedSpans){for(var fA=0;fA<fH.markedSpans.length;++fA){var fw=fH.markedSpans[fA],fx=fw.marker;if((fw.from==null||(fx.inclusiveLeft?fw.from<=fy.ch:fw.from<fy.ch))&&(fw.to==null||(fx.inclusiveRight?fw.to>=fy.ch:fw.to>fy.ch))){if(fC){av(fx,"beforeCursorEnter");if(fx.explicitlyCleared){if(!fH.markedSpans){break}else{--fA;continue}}}if(!fx.atomic){continue}var fD=fx.find(fz<0?-1:1);if(bY(fD,fy)==0){fD.ch+=fz;if(fD.ch<0){if(fD.line>fF.first){fD=e4(fF,T(fD.line-1))}else{fD=null}}else{if(fD.ch>fH.text.length){if(fD.line<fF.first+fF.size-1){fD=T(fD.line+1,0)}else{fD=null}}}if(!fD){if(fG){if(!fC){return bD(fF,fE,fB,true)}fF.cantEdit=true;return T(fF.first,0)}fG=true;fD=fE;fz=-fz}}fy=fD;continue search}}}return fy}}function bl(fI){var fD=fI.display,fH=fI.doc;var fF=document.createDocumentFragment();var fz=document.createDocumentFragment();for(var fB=0;fB<fH.sel.ranges.length;fB++){var fC=fH.sel.ranges[fB];var fA=fC.empty();if(fA||fI.options.showCursorWhenSelecting){I(fI,fC,fF)}if(!fA){ag(fI,fC,fz)}}if(fI.options.moveInputWithCursor){var fE=dm(fI,fH.sel.primary().head,"div");var fw=fD.wrapper.getBoundingClientRect(),fy=fD.lineDiv.getBoundingClientRect();var fG=Math.max(0,Math.min(fD.wrapper.clientHeight-10,fE.top+fy.top-fw.top));var fx=Math.max(0,Math.min(fD.wrapper.clientWidth-10,fE.left+fy.left-fw.left));fD.inputDiv.style.top=fG+"px";fD.inputDiv.style.left=fx+"px"}bz(fD.cursorDiv,fF);bz(fD.selectionDiv,fz)}function I(fw,fz,fy){var fB=dm(fw,fz.head,"div");var fA=fy.appendChild(fg("div","\u00a0","CodeMirror-cursor"));fA.style.left=fB.left+"px";fA.style.top=fB.top+"px";fA.style.height=Math.max(0,fB.bottom-fB.top)*fw.options.cursorHeight+"px";if(fB.other){var fx=fy.appendChild(fg("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));fx.style.display="";fx.style.left=fB.other.left+"px";fx.style.top=fB.other.top+"px";fx.style.height=(fB.other.bottom-fB.other.top)*0.85+"px"}}function ag(fA,fG,fB){var fJ=fA.display,fN=fA.doc;var fw=document.createDocumentFragment();var fF=et(fA.display),fz=fF.left,fK=fJ.lineSpace.offsetWidth-fF.right;function fH(fR,fQ,fP,fO){if(fQ<0){fQ=0}fw.appendChild(fg("div",null,"CodeMirror-selected","position: absolute; left: "+fR+"px; top: "+fQ+"px; width: "+(fP==null?fK-fR:fP)+"px; height: "+(fO-fQ)+"px"))}function fx(fP,fR,fU){var fQ=eC(fN,fP);var fS=fQ.text.length;var fV,fO;function fT(fX,fW){return cq(fA,T(fP,fX),"div",fQ,fW)}dx(a(fQ),fR||0,fU==null?fS:fU,function(f3,f2,fW){var fZ=fT(f3,"left"),f0,f1,fY;if(f3==f2){f0=fZ;f1=fY=fZ.left}else{f0=fT(f2-1,"right");if(fW=="rtl"){var fX=fZ;fZ=f0;f0=fX}f1=fZ.left;fY=f0.right}if(fR==null&&f3==0){f1=fz}if(f0.top-fZ.top>3){fH(f1,fZ.top,null,fZ.bottom);f1=fz;if(fZ.bottom<f0.top){fH(f1,fZ.bottom,null,f0.top)}}if(fU==null&&f2==fS){fY=fK}if(!fV||fZ.top<fV.top||fZ.top==fV.top&&fZ.left<fV.left){fV=fZ}if(!fO||f0.bottom>fO.bottom||f0.bottom==fO.bottom&&f0.right>fO.right){fO=f0}if(f1<fz+1){f1=fz}fH(f1,f0.top,fY-f1,f0.bottom)});return{start:fV,end:fO}}var fM=fG.from(),fL=fG.to();if(fM.line==fL.line){fx(fM.line,fM.ch,fL.ch)}else{var fy=eC(fN,fM.line),fD=eC(fN,fL.line);var fC=y(fy)==y(fD);var fE=fx(fM.line,fM.ch,fC?fy.text.length+1:null).end;var fI=fx(fL.line,fC?0:null,fL.ch).start;if(fC){if(fE.top<fI.top-2){fH(fE.right,fE.top,null,fE.bottom);fH(fz,fI.top,fI.left,fI.bottom)}else{fH(fE.right,fE.top,fI.left-fE.right,fE.bottom)}}if(fE.bottom<fI.top){fH(fz,fE.bottom,null,fI.top)}}fB.appendChild(fw)}function o(fw){if(!fw.state.focused){return}var fy=fw.display;clearInterval(fy.blinker);var fx=true;fy.cursorDiv.style.visibility="";if(fw.options.cursorBlinkRate>0){fy.blinker=setInterval(function(){fy.cursorDiv.style.visibility=(fx=!fx)?"":"hidden"},fw.options.cursorBlinkRate)}}function dH(fw,fx){if(fw.doc.mode.startState&&fw.doc.frontier<fw.display.viewTo){fw.state.highlight.set(fx,ce(cv,fw))}}function cv(fw){var fz=fw.doc;if(fz.frontier<fz.first){fz.frontier=fz.first}if(fz.frontier>=fw.display.viewTo){return}var fx=+new Date+fw.options.workTime;var fy=bK(fz.mode,c7(fw,fz.frontier));cs(fw,function(){fz.iter(fz.frontier,Math.min(fz.first+fz.size,fw.display.viewTo+500),function(fA){if(fz.frontier>=fw.display.viewFrom){var fC=fA.styles;fA.styles=eW(fw,fA,fy,true);var fD=!fC||fC.length!=fA.styles.length;for(var fB=0;!fD&&fB<fC.length;++fB){fD=fC[fB]!=fA.styles[fB]}if(fD){Q(fw,fz.frontier,"text")}fA.stateAfter=bK(fz.mode,fy)}else{c3(fw,fA.text,fy);fA.stateAfter=fz.frontier%5==0?bK(fz.mode,fy):null}++fz.frontier;if(+new Date>fx){dH(fw,fw.options.workDelay);return true}})})}function ch(fC,fw,fz){var fx,fA,fB=fC.doc;var fy=fz?-1:fw-(fC.doc.mode.innerMode?1000:100);for(var fF=fw;fF>fy;--fF){if(fF<=fB.first){return fB.first}var fE=eC(fB,fF-1);if(fE.stateAfter&&(!fz||fF<=fB.frontier)){return fF}var fD=bB(fE.text,null,fC.options.tabSize);if(fA==null||fx>fD){fA=fF-1;fx=fD}}return fA}function c7(fw,fC,fx){var fA=fw.doc,fz=fw.display;if(!fA.mode.startState){return true}var fB=ch(fw,fC,fx),fy=fB>fA.first&&eC(fA,fB-1).stateAfter;if(!fy){fy=bI(fA.mode)}else{fy=bK(fA.mode,fy)}fA.iter(fB,fC,function(fD){c3(fw,fD.text,fy);var fE=fB==fC-1||fB%5==0||fB>=fz.viewFrom&&fB<fz.viewTo;fD.stateAfter=fE?bK(fA.mode,fy):null;++fB});if(fx){fA.frontier=fB}return fy}function ev(fw){return fw.lineSpace.offsetTop}function bq(fw){return fw.mover.offsetHeight-fw.lineSpace.offsetHeight}function et(fy){if(fy.cachedPaddingH){return fy.cachedPaddingH}var fx=bz(fy.measure,fg("pre","x"));var fw=window.getComputedStyle?window.getComputedStyle(fx):fx.currentStyle;return fy.cachedPaddingH={left:parseInt(fw.paddingLeft),right:parseInt(fw.paddingRight)}}function b1(fD,fz,fC){var fy=fD.options.lineWrapping;var fA=fy&&fD.display.scroller.clientWidth;if(!fz.measure.heights||fy&&fz.measure.width!=fA){var fB=fz.measure.heights=[];if(fy){fz.measure.width=fA;var fF=fz.text.firstChild.getClientRects();for(var fw=0;fw<fF.length-1;fw++){var fE=fF[fw],fx=fF[fw+1];if(Math.abs(fE.bottom-fx.bottom)>2){fB.push((fE.bottom+fx.top)/2-fC.top)}}}fB.push(fC.bottom-fC.top)}}function cc(fy,fw,fz){if(fy.line==fw){return{map:fy.measure.map,cache:fy.measure.cache}}for(var fx=0;fx<fy.rest.length;fx++){if(fy.rest[fx]==fw){return{map:fy.measure.maps[fx],cache:fy.measure.caches[fx]}}}for(var fx=0;fx<fy.rest.length;fx++){if(bv(fy.rest[fx])>fz){return{map:fy.measure.maps[fx],cache:fy.measure.caches[fx],before:true}}}}function cD(fw,fy){fy=y(fy);var fA=bv(fy);var fx=fw.display.externalMeasured=new bf(fw.doc,fy,fA);fx.lineN=fA;var fz=fx.built=ei(fw,fx);fx.text=fz.pre;bz(fw.display.lineMeasure,fz.pre);return fx}function dJ(fw,fx,fz,fy){return B(fw,aP(fw,fx),fz,fy)}function ey(fw,fy){if(fy>=fw.display.viewFrom&&fy<fw.display.viewTo){return fw.display.view[cY(fw,fy)]}var fx=fw.display.externalMeasured;if(fx&&fy>=fx.lineN&&fy<fx.lineN+fx.size){return fx}}function aP(fw,fy){var fz=bv(fy);var fx=ey(fw,fz);if(fx&&!fx.text){fx=null}else{if(fx&&fx.changes){W(fw,fx,fz,ez(fw))}}if(!fx){fx=cD(fw,fy)}var fA=cc(fx,fy,fz);return{line:fy,view:fx,rect:null,map:fA.map,cache:fA.cache,before:fA.before,hasHeights:false}}function B(fw,fB,fz,fx){if(fB.before){fz=-1}var fy=fz+(fx||""),fA;if(fB.cache.hasOwnProperty(fy)){fA=fB.cache[fy]}else{if(!fB.rect){fB.rect=fB.view.text.getBoundingClientRect()}if(!fB.hasHeights){b1(fw,fB.view,fB.rect);fB.hasHeights=true}fA=j(fw,fB,fz,fx);if(!fA.bogus){fB.cache[fy]=fA}}return{left:fA.left,right:fA.right,top:fA.top,bottom:fA.bottom}}var d3={left:0,right:0,top:0,bottom:0};function j(fD,fL,fF,fB){var fO=fL.map;var fI,fA,fz,fw;for(var fK=0;fK<fO.length;fK+=3){var fN=fO[fK],fJ=fO[fK+1];if(fF<fN){fA=0;fz=1;fw="left"}else{if(fF<fJ){fA=fF-fN;fz=fA+1}else{if(fK==fO.length-3||fF==fJ&&fO[fK+3]>fF){fz=fJ-fN;fA=fz-1;if(fF>=fJ){fw="right"}}}}if(fA!=null){fI=fO[fK+2];if(fN==fJ&&fB==(fI.insertLeft?"left":"right")){fw=fB}if(fB=="left"&&fA==0){while(fK&&fO[fK-2]==fO[fK-3]&&fO[fK-1].insertLeft){fI=fO[(fK-=3)+2];fw="left"}}if(fB=="right"&&fA==fJ-fN){while(fK<fO.length-3&&fO[fK+3]==fO[fK+4]&&!fO[fK+5].insertLeft){fI=fO[(fK+=3)+2];fw="right"}}break}}var fx;if(fI.nodeType==3){while(fA&&eN(fL.line.text.charAt(fN+fA))){--fA}while(fN+fz<fJ&&eN(fL.line.text.charAt(fN+fz))){++fz}if(bR&&fA==0&&fz==fJ-fN){fx=fI.parentNode.getBoundingClientRect()}else{if(dd&&fD.options.lineWrapping){var fy=b4(fI,fA,fz).getClientRects();if(fy.length){fx=fy[fB=="right"?fy.length-1:0]}else{fx=d3}}else{fx=b4(fI,fA,fz).getBoundingClientRect()}}}else{if(fA>0){fw=fB="right"}var fy;if(fD.options.lineWrapping&&(fy=fI.getClientRects()).length>1){fx=fy[fB=="right"?fy.length-1:0]}else{fx=fI.getBoundingClientRect()}}if(bR&&!fA&&(!fx||!fx.left&&!fx.right)){var fC=fI.parentNode.getClientRects()[0];if(fC){fx={left:fC.left,right:fC.left+c9(fD.display),top:fC.top,bottom:fC.bottom}}else{fx=d3}}var fH,fG=(fx.bottom+fx.top)/2-fL.rect.top;var fM=fL.view.measure.heights;for(var fK=0;fK<fM.length-1;fK++){if(fG<fM[fK]){break}}fH=fK?fM[fK-1]:0;fG=fM[fK];var fE={left:(fw=="right"?fx.right:fx.left)-fL.rect.left,right:(fw=="left"?fx.left:fx.right)-fL.rect.left,top:fH,bottom:fG};if(!fx.left&&!fx.right){fE.bogus=true}return fE}function am(fx){if(fx.measure){fx.measure.cache={};fx.measure.heights=null;if(fx.rest){for(var fw=0;fw<fx.rest.length;fw++){fx.measure.caches[fw]={}}}}}function aB(fw){fw.display.externalMeasure=null;du(fw.display.lineMeasure);for(var fx=0;fx<fw.display.view.length;fx++){am(fw.display.view[fx])}}function af(fw){aB(fw);fw.display.cachedCharWidth=fw.display.cachedTextHeight=fw.display.cachedPaddingH=null;if(!fw.options.lineWrapping){fw.display.maxLineChanged=true}fw.display.lineNumChars=null}function cd(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cb(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eg(fC,fz,fB,fx){if(fz.widgets){for(var fy=0;fy<fz.widgets.length;++fy){if(fz.widgets[fy].above){var fE=cA(fz.widgets[fy]);fB.top+=fE;fB.bottom+=fE}}}if(fx=="line"){return fB}if(!fx){fx="local"}var fA=bu(fz);if(fx=="local"){fA+=ev(fC.display)}else{fA-=fC.display.viewOffset}if(fx=="page"||fx=="window"){var fw=fC.display.lineSpace.getBoundingClientRect();fA+=fw.top+(fx=="window"?0:cb());var fD=fw.left+(fx=="window"?0:cd());fB.left+=fD;fB.right+=fD}fB.top+=fA;fB.bottom+=fA;return fB}function fs(fx,fA,fy){if(fy=="div"){return fA}var fC=fA.left,fB=fA.top;if(fy=="page"){fC-=cd();fB-=cb()}else{if(fy=="local"||!fy){var fz=fx.display.sizer.getBoundingClientRect();fC+=fz.left;fB+=fz.top}}var fw=fx.display.lineSpace.getBoundingClientRect();return{left:fC-fw.left,top:fB-fw.top}}function cq(fw,fA,fz,fy,fx){if(!fy){fy=eC(fw.doc,fA.line)}return eg(fw,fy,dJ(fw,fy,fA.ch,fx),fz)}function dm(fE,fD,fy,fC,fG){fC=fC||eC(fE.doc,fD.line);if(!fG){fG=aP(fE,fC)}function fA(fJ,fI){var fH=B(fE,fG,fJ,fI?"right":"left");if(fI){fH.left=fH.right}else{fH.right=fH.left}return eg(fE,fC,fH,fy)}function fF(fK,fH){var fI=fB[fH],fJ=fI.level%2;if(fK==c4(fI)&&fH&&fI.level<fB[fH-1].level){fI=fB[--fH];fK=fr(fI)-(fI.level%2?0:1);fJ=true}else{if(fK==fr(fI)&&fH<fB.length-1&&fI.level<fB[fH+1].level){fI=fB[++fH];fK=c4(fI)-fI.level%2;fJ=false}}if(fJ&&fK==fI.to&&fK>fI.from){return fA(fK-1)}return fA(fK,fJ)}var fB=a(fC),fw=fD.ch;if(!fB){return fA(fw)}var fx=ax(fB,fw);var fz=fF(fw,fx);if(er!=null){fz.other=fF(fw,er)}return fz}function dc(fw,fA){var fz=0,fA=e4(fw.doc,fA);if(!fw.options.lineWrapping){fz=c9(fw.display)*fA.ch}var fx=eC(fw.doc,fA.line);var fy=bu(fx)+ev(fw.display);return{left:fz,right:fz,top:fy,bottom:fy+fx.height}}function ff(fw,fx,fy,fA){var fz=T(fw,fx);fz.xRel=fA;if(fy){fz.outside=true}return fz}function e9(fD,fA,fz){var fC=fD.doc;fz+=fD.display.viewOffset;if(fz<0){return ff(fC.first,0,true,-1)}var fy=bo(fC,fz),fE=fC.first+fC.size-1;if(fy>fE){return ff(fC.first+fC.size-1,eC(fC,fE).text.length,true,1)}if(fA<0){fA=0}var fx=eC(fC,fy);for(;;){var fF=cB(fD,fx,fy,fA,fz);var fB=dW(fx);var fw=fB&&fB.find(0,true);if(fB&&(fF.ch>fw.from.ch||fF.ch==fw.from.ch&&fF.xRel>0)){fy=bv(fx=fw.to.line)}else{return fF}}}function cB(fG,fy,fJ,fI,fH){var fF=fH-bu(fy);var fC=false,fP=2*fG.display.wrapper.clientWidth;var fM=aP(fG,fy);function fT(fV){var fW=dm(fG,T(fJ,fV),"line",fy,fM);fC=true;if(fF>fW.bottom){return fW.left-fP}else{if(fF<fW.top){return fW.left+fP}else{fC=false}}return fW.left}var fL=a(fy),fO=fy.text.length;var fQ=cm(fy),fz=cx(fy);var fN=fT(fQ),fw=fC,fx=fT(fz),fB=fC;if(fI>fx){return ff(fJ,fz,fB,1)}for(;;){if(fL?fz==fQ||fz==u(fy,fQ,1):fz-fQ<=1){var fK=fI<fN||fI-fN<=fx-fI?fQ:fz;var fS=fI-(fK==fQ?fN:fx);while(eN(fy.text.charAt(fK))){++fK}var fE=ff(fJ,fK,fK==fQ?fw:fB,fS<-1?-1:fS>1?1:0);return fE}var fD=Math.ceil(fO/2),fU=fQ+fD;if(fL){fU=fQ;for(var fR=0;fR<fD;++fR){fU=u(fy,fU,1)}}var fA=fT(fU);if(fA>fI){fz=fU;fx=fA;if(fB=fC){fx+=1000}fO=fD}else{fQ=fU;fN=fA;fw=fC;fO-=fD}}}var ay;function aI(fy){if(fy.cachedTextHeight!=null){return fy.cachedTextHeight}if(ay==null){ay=fg("pre");for(var fx=0;fx<49;++fx){ay.appendChild(document.createTextNode("x"));ay.appendChild(fg("br"))}ay.appendChild(document.createTextNode("x"))}bz(fy.measure,ay);var fw=ay.offsetHeight/50;if(fw>3){fy.cachedTextHeight=fw}du(fy.measure);return fw||1}function c9(fA){if(fA.cachedCharWidth!=null){return fA.cachedCharWidth}var fw=fg("span","xxxxxxxxxx");var fz=fg("pre",[fw]);bz(fA.measure,fz);var fy=fw.getBoundingClientRect(),fx=(fy.right-fy.left)/10;if(fx>2){fA.cachedCharWidth=fx}return fx||10}var dB=0;function cp(fw){fw.curOp={viewChanged:false,startHeight:fw.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivity:false,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++dB};if(!ca++){a8=[]}}function ah(fH){var fC=fH.curOp,fG=fH.doc,fD=fH.display;fH.curOp=null;if(fC.updateMaxLine){g(fH)}if(fC.viewChanged||fC.forceUpdate||fC.scrollTop!=null||fC.scrollToPos&&(fC.scrollToPos.from.line<fD.viewFrom||fC.scrollToPos.to.line>=fD.viewTo)||fD.maxLineChanged&&fH.options.lineWrapping){var fA=de(fH,{top:fC.scrollTop,ensure:fC.scrollToPos},fC.forceUpdate);if(fH.display.scroller.offsetHeight){fH.doc.scrollTop=fH.display.scroller.scrollTop}}if(!fA&&fC.selectionChanged){bl(fH)}if(!fA&&fC.startHeight!=fH.doc.height){eo(fH)}if(fC.scrollTop!=null&&fD.scroller.scrollTop!=fC.scrollTop){var fE=Math.max(0,Math.min(fD.scroller.scrollHeight-fD.scroller.clientHeight,fC.scrollTop));fD.scroller.scrollTop=fD.scrollbarV.scrollTop=fG.scrollTop=fE}if(fC.scrollLeft!=null&&fD.scroller.scrollLeft!=fC.scrollLeft){var fx=Math.max(0,Math.min(fD.scroller.scrollWidth-fD.scroller.clientWidth,fC.scrollLeft));fD.scroller.scrollLeft=fD.scrollbarH.scrollLeft=fG.scrollLeft=fx;d6(fH)}if(fC.scrollToPos){var fF=C(fH,e4(fH.doc,fC.scrollToPos.from),e4(fH.doc,fC.scrollToPos.to),fC.scrollToPos.margin);if(fC.scrollToPos.isCursor&&fH.state.focused){dz(fH,fF)}}if(fC.selectionChanged){o(fH)}if(fH.state.focused&&fC.updateInput){eM(fH,fC.typing)}var fB=fC.maybeHiddenMarkers,fw=fC.maybeUnhiddenMarkers;if(fB){for(var fz=0;fz<fB.length;++fz){if(!fB[fz].lines.length){av(fB[fz],"hide")}}}if(fw){for(var fz=0;fz<fw.length;++fz){if(fw[fz].lines.length){av(fw[fz],"unhide")}}}var fy;if(!--ca){fy=a8;a8=null}if(fC.changeObjs){for(var fz=0;fz<fC.changeObjs.length;fz++){av(fH,"change",fH,fC.changeObjs[fz])}av(fH,"changes",fH,fC.changeObjs)}if(fC.cursorActivity){av(fH,"cursorActivity",fH)}if(fy){for(var fz=0;fz<fy.length;++fz){fy[fz]()}}}function cs(fw,fx){if(fw.curOp){return fx()}cp(fw);try{return fx()}finally{ah(fw)}}function cE(fw,fx){return function(){if(fw.curOp){return fx.apply(fw,arguments)}cp(fw);try{return fx.apply(fw,arguments)}finally{ah(fw)}}}function cJ(fw){return function(){if(this.curOp){return fw.apply(this,arguments)}cp(this);try{return fw.apply(this,arguments)}finally{ah(this)}}}function ck(fw){return function(){var fx=this.cm;if(!fx||fx.curOp){return fw.apply(this,arguments)}cp(fx);try{return fw.apply(this,arguments)}finally{ah(fx)}}}function bf(fy,fw,fx){this.line=fw;this.rest=h(fw);this.size=this.rest?bv(e2(this.rest))-fx+1:1;this.node=this.text=null;this.hidden=eT(fy,fw)}function el(fw,fC,fB){var fA=[],fy;for(var fz=fC;fz<fB;fz=fy){var fx=new bf(fw.doc,eC(fw.doc,fz),fz);fy=fz+fx.size;fA.push(fx)}return fA}function ac(fD,fB,fC,fE){if(fB==null){fB=fD.doc.first}if(fC==null){fC=fD.doc.first+fD.doc.size}if(!fE){fE=0}var fy=fD.display;if(fE&&fC<fy.viewTo&&(fy.updateLineNumbers==null||fy.updateLineNumbers>fB)){fy.updateLineNumbers=fB}fD.curOp.viewChanged=true;if(fB>=fy.viewTo){if(aS&&aH(fD.doc,fB)<fy.viewTo){dY(fD)}}else{if(fC<=fy.viewFrom){if(aS&&dw(fD.doc,fC+fE)>fy.viewFrom){dY(fD)}else{fy.viewFrom+=fE;fy.viewTo+=fE}}else{if(fB<=fy.viewFrom&&fC>=fy.viewTo){dY(fD)}else{if(fB<=fy.viewFrom){var fA=cP(fD,fC,fC+fE,1);if(fA){fy.view=fy.view.slice(fA.index);fy.viewFrom=fA.lineN;fy.viewTo+=fE}else{dY(fD)}}else{if(fC>=fy.viewTo){var fA=cP(fD,fB,fB,-1);if(fA){fy.view=fy.view.slice(0,fA.index);fy.viewTo=fA.lineN}else{dY(fD)}}else{var fz=cP(fD,fB,fB,-1);var fx=cP(fD,fC,fC+fE,1);if(fz&&fx){fy.view=fy.view.slice(0,fz.index).concat(el(fD,fz.lineN,fx.lineN)).concat(fy.view.slice(fx.index));fy.viewTo+=fE}else{dY(fD)}}}}}}var fw=fy.externalMeasured;if(fw){if(fC<fw.lineN){fw.lineN+=fE}else{if(fB<fw.lineN+fw.size){fy.externalMeasured=null}}}}function Q(fx,fy,fB){fx.curOp.viewChanged=true;var fC=fx.display,fA=fx.display.externalMeasured;if(fA&&fy>=fA.lineN&&fy<fA.lineN+fA.size){fC.externalMeasured=null}if(fy<fC.viewFrom||fy>=fC.viewTo){return}var fz=fC.view[cY(fx,fy)];if(fz.node==null){return}var fw=fz.changes||(fz.changes=[]);if(cT(fw,fB)==-1){fw.push(fB)}}function dY(fw){fw.display.viewFrom=fw.display.viewTo=fw.doc.first;fw.display.view=[];fw.display.viewOffset=0}function cY(fw,fz){if(fz>=fw.display.viewTo){return null}fz-=fw.display.viewFrom;if(fz<0){return null}var fx=fw.display.view;for(var fy=0;fy<fx.length;fy++){fz-=fx[fy].size;if(fz<0){return fy}}}function cP(fE,fy,fA,fx){var fB=cY(fE,fy),fD,fC=fE.display.view;if(!aS){return{index:fB,lineN:fA}}for(var fz=0,fw=fE.display.viewFrom;fz<fB;fz++){fw+=fC[fz].size}if(fw!=fy){if(fx>0){if(fB==fC.length-1){return null}fD=(fw+fC[fB].size)-fy;fB++}else{fD=fw-fy}fy+=fD;fA+=fD}while(aH(fE.doc,fA)!=fA){if(fB==(fx<0?0:fC.length-1)){return null}fA+=fx*fC[fB-(fx<0?1:0)].size;fB+=fx}return{index:fB,lineN:fA}}function cw(fw,fA,fz){var fy=fw.display,fx=fy.view;if(fx.length==0||fA>=fy.viewTo||fz<=fy.viewFrom){fy.view=el(fw,fA,fz);fy.viewFrom=fA}else{if(fy.viewFrom>fA){fy.view=el(fw,fA,fy.viewFrom).concat(fy.view)}else{if(fy.viewFrom<fA){fy.view=fy.view.slice(cY(fw,fA))}}fy.viewFrom=fA;if(fy.viewTo<fz){fy.view=fy.view.concat(el(fw,fy.viewTo,fz))}else{if(fy.viewTo>fz){fy.view=fy.view.slice(0,cY(fw,fz))}}}fy.viewTo=fz}function cM(fw){var fx=fw.display.view,fA=0;for(var fz=0;fz<fx.length;fz++){var fy=fx[fz];if(!fy.hidden&&(!fy.node||fy.changes)){++fA}}return fA}function a6(fw){if(fw.display.pollingFast){return}fw.display.poll.set(fw.options.pollInterval,function(){b0(fw);if(fw.state.focused){a6(fw)}})}function A(fw){var fx=false;fw.display.pollingFast=true;function fy(){var fz=b0(fw);if(!fz&&!fx){fx=true;fw.display.poll.set(60,fy)}else{fw.display.pollingFast=false;a6(fw)}}fw.display.poll.set(20,fy)}function b0(fz){var fB=fz.display.input,fD=fz.display.prevInput,fO=fz.doc;if(!fz.state.focused||bc(fB)||ae(fz)||fz.options.disableInput){return false}var fC=fB.value;if(fC==fD&&!fz.somethingSelected()){return false}if(dd&&!bR&&fz.display.inputHasSelection===fC){eM(fz);return false}var fK=!fz.curOp;if(fK){cp(fz)}fz.display.shift=false;var fJ=0,fG=Math.min(fD.length,fC.length);while(fJ<fG&&fD.charCodeAt(fJ)==fC.charCodeAt(fJ)){++fJ}var fx=fC.slice(fJ),fE=aL(fx);var fN=fz.state.pasteIncoming&&fE.length>1&&fO.sel.ranges.length==fE.length;for(var fL=fO.sel.ranges.length-1;fL>=0;fL--){var fF=fO.sel.ranges[fL];var fH=fF.from(),fw=fF.to();if(fJ<fD.length){fH=T(fH.line,fH.ch-(fD.length-fJ))}else{if(fz.state.overwrite&&fF.empty()&&!fz.state.pasteIncoming){fw=T(fw.line,Math.min(eC(fO,fw.line).text.length,fw.ch+e2(fE).length))}}var fy=fz.curOp.updateInput;var fM={from:fH,to:fw,text:fN?[fE[fL]]:fE,origin:fz.state.pasteIncoming?"paste":fz.state.cutIncoming?"cut":"+input"};a0(fz.doc,fM);Z(fz,"inputRead",fz,fM);if(fx&&!fz.state.pasteIncoming&&fz.options.electricChars&&fz.options.smartIndent&&fF.head.ch<100&&(!fL||fO.sel.ranges[fL-1].head.line!=fF.head.line)){var fA=fz.getModeAt(fF.head).electricChars;if(fA){for(var fI=0;fI<fA.length;fI++){if(fx.indexOf(fA.charAt(fI))>-1){Y(fz,fF.head.line,"smart");break}}}}}e1(fz);fz.curOp.updateInput=fy;fz.curOp.typing=true;if(fC.length>1000||fC.indexOf("\n")>-1){fB.value=fz.display.prevInput=""}else{fz.display.prevInput=fC}if(fK){ah(fz)}fz.state.pasteIncoming=fz.state.cutIncoming=false;return true}function eM(fw,fA){var fx,fz,fC=fw.doc;if(fw.somethingSelected()){fw.display.prevInput="";var fy=fC.sel.primary();fx=cL&&(fy.to().line-fy.from().line>100||(fz=fw.getSelection()).length>1000);var fB=fx?"-":fz||fw.getSelection();fw.display.input.value=fB;if(fw.state.focused){df(fw.display.input)}if(dd&&!bR){fw.display.inputHasSelection=fB}}else{if(!fA){fw.display.prevInput=fw.display.input.value="";if(dd&&!bR){fw.display.inputHasSelection=null}}}fw.display.inaccurateSelection=fx}function d2(fw){if(fw.options.readOnly!="nocursor"&&(!dI||dh()!=fw.display.input)){fw.display.input.focus()}}function r(fw){if(!fw.state.focused){d2(fw);cj(fw)}}function ae(fw){return fw.options.readOnly||fw.doc.cantEdit}function fa(fx){var fC=fx.display;bF(fC.scroller,"mousedown",cE(fx,dU));if(ec){bF(fC.scroller,"dblclick",cE(fx,function(fF){if(aE(fx,fF)){return}var fG=b6(fx,fF);if(!fG||l(fx,fF)||aV(fx.display,fF)){return}cn(fF);var fE=ao(fx.doc,fG);fd(fx.doc,fE.anchor,fE.head)}))}else{bF(fC.scroller,"dblclick",function(fE){aE(fx,fE)||cn(fE)})}bF(fC.lineSpace,"selectstart",function(fE){if(!aV(fC,fE)){cn(fE)}});if(!fn){bF(fC.scroller,"contextmenu",function(fE){ar(fx,fE)})}bF(fC.scroller,"scroll",function(){if(fC.scroller.clientHeight){M(fx,fC.scroller.scrollTop);bm(fx,fC.scroller.scrollLeft,true);av(fx,"scroll",fx)}});bF(fC.scrollbarV,"scroll",function(){if(fC.scroller.clientHeight){M(fx,fC.scrollbarV.scrollTop)}});bF(fC.scrollbarH,"scroll",function(){if(fC.scroller.clientHeight){bm(fx,fC.scrollbarH.scrollLeft)}});bF(fC.scroller,"mousewheel",function(fE){c(fx,fE)});bF(fC.scroller,"DOMMouseScroll",function(fE){c(fx,fE)});function fD(){if(fx.state.focused){setTimeout(ce(d2,fx),0)}}bF(fC.scrollbarH,"mousedown",fD);bF(fC.scrollbarV,"mousedown",fD);bF(fC.wrapper,"scroll",function(){fC.wrapper.scrollTop=fC.wrapper.scrollLeft=0});var fw;function fA(){if(fw==null){fw=setTimeout(function(){fw=null;fC.cachedCharWidth=fC.cachedTextHeight=fC.cachedPaddingH=dX=null;fx.setSize()},100)}}bF(window,"resize",fA);function fz(){if(fo(document.body,fC.wrapper)){setTimeout(fz,5000)}else{dF(window,"resize",fA)}}setTimeout(fz,5000);bF(fC.input,"keyup",cE(fx,a2));bF(fC.input,"input",function(){if(dd&&!bR&&fx.display.inputHasSelection){fx.display.inputHasSelection=null}A(fx)});bF(fC.input,"keydown",cE(fx,p));bF(fC.input,"keypress",cE(fx,cg));bF(fC.input,"focus",ce(cj,fx));bF(fC.input,"blur",ce(aG,fx));function fy(fE){if(!aE(fx,fE)){dS(fE)}}if(fx.options.dragDrop){bF(fC.scroller,"dragstart",function(fE){P(fx,fE)});bF(fC.scroller,"dragenter",fy);bF(fC.scroller,"dragover",fy);bF(fC.scroller,"drop",cE(fx,a3))}bF(fC.scroller,"paste",function(fE){if(aV(fC,fE)){return}fx.state.pasteIncoming=true;d2(fx);A(fx)});bF(fC.input,"paste",function(){fx.state.pasteIncoming=true;A(fx)});function fB(fE){if(fC.inaccurateSelection){fC.prevInput="";fC.inaccurateSelection=false;fC.input.value=fx.getSelection();df(fC.input)}if(fE.type=="cut"){fx.state.cutIncoming=true}}bF(fC.input,"cut",fB);bF(fC.input,"copy",fB);if(aW){bF(fC.sizer,"mouseup",function(){if(dh()==fC.input){fC.input.blur()}d2(fx)})}}function aV(fx,fw){for(var fy=K(fw);fy!=fx.wrapper;fy=fy.parentNode){if(!fy||fy.ignoreEvents||fy.parentNode==fx.sizer&&fy!=fx.mover){return true}}}function b6(fG,fA,fx,fy){var fC=fG.display;if(!fx){var fB=K(fA);if(fB==fC.scrollbarH||fB==fC.scrollbarV||fB==fC.scrollbarFiller||fB==fC.gutterFiller){return null}}var fF,fD,fw=fC.lineSpace.getBoundingClientRect();try{fF=fA.clientX-fw.left;fD=fA.clientY-fw.top}catch(fA){return null}var fE=e9(fG,fF,fD),fH;if(fy&&fE.xRel==1&&(fH=eC(fG.doc,fE.line).text).length==fE.ch){var fz=bB(fH,fH.length,fG.options.tabSize)-fH.length;fE=T(fE.line,Math.round((fF-et(fG.display).left)/c9(fG.display))-fz)}return fE}function dU(fy){if(aE(this,fy)){return}var fw=this,fx=fw.display;fx.shift=fy.shiftKey;if(aV(fx,fy)){if(!cC){fx.scroller.draggable=false;setTimeout(function(){fx.scroller.draggable=true},100)}return}if(l(fw,fy)){return}var fz=b6(fw,fy);window.focus();switch(e8(fy)){case 1:if(fz){aq(fw,fy,fz)}else{if(K(fy)==fx.scroller){cn(fy)}}break;case 2:if(cC){fw.state.lastMiddleDown=+new Date}if(fz){fd(fw.doc,fz)}setTimeout(ce(d2,fw),20);cn(fy);break;case 3:if(fn){ar(fw,fy)}break}}var cV,cO;function aq(fw,fB,fC){setTimeout(ce(r,fw),0);var fx=+new Date,fy;if(cO&&cO.time>fx-400&&bY(cO.pos,fC)==0){fy="triple"}else{if(cV&&cV.time>fx-400&&bY(cV.pos,fC)==0){fy="double";cO={time:fx,pos:fC}}else{fy="single";cV={time:fx,pos:fC}}}var fz=fw.doc.sel,fA=bN?fB.metaKey:fB.ctrlKey;if(fw.options.dragDrop&&ed&&!fA&&!ae(fw)&&fy=="single"&&fz.contains(fC)>-1&&fz.somethingSelected()){aO(fw,fB,fC)}else{m(fw,fB,fC,fy,fA)}}function aO(fx,fz,fA){var fy=fx.display;var fw=cE(fx,function(fB){if(cC){fy.scroller.draggable=false}fx.state.draggingText=false;dF(document,"mouseup",fw);dF(fy.scroller,"drop",fw);if(Math.abs(fz.clientX-fB.clientX)+Math.abs(fz.clientY-fB.clientY)<10){cn(fB);fd(fx.doc,fA);d2(fx);if(ec&&!bR){setTimeout(function(){document.body.focus();d2(fx)},20)}}});if(cC){fy.scroller.draggable=true}fx.state.draggingText=fw;if(fy.scroller.dragDrop){fy.scroller.dragDrop()}bF(document,"mouseup",fw);bF(fy.scroller,"drop",fw)}function m(fz,fN,fy,fw,fB){var fK=fz.display,fP=fz.doc;cn(fN);var fx,fO,fA=fP.sel;if(fB){fO=fP.sel.contains(fy);if(fO>-1){fx=fP.sel.ranges[fO]}else{fx=new dr(fy,fy)}}else{fx=fP.sel.primary()}if(fN.altKey){fw="rect";if(!fB){fx=new dr(fy,fy)}fy=b6(fz,fN,true,true);fO=-1}else{if(fw=="double"){var fL=ao(fP,fy);if(fz.display.shift||fP.extend){fx=eS(fP,fx,fL.anchor,fL.head)}else{fx=fL}}else{if(fw=="triple"){var fE=new dr(T(fy.line,0),e4(fP,T(fy.line+1,0)));if(fz.display.shift||fP.extend){fx=eS(fP,fx,fE.anchor,fE.head)}else{fx=fE}}else{fx=eS(fP,fx,fy)}}}if(!fB){fO=0;bC(fP,new fh([fx],0),L)}else{if(fO>-1){f(fP,fO,fx,L)}else{fO=fP.sel.ranges.length;bC(fP,cf(fP.sel.ranges.concat([fx]),fO),{scroll:false,origin:"*mouse"})}}var fJ=fy;function fI(f0){if(bY(fJ,f0)==0){return}fJ=f0;if(fw=="rect"){var fR=[],fX=fz.options.tabSize;var fQ=bB(eC(fP,fy.line).text,fy.ch,fX);var f3=bB(eC(fP,f0.line).text,f0.ch,fX);var fS=Math.min(fQ,f3),f1=Math.max(fQ,f3);for(var f4=Math.min(fy.line,f0.line),fU=Math.min(fz.lastLine(),Math.max(fy.line,f0.line));f4<=fU;f4++){var f2=eC(fP,f4).text,fT=dR(f2,fS,fX);if(fS==f1){fR.push(new dr(T(f4,fT),T(f4,fT)))}else{if(f2.length>fT){fR.push(new dr(T(f4,fT),T(f4,dR(f2,f1,fX))))}}}if(!fR.length){fR.push(new dr(fy,fy))}bC(fP,cf(fA.ranges.slice(0,fO).concat(fR),fO),L)}else{var fY=fx;var fV=fY.anchor,fZ=f0;if(fw!="single"){if(fw=="double"){var fW=ao(fP,f0)}else{var fW=new dr(T(f0.line,0),e4(fP,T(f0.line+1,0)))}if(bY(fW.anchor,fV)>0){fZ=fW.head;fV=ak(fY.from(),fW.anchor)}else{fZ=fW.anchor;fV=bh(fY.to(),fW.head)}}var fR=fA.ranges.slice(0);fR[fO]=new dr(e4(fP,fV),fZ);bC(fP,cf(fR,fO),L)}}var fG=fK.wrapper.getBoundingClientRect();var fC=0;function fM(fS){var fQ=++fC;var fU=b6(fz,fS,true,fw=="rect");if(!fU){return}if(bY(fU,fJ)!=0){r(fz);fI(fU);var fT=bM(fK,fP);if(fU.line>=fT.to||fU.line<fT.from){setTimeout(cE(fz,function(){if(fC==fQ){fM(fS)}}),150)}}else{var fR=fS.clientY<fG.top?-20:fS.clientY>fG.bottom?20:0;if(fR){setTimeout(cE(fz,function(){if(fC!=fQ){return}fK.scroller.scrollTop+=fR;fM(fS)}),50)}}}function fF(fQ){fC=Infinity;cn(fQ);d2(fz);dF(document,"mousemove",fH);dF(document,"mouseup",fD);fP.history.lastSelOrigin=null}var fH=cE(fz,function(fQ){if((dd&&!bQ)?!fQ.buttons:!e8(fQ)){fF(fQ)}else{fM(fQ)}});var fD=cE(fz,fF);bF(document,"mousemove",fH);bF(document,"mouseup",fD)}function fu(fH,fD,fF,fG,fz){try{var fx=fD.clientX,fw=fD.clientY}catch(fD){return false}if(fx>=Math.floor(fH.display.gutters.getBoundingClientRect().right)){return false}if(fG){cn(fD)}var fE=fH.display;var fC=fE.lineDiv.getBoundingClientRect();if(fw>fC.bottom||!eF(fH,fF)){return bt(fD)}fw-=fC.top-fE.viewOffset;for(var fA=0;fA<fH.options.gutters.length;++fA){var fB=fE.gutters.childNodes[fA];if(fB&&fB.getBoundingClientRect().right>=fx){var fI=bo(fH.doc,fw);var fy=fH.options.gutters[fA];fz(fH,fF,fH,fI,fy,fD);return bt(fD)}}}function l(fw,fx){return fu(fw,fx,"gutterClick",true,Z)}var ab=0;function a3(fC){var fE=this;if(aE(fE,fC)||aV(fE.display,fC)){return}cn(fC);if(ec){ab=+new Date}var fD=b6(fE,fC,true),fw=fC.dataTransfer.files;if(!fD||ae(fE)){return}if(fw&&fw.length&&window.FileReader&&window.File){var fy=fw.length,fF=Array(fy),fx=0;var fA=function(fI,fH){var fG=new FileReader;fG.onload=function(){fF[fH]=fG.result;if(++fx==fy){fD=e4(fE.doc,fD);var fJ={from:fD,to:fD,text:aL(fF.join("\n")),origin:"paste"};a0(fE.doc,fJ);eu(fE.doc,eh(fD,cz(fJ)))}};fG.readAsText(fI)};for(var fB=0;fB<fy;++fB){fA(fw[fB],fB)}}else{if(fE.state.draggingText&&fE.doc.sel.contains(fD)>-1){fE.state.draggingText(fC);setTimeout(ce(d2,fE),20);return}try{var fF=fC.dataTransfer.getData("Text");if(fF){var fz=fE.state.draggingText&&fE.listSelections();dQ(fE.doc,eh(fD,fD));if(fz){for(var fB=0;fB<fz.length;++fB){aM(fE.doc,"",fz[fB].anchor,fz[fB].head,"drag")}}fE.replaceSelection(fF,"around","paste");d2(fE)}}catch(fC){}}}function P(fw,fy){if(ec&&(!fw.state.draggingText||+new Date-ab<100)){dS(fy);return}if(aE(fw,fy)||aV(fw.display,fy)){return}fy.dataTransfer.setData("Text",fw.getSelection());if(fy.dataTransfer.setDragImage&&!au){var fx=fg("img",null,null,"position: fixed; left: 0; top: 0;");fx.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(dv){fx.width=fx.height=1;fw.display.wrapper.appendChild(fx);fx._top=fx.offsetTop}fy.dataTransfer.setDragImage(fx,0,0);if(dv){fx.parentNode.removeChild(fx)}}}function M(fw,fx){if(Math.abs(fw.doc.scrollTop-fx)<2){return}fw.doc.scrollTop=fx;if(!b7){de(fw,{top:fx})}if(fw.display.scroller.scrollTop!=fx){fw.display.scroller.scrollTop=fx}if(fw.display.scrollbarV.scrollTop!=fx){fw.display.scrollbarV.scrollTop=fx}if(b7){de(fw)}dH(fw,100)}function bm(fw,fy,fx){if(fx?fy==fw.doc.scrollLeft:Math.abs(fw.doc.scrollLeft-fy)<2){return}fy=Math.min(fy,fw.display.scroller.scrollWidth-fw.display.scroller.clientWidth);fw.doc.scrollLeft=fy;d6(fw);if(fw.display.scroller.scrollLeft!=fy){fw.display.scroller.scrollLeft=fy}if(fw.display.scrollbarH.scrollLeft!=fy){fw.display.scrollbarH.scrollLeft=fy}}var eJ=0,bZ=null;if(dd){bZ=-0.53}else{if(b7){bZ=15}else{if(cN){bZ=-0.7}else{if(au){bZ=-1/3}}}}function c(fE,fy){var fH=fy.wheelDeltaX,fG=fy.wheelDeltaY;if(fH==null&&fy.detail&&fy.axis==fy.HORIZONTAL_AXIS){fH=fy.detail}if(fG==null&&fy.detail&&fy.axis==fy.VERTICAL_AXIS){fG=fy.detail}else{if(fG==null){fG=fy.wheelDelta}}var fA=fE.display,fD=fA.scroller;if(!(fH&&fD.scrollWidth>fD.clientWidth||fG&&fD.scrollHeight>fD.clientHeight)){return}if(fG&&bN&&cC){outer:for(var fF=fy.target,fC=fA.view;fF!=fD;fF=fF.parentNode){for(var fx=0;fx<fC.length;fx++){if(fC[fx].node==fF){fE.display.currentWheelTarget=fF;break outer}}}}if(fH&&!b7&&!dv&&bZ!=null){if(fG){M(fE,Math.max(0,Math.min(fD.scrollTop+fG*bZ,fD.scrollHeight-fD.clientHeight)))}bm(fE,Math.max(0,Math.min(fD.scrollLeft+fH*bZ,fD.scrollWidth-fD.clientWidth)));cn(fy);fA.wheelStartX=null;return}if(fG&&bZ!=null){var fw=fG*bZ;var fB=fE.doc.scrollTop,fz=fB+fA.wrapper.clientHeight;if(fw<0){fB=Math.max(0,fB+fw-50)}else{fz=Math.min(fE.doc.height,fz+fw+50)}de(fE,{top:fB,bottom:fz})}if(eJ<20){if(fA.wheelStartX==null){fA.wheelStartX=fD.scrollLeft;fA.wheelStartY=fD.scrollTop;fA.wheelDX=fH;fA.wheelDY=fG;setTimeout(function(){if(fA.wheelStartX==null){return}var fI=fD.scrollLeft-fA.wheelStartX;var fK=fD.scrollTop-fA.wheelStartY;var fJ=(fK&&fA.wheelDY&&fK/fA.wheelDY)||(fI&&fA.wheelDX&&fI/fA.wheelDX);fA.wheelStartX=fA.wheelStartY=null;if(!fJ){return}bZ=(bZ*eJ+fJ)/(eJ+1);++eJ},200)}else{fA.wheelDX+=fH;fA.wheelDY+=fG}}}function fb(fx,fA,fw){if(typeof fA=="string"){fA=d5[fA];if(!fA){return false}}if(fx.display.pollingFast&&b0(fx)){fx.display.pollingFast=false}var fz=fx.display.shift,fy=false;try{if(ae(fx)){fx.state.suppressEdits=true}if(fw){fx.display.shift=false}fy=fA(fx)!=bS}finally{fx.display.shift=fz;fx.state.suppressEdits=false}return fy}function c0(fw){var fx=fw.state.keyMaps.slice(0);if(fw.options.extraKeys){fx.push(fw.options.extraKeys)}fx.push(fw.options.keyMap);return fx}var al;function eG(fw,fC){var fx=fe(fw.options.keyMap),fA=fx.auto;clearTimeout(al);if(fA&&!d4(fC)){al=setTimeout(function(){if(fe(fw.options.keyMap)==fx){fw.options.keyMap=(fA.call?fA.call(null,fw):fA);ft(fw)}},50)}var fz=eO(fC,true),fB=false;if(!fz){return false}var fy=c0(fw);if(fC.shiftKey){fB=i("Shift-"+fz,fy,function(fD){return fb(fw,fD,true)})||i(fz,fy,function(fD){if(typeof fD=="string"?/^go[A-Z]/.test(fD):fD.motion){return fb(fw,fD)}})}else{fB=i(fz,fy,function(fD){return fb(fw,fD)})}if(fB){cn(fC);o(fw);Z(fw,"keyHandled",fw,fz,fC)}return fB}function dL(fw,fz,fx){var fy=i("'"+fx+"'",c0(fw),function(fA){return fb(fw,fA,true)});if(fy){cn(fz);o(fw);Z(fw,"keyHandled",fw,"'"+fx+"'",fz)}return fy}var cU=null;function p(fz){var fw=this;r(fw);if(aE(fw,fz)){return}if(ec&&fz.keyCode==27){fz.returnValue=false}var fx=fz.keyCode;fw.display.shift=fx==16||fz.shiftKey;var fy=eG(fw,fz);if(dv){cU=fy?fx:null;if(!fy&&fx==88&&!cL&&(bN?fz.metaKey:fz.ctrlKey)){fw.replaceSelection("",null,"cut")}}}function a2(fw){if(aE(this,fw)){return}if(fw.keyCode==16){this.doc.sel.shift=false}}function cg(fA){var fw=this;if(aE(fw,fA)){return}var fz=fA.keyCode,fx=fA.charCode;if(dv&&fz==cU){cU=null;cn(fA);return}if(((dv&&(!fA.which||fA.which<10))||aW)&&eG(fw,fA)){return}var fy=String.fromCharCode(fx==null?fz:fx);if(dL(fw,fA,fy)){return}if(dd&&!bR){fw.display.inputHasSelection=null}A(fw)}function cj(fw){if(fw.options.readOnly=="nocursor"){return}if(!fw.state.focused){av(fw,"focus",fw);fw.state.focused=true;if(fw.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1){fw.display.wrapper.className+=" CodeMirror-focused"}if(!fw.curOp){eM(fw);if(cC){setTimeout(ce(eM,fw,true),0)}}}a6(fw);o(fw)}function aG(fw){if(fw.state.focused){av(fw,"blur",fw);fw.state.focused=false;fw.display.wrapper.className=fw.display.wrapper.className.replace(" CodeMirror-focused","")}clearInterval(fw.display.blinker);setTimeout(function(){if(!fw.state.focused){fw.display.shift=false}},150)}var eX;function ar(fF,fA){if(aE(fF,fA,"contextmenu")){return}var fC=fF.display;if(aV(fC,fA)||cS(fF,fA)){return}var fE=b6(fF,fA),fw=fC.scroller.scrollTop;if(!fE||dv){return}var fy=fF.options.resetSelectionOnContextMenu;if(fy&&fF.doc.sel.contains(fE)==-1){cE(fF,bC)(fF.doc,eh(fE),V)}var fB=fC.input.style.cssText;fC.inputDiv.style.position="absolute";fC.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(fA.clientY-5)+"px; left: "+(fA.clientX-5)+"px; z-index: 1000; background: "+(dd?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";d2(fF);eM(fF);if(!fF.somethingSelected()){fC.input.value=fC.prevInput=" "}function fz(){if(fC.input.selectionStart!=null){var fG=fC.input.value="\u200b"+(fF.somethingSelected()?fC.input.value:"");fC.prevInput="\u200b";fC.input.selectionStart=1;fC.input.selectionEnd=fG.length}}function fD(){fC.inputDiv.style.position="relative";fC.input.style.cssText=fB;if(bR){fC.scrollbarV.scrollTop=fC.scroller.scrollTop=fw}a6(fF);if(fC.input.selectionStart!=null){if(!dd||bR){fz()}clearTimeout(eX);var fG=0,fH=function(){if(fC.prevInput=="\u200b"&&fC.input.selectionStart==0){cE(fF,d5.selectAll)(fF)}else{if(fG++<10){eX=setTimeout(fH,500)}else{eM(fF)}}};eX=setTimeout(fH,200)}}if(dd&&!bR){fz()}if(fn){dS(fA);var fx=function(){dF(window,"mouseup",fx);setTimeout(fD,20)};bF(window,"mouseup",fx)}else{setTimeout(fD,50)}}function cS(fw,fx){if(!eF(fw,"gutterContextMenu")){return false}return fu(fw,fx,"gutterContextMenu",false,av)}var cz=G.changeEnd=function(fw){if(!fw.text){return fw.to}return T(fw.from.line+fw.text.length-1,e2(fw.text).length+(fw.text.length==1?fw.from.ch:0))};function bH(fz,fy){if(bY(fz,fy.from)<0){return fz}if(bY(fz,fy.to)<=0){return cz(fy)}var fw=fz.line+fy.text.length-(fy.to.line-fy.from.line)-1,fx=fz.ch;if(fz.line==fy.to.line){fx+=cz(fy).ch-fy.to.ch}return T(fw,fx)}function eH(fz,fA){var fx=[];for(var fy=0;fy<fz.sel.ranges.length;fy++){var fw=fz.sel.ranges[fy];fx.push(new dr(bH(fw.anchor,fA),bH(fw.head,fA)))}return cf(fx,fz.sel.primIndex)}function be(fy,fx,fw){if(fy.line==fx.line){return T(fw.line,fy.ch-fx.ch+fw.ch)}else{return T(fw.line+(fy.line-fx.line),fy.ch)}}function aa(fG,fD,fx){var fy=[];var fw=T(fG.first,0),fH=fw;for(var fA=0;fA<fD.length;fA++){var fC=fD[fA];var fF=be(fC.from,fw,fH);var fE=be(cz(fC),fw,fH);fw=fC.to;fH=fE;if(fx=="around"){var fB=fG.sel.ranges[fA],fz=bY(fB.head,fB.anchor)<0;fy[fA]=new dr(fz?fE:fF,fz?fF:fE)}else{fy[fA]=new dr(fF,fF)}}return new fh(fy,fG.sel.primIndex)}function dk(fx,fz,fy){var fw={canceled:false,from:fz.from,to:fz.to,text:fz.text,origin:fz.origin,cancel:function(){this.canceled=true}};if(fy){fw.update=function(fD,fC,fB,fA){if(fD){this.from=e4(fx,fD)}if(fC){this.to=e4(fx,fC)}if(fB){this.text=fB}if(fA!==undefined){this.origin=fA}}}av(fx,"beforeChange",fx,fw);if(fx.cm){av(fx.cm,"beforeChange",fx.cm,fw)}if(fw.canceled){return null}return{from:fw.from,to:fw.to,text:fw.text,origin:fw.origin}}function a0(fz,fA,fy){if(fz.cm){if(!fz.cm.curOp){return cE(fz.cm,a0)(fz,fA,fy)}if(fz.cm.state.suppressEdits){return}}if(eF(fz,"beforeChange")||fz.cm&&eF(fz.cm,"beforeChange")){fA=dk(fz,fA,true);if(!fA){return}}var fx=fq&&!fy&&co(fz,fA.from,fA.to);if(fx){for(var fw=fx.length-1;fw>=0;--fw){J(fz,{from:fx[fw].from,to:fx[fw].to,text:fw?[""]:fA.text})}}else{J(fz,fA)}}function J(fy,fz){if(fz.text.length==1&&fz.text[0]==""&&bY(fz.from,fz.to)==0){return}var fx=eH(fy,fz);e7(fy,fz,fx,fy.cm?fy.cm.curOp.id:NaN);dG(fy,fz,fx,dM(fy,fz));var fw=[];dA(fy,function(fB,fA){if(!fA&&cT(fw,fB.history)==-1){da(fB.history,fz);fw.push(fB.history)}dG(fB,fz,null,dM(fB,fz))})}function bO(fH,fF,fJ){if(fH.cm&&fH.cm.state.suppressEdits){return}var fE=fH.history,fy,fA=fH.sel;var fw=fF=="undo"?fE.done:fE.undone,fI=fF=="undo"?fE.undone:fE.done;for(var fB=0;fB<fw.length;fB++){fy=fw[fB];if(fJ?fy.ranges&&!fy.equals(fH.sel):!fy.ranges){break}}if(fB==fw.length){return}fE.lastOrigin=fE.lastSelOrigin=null;for(;;){fy=fw.pop();if(fy.ranges){ct(fy,fI);if(fJ&&!fy.equals(fH.sel)){bC(fH,fy,{clearRedo:false});return}fA=fy}else{break}}var fD=[];ct(fA,fI);fI.push({changes:fD,generation:fE.generation});fE.generation=fy.generation||++fE.maxGeneration;var fz=eF(fH,"beforeChange")||fH.cm&&eF(fH.cm,"beforeChange");for(var fB=fy.changes.length-1;fB>=0;--fB){var fG=fy.changes[fB];fG.origin=fF;if(fz&&!dk(fH,fG,false)){fw.length=0;return}fD.push(c1(fH,fG));var fx=fB?eH(fH,fG,null):e2(fw);dG(fH,fG,fx,dC(fH,fG));if(fH.cm){e1(fH.cm)}var fC=[];dA(fH,function(fL,fK){if(!fK&&cT(fC,fL.history)==-1){da(fL.history,fG);fC.push(fL.history)}dG(fL,fG,null,dC(fL,fG))})}}function eK(fw,fx){fw.first+=fx;fw.sel=new fh(bA(fw.sel.ranges,function(fy){return new dr(T(fy.anchor.line+fx,fy.anchor.ch),T(fy.head.line+fx,fy.head.ch))}),fw.sel.primIndex);if(fw.cm){ac(fw.cm,fw.first,fw.first-fx,fx)}}function dG(fA,fB,fz,fx){if(fA.cm&&!fA.cm.curOp){return cE(fA.cm,dG)(fA,fB,fz,fx)}if(fB.to.line<fA.first){eK(fA,fB.text.length-1-(fB.to.line-fB.from.line));return}if(fB.from.line>fA.lastLine()){return}if(fB.from.line<fA.first){var fw=fB.text.length-1-(fA.first-fB.from.line);eK(fA,fw);fB={from:T(fA.first,0),to:T(fB.to.line+fw,fB.to.ch),text:[e2(fB.text)],origin:fB.origin}}var fy=fA.lastLine();if(fB.to.line>fy){fB={from:fB.from,to:T(fy,eC(fA,fy).text.length),text:[fB.text[0]],origin:fB.origin}}fB.removed=fi(fA,fB.from,fB.to);if(!fz){fz=eH(fA,fB,null)}if(fA.cm){az(fA.cm,fB,fx)}else{eV(fA,fB,fx)}dQ(fA,fz,V)}function az(fE,fA,fy){var fD=fE.doc,fz=fE.display,fB=fA.from,fC=fA.to;var fw=false,fx=fB.line;if(!fE.options.lineWrapping){fx=bv(y(eC(fD,fB.line)));fD.iter(fx,fC.line+1,function(fG){if(fG==fz.maxLine){fw=true;return true}})}if(fD.sel.contains(fA.from,fA.to)>-1){fE.curOp.cursorActivity=true}eV(fD,fA,fy,aY(fE));if(!fE.options.lineWrapping){fD.iter(fx,fB.line+fA.text.length,function(fH){var fG=dO(fH);if(fG>fz.maxLineLength){fz.maxLine=fH;fz.maxLineLength=fG;fz.maxLineChanged=true;fw=false}});if(fw){fE.curOp.updateMaxLine=true}}fD.frontier=Math.min(fD.frontier,fB.line);dH(fE,400);var fF=fA.text.length-(fC.line-fB.line)-1;if(fB.line==fC.line&&fA.text.length==1&&!dl(fE.doc,fA)){Q(fE,fB.line,"text")}else{ac(fE,fB.line,fC.line+1,fF)}if(eF(fE,"change")||eF(fE,"changes")){(fE.curOp.changeObjs||(fE.curOp.changeObjs=[])).push({from:fB,to:fC,text:fA.text,removed:fA.removed,origin:fA.origin})}}function aM(fz,fy,fB,fA,fw){if(!fA){fA=fB}if(bY(fA,fB)<0){var fx=fA;fA=fB;fB=fx}if(typeof fy=="string"){fy=aL(fy)}a0(fz,{from:fB,to:fA,text:fy,origin:fw})}function dz(fx,fA){var fB=fx.display,fy=fB.sizer.getBoundingClientRect(),fw=null;if(fA.top+fy.top<0){fw=true}else{if(fA.bottom+fy.top>(window.innerHeight||document.documentElement.clientHeight)){fw=false}}if(fw!=null&&!eR){var fz=fg("div","\u200b",null,"position: absolute; top: "+(fA.top-fB.viewOffset-ev(fx.display))+"px; height: "+(fA.bottom-fA.top+a4)+"px; left: "+fA.left+"px; width: 2px;");fx.display.lineSpace.appendChild(fz);fz.scrollIntoView(fw);fx.display.lineSpace.removeChild(fz)}}function C(fF,fD,fA,fz){if(fz==null){fz=0}for(;;){var fB=false,fE=dm(fF,fD);var fw=!fA||fA==fD?fE:dm(fF,fA);var fy=F(fF,Math.min(fE.left,fw.left),Math.min(fE.top,fw.top)-fz,Math.max(fE.left,fw.left),Math.max(fE.bottom,fw.bottom)+fz);var fC=fF.doc.scrollTop,fx=fF.doc.scrollLeft;if(fy.scrollTop!=null){M(fF,fy.scrollTop);if(Math.abs(fF.doc.scrollTop-fC)>1){fB=true}}if(fy.scrollLeft!=null){bm(fF,fy.scrollLeft);if(Math.abs(fF.doc.scrollLeft-fx)>1){fB=true}}if(!fB){return fE}}}function D(fw,fy,fA,fx,fz){var fB=F(fw,fy,fA,fx,fz);if(fB.scrollTop!=null){M(fw,fB.scrollTop)}if(fB.scrollLeft!=null){bm(fw,fB.scrollLeft)}}function F(fC,fK,fz,fJ,fy){var fH=fC.display,fG=aI(fC.display);if(fz<0){fz=0}var fF=fC.curOp&&fC.curOp.scrollTop!=null?fC.curOp.scrollTop:fH.scroller.scrollTop;var fx=fH.scroller.clientHeight-a4,fE={};var fM=fC.doc.height+bq(fH);var fN=fz<fG,fI=fy>fM-fG;if(fz<fF){fE.scrollTop=fN?0:fz}else{if(fy>fF+fx){var fD=Math.min(fz,(fI?fM:fy)-fx);if(fD!=fF){fE.scrollTop=fD}}}var fw=fC.curOp&&fC.curOp.scrollLeft!=null?fC.curOp.scrollLeft:fH.scroller.scrollLeft;var fB=fH.scroller.clientWidth-a4;fK+=fH.gutters.offsetWidth;fJ+=fH.gutters.offsetWidth;var fA=fH.gutters.offsetWidth;var fL=fK<fA+10;if(fK<fw+fA||fL){if(fL){fK=0}fE.scrollLeft=Math.max(0,fK-10-fA)}else{if(fJ>fB+fw-3){fE.scrollLeft=fJ+10-fB}}return fE}function cr(fw,fy,fx){if(fy!=null||fx!=null){eZ(fw)}if(fy!=null){fw.curOp.scrollLeft=(fw.curOp.scrollLeft==null?fw.doc.scrollLeft:fw.curOp.scrollLeft)+fy}if(fx!=null){fw.curOp.scrollTop=(fw.curOp.scrollTop==null?fw.doc.scrollTop:fw.curOp.scrollTop)+fx}}function e1(fw){eZ(fw);var fx=fw.getCursor(),fz=fx,fy=fx;if(!fw.options.lineWrapping){fz=fx.ch?T(fx.line,fx.ch-1):fx;fy=T(fx.line,fx.ch+1)}fw.curOp.scrollToPos={from:fz,to:fy,margin:fw.options.cursorScrollMargin,isCursor:true}}function eZ(fw){var fy=fw.curOp.scrollToPos;if(fy){fw.curOp.scrollToPos=null;var fA=dc(fw,fy.from),fz=dc(fw,fy.to);var fx=F(fw,Math.min(fA.left,fz.left),Math.min(fA.top,fz.top)-fy.margin,Math.max(fA.right,fz.right),Math.max(fA.bottom,fz.bottom)+fy.margin);fw.scrollTo(fx.scrollLeft,fx.scrollTop)}}function Y(fJ,fz,fI,fy){var fH=fJ.doc,fx;if(fI==null){fI="add"}if(fI=="smart"){if(!fJ.doc.mode.indent){fI="prev"}else{fx=c7(fJ,fz)}}var fD=fJ.options.tabSize;var fK=eC(fH,fz),fC=bB(fK.text,null,fD);if(fK.stateAfter){fK.stateAfter=null}var fw=fK.text.match(/^\s*/)[0],fF;if(!fy&&!/\S/.test(fK.text)){fF=0;fI="not"}else{if(fI=="smart"){fF=fJ.doc.mode.indent(fx,fK.text.slice(fw.length),fK.text);if(fF==bS){if(!fy){return}fI="prev"}}}if(fI=="prev"){if(fz>fH.first){fF=bB(eC(fH,fz-1).text,null,fD)}else{fF=0}}else{if(fI=="add"){fF=fC+fJ.options.indentUnit}else{if(fI=="subtract"){fF=fC-fJ.options.indentUnit}else{if(typeof fI=="number"){fF=fC+fI}}}}fF=Math.max(0,fF);var fG="",fE=0;if(fJ.options.indentWithTabs){for(var fA=Math.floor(fF/fD);fA;--fA){fE+=fD;fG+="\t"}}if(fE<fF){fG+=b8(fF-fE)}if(fG!=fw){aM(fJ.doc,fG,T(fz,0),T(fz,fw.length),"+input")}else{for(var fA=0;fA<fH.sel.ranges.length;fA++){var fB=fH.sel.ranges[fA];if(fB.head.line==fz&&fB.head.ch<fw.length){var fE=T(fz,fw.length);f(fH,fA,new dr(fE,fE));break}}}fK.stateAfter=null}function d0(fx,fz,fw,fC){var fB=fz,fy=fz,fA=fx.doc;if(typeof fz=="number"){fy=eC(fA,cG(fA,fz))}else{fB=bv(fz)}if(fB==null){return null}if(fC(fy,fB)){Q(fx,fB,fw)}else{return null}return fy}function en(fw,fC){var fx=fw.doc.sel.ranges,fA=[];for(var fz=0;fz<fx.length;fz++){var fy=fC(fx[fz]);while(fA.length&&bY(fy.from,e2(fA).to)<=0){var fB=fA.pop();if(bY(fB.from,fy.from)<0){fy.from=fB.from;break}}fA.push(fy)}cs(fw,function(){for(var fD=fA.length-1;fD>=0;fD--){aM(fw.doc,"",fA[fD].from,fA[fD].to,"+delete")}e1(fw)})}function bg(fN,fz,fH,fG,fB){var fE=fz.line,fF=fz.ch,fM=fH;var fw=eC(fN,fE);var fK=true;function fL(){var fO=fE+fH;if(fO<fN.first||fO>=fN.first+fN.size){return(fK=false)}fE=fO;return fw=eC(fN,fO)}function fJ(fP){var fO=(fB?u:ad)(fw,fF,fH,true);if(fO==null){if(!fP&&fL()){if(fB){fF=(fH<0?cx:cm)(fw)}else{fF=fH<0?fw.text.length:0}}else{return(fK=false)}}else{fF=fO}return true}if(fG=="char"){fJ()}else{if(fG=="column"){fJ(true)}else{if(fG=="word"||fG=="group"){var fI=null,fC=fG=="group";for(var fA=true;;fA=false){if(fH<0&&!fJ(!fA)){break}var fx=fw.text.charAt(fF)||"\n";var fy=ci(fx)?"w":fC&&fx=="\n"?"n":!fC||/\s/.test(fx)?null:"p";if(fC&&!fA&&!fy){fy="s"}if(fI&&fI!=fy){if(fH<0){fH=1;fJ()}break}if(fy){fI=fy}if(fH>0&&!fJ(!fA)){break}}}}}var fD=bD(fN,T(fE,fF),fM,true);if(!fK){fD.hitSide=true}return fD}function ba(fE,fz,fw,fD){var fC=fE.doc,fB=fz.left,fA;if(fD=="page"){var fy=Math.min(fE.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);fA=fz.top+fw*(fy-(fw<0?1.5:0.5)*aI(fE.display))}else{if(fD=="line"){fA=fw>0?fz.bottom+3:fz.top-3}}for(;;){var fx=e9(fE,fB,fA);if(!fx.outside){break}if(fw<0?fA<=0:fA>=fC.height){fx.hitSide=true;break}fA+=fw*5}return fx}function ao(fA,fC){var fz=eC(fA,fC.line).text;var fB=fC.ch,fy=fC.ch;if(fz){if((fC.xRel<0||fy==fz.length)&&fB){--fB}else{++fy}var fx=fz.charAt(fB);var fw=ci(fx)?ci:/\s/.test(fx)?function(fD){return/\s/.test(fD)}:function(fD){return !/\s/.test(fD)&&!ci(fD)};while(fB>0&&fw(fz.charAt(fB-1))){--fB}while(fy<fz.length&&fw(fz.charAt(fy))){++fy}}return new dr(T(fC.line,fB),T(fC.line,fy))}G.prototype={constructor:G,focus:function(){window.focus();d2(this);A(this)},setOption:function(fy,fz){var fx=this.options,fw=fx[fy];if(fx[fy]==fz&&fy!="mode"){return}fx[fy]=fz;if(aZ.hasOwnProperty(fy)){cE(this,aZ[fy])(this,fz,fw)}},getOption:function(fw){return this.options[fw]},getDoc:function(){return this.doc},addKeyMap:function(fx,fw){this.state.keyMaps[fw?"push":"unshift"](fx)},removeKeyMap:function(fx){var fy=this.state.keyMaps;for(var fw=0;fw<fy.length;++fw){if(fy[fw]==fx||(typeof fy[fw]!="string"&&fy[fw].name==fx)){fy.splice(fw,1);return true}}},addOverlay:cJ(function(fw,fx){var fy=fw.token?fw:G.getMode(this.options,fw);if(fy.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:fy,modeSpec:fw,opaque:fx&&fx.opaque});this.state.modeGen++;ac(this)}),removeOverlay:cJ(function(fw){var fy=this.state.overlays;for(var fx=0;fx<fy.length;++fx){var fz=fy[fx].modeSpec;if(fz==fw||typeof fw=="string"&&fz.name==fw){fy.splice(fx,1);this.state.modeGen++;ac(this);return}}}),indentLine:cJ(function(fy,fw,fx){if(typeof fw!="string"&&typeof fw!="number"){if(fw==null){fw=this.options.smartIndent?"smart":"prev"}else{fw=fw?"add":"subtract"}}if(bP(this.doc,fy)){Y(this,fy,fw,fx)}}),indentSelection:cJ(function(fB){var fx=this.doc.sel.ranges,fw=-1;for(var fA=0;fA<fx.length;fA++){var fy=fx[fA];if(!fy.empty()){var fD=Math.max(fw,fy.from().line);var fC=fy.to();fw=Math.min(this.lastLine(),fC.line-(fC.ch?0:1))+1;for(var fz=fD;fz<fw;++fz){Y(this,fz,fB)}}else{if(fy.head.line>fw){Y(this,fy.head.line,fB,true);fw=fy.head.line;if(fA==this.doc.sel.primIndex){e1(this)}}}}}),getTokenAt:function(fD,fx){var fA=this.doc;fD=e4(fA,fD);var fz=c7(this,fD.line,fx),fC=this.doc.mode;var fw=eC(fA,fD.line);var fB=new ej(fw.text,this.options.tabSize);while(fB.pos<fD.ch&&!fB.eol()){fB.start=fB.pos;var fy=fC.token(fB,fz)}return{start:fB.start,end:fB.pos,string:fB.current(),type:fy||null,state:fz}},getTokenTypeAt:function(fB){fB=e4(this.doc,fB);var fy=cI(this,eC(this.doc,fB.line));var fz=0,fA=(fy.length-1)/2,fx=fB.ch;if(fx==0){return fy[2]}for(;;){var fw=(fz+fA)>>1;if((fw?fy[fw*2-1]:0)>=fx){fA=fw}else{if(fy[fw*2+1]<fx){fz=fw+1}else{return fy[fw*2+2]}}}},getModeAt:function(fx){var fw=this.doc.mode;if(!fw.innerMode){return fw}return G.innerMode(fw,this.getTokenAt(fx).state).mode},getHelper:function(fx,fw){return this.getHelpers(fx,fw)[0]},getHelpers:function(fD,fy){var fz=[];if(!eL.hasOwnProperty(fy)){return eL}var fw=eL[fy],fC=this.getModeAt(fD);if(typeof fC[fy]=="string"){if(fw[fC[fy]]){fz.push(fw[fC[fy]])}}else{if(fC[fy]){for(var fx=0;fx<fC[fy].length;fx++){var fB=fw[fC[fy][fx]];if(fB){fz.push(fB)}}}else{if(fC.helperType&&fw[fC.helperType]){fz.push(fw[fC.helperType])}else{if(fw[fC.name]){fz.push(fw[fC.name])}}}}for(var fx=0;fx<fw._global.length;fx++){var fA=fw._global[fx];if(fA.pred(fC,this)&&cT(fz,fA.val)==-1){fz.push(fA.val)}}return fz},getStateAfter:function(fx,fw){var fy=this.doc;fx=cG(fy,fx==null?fy.first+fy.size-1:fx);return c7(this,fx+1,fw)},cursorCoords:function(fz,fx){var fy,fw=this.doc.sel.primary();if(fz==null){fy=fw.head}else{if(typeof fz=="object"){fy=e4(this.doc,fz)}else{fy=fz?fw.from():fw.to()}}return dm(this,fy,fx||"page")},charCoords:function(fx,fw){return cq(this,e4(this.doc,fx),fw||"page")},coordsChar:function(fw,fx){fw=fs(this,fw,fx||"page");return e9(this,fw.left,fw.top)},lineAtHeight:function(fw,fx){fw=fs(this,{top:fw,left:0},fx||"page").top;return bo(this.doc,fw+this.display.viewOffset)},heightAtLine:function(fx,fA){var fw=false,fz=this.doc.first+this.doc.size-1;if(fx<this.doc.first){fx=this.doc.first}else{if(fx>fz){fx=fz;fw=true}}var fy=eC(this.doc,fx);return eg(this,fy,{top:0,left:0},fA||"page").top+(fw?this.doc.height-bu(fy):0)},defaultTextHeight:function(){return aI(this.display)},defaultCharWidth:function(){return c9(this.display)},setGutterMarker:cJ(function(fw,fx,fy){return d0(this,fw,"gutter",function(fz){var fA=fz.gutterMarkers||(fz.gutterMarkers={});fA[fx]=fy;if(!fy&&ek(fA)){fz.gutterMarkers=null}return true})}),clearGutter:cJ(function(fy){var fw=this,fz=fw.doc,fx=fz.first;fz.iter(function(fA){if(fA.gutterMarkers&&fA.gutterMarkers[fy]){fA.gutterMarkers[fy]=null;Q(fw,fx,"gutter");if(ek(fA.gutterMarkers)){fA.gutterMarkers=null}}++fx})}),addLineClass:cJ(function(fy,fx,fw){return d0(this,fy,"class",function(fz){var fA=fx=="text"?"textClass":fx=="background"?"bgClass":"wrapClass";if(!fz[fA]){fz[fA]=fw}else{if(new RegExp("(?:^|\\s)"+fw+"(?:$|\\s)").test(fz[fA])){return false}else{fz[fA]+=" "+fw}}return true})}),removeLineClass:cJ(function(fy,fx,fw){return d0(this,fy,"class",function(fA){var fD=fx=="text"?"textClass":fx=="background"?"bgClass":"wrapClass";var fC=fA[fD];if(!fC){return false}else{if(fw==null){fA[fD]=null}else{var fB=fC.match(new RegExp("(?:^|\\s+)"+fw+"(?:$|\\s+)"));if(!fB){return false}var fz=fB.index+fB[0].length;fA[fD]=fC.slice(0,fB.index)+(!fB.index||fz==fC.length?"":" ")+fC.slice(fz)||null}}return true})}),addLineWidget:cJ(function(fy,fx,fw){return bp(this,fy,fx,fw)}),removeLineWidget:function(fw){fw.clear()},lineInfo:function(fw){if(typeof fw=="number"){if(!bP(this.doc,fw)){return null}var fx=fw;fw=eC(this.doc,fw);if(!fw){return null}}else{var fx=bv(fw);if(fx==null){return null}}return{line:fx,handle:fw,text:fw.text,gutterMarkers:fw.gutterMarkers,textClass:fw.textClass,bgClass:fw.bgClass,wrapClass:fw.wrapClass,widgets:fw.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(fB,fy,fD,fz,fF){var fA=this.display;fB=dm(this,e4(this.doc,fB));var fC=fB.bottom,fx=fB.left;fy.style.position="absolute";fA.sizer.appendChild(fy);if(fz=="over"){fC=fB.top}else{if(fz=="above"||fz=="near"){var fw=Math.max(fA.wrapper.clientHeight,this.doc.height),fE=Math.max(fA.sizer.clientWidth,fA.lineSpace.clientWidth);if((fz=="above"||fB.bottom+fy.offsetHeight>fw)&&fB.top>fy.offsetHeight){fC=fB.top-fy.offsetHeight}else{if(fB.bottom+fy.offsetHeight<=fw){fC=fB.bottom}}if(fx+fy.offsetWidth>fE){fx=fE-fy.offsetWidth}}}fy.style.top=fC+"px";fy.style.left=fy.style.right="";if(fF=="right"){fx=fA.sizer.clientWidth-fy.offsetWidth;fy.style.right="0px"}else{if(fF=="left"){fx=0}else{if(fF=="middle"){fx=(fA.sizer.clientWidth-fy.offsetWidth)/2}}fy.style.left=fx+"px"}if(fD){D(this,fx,fC,fx+fy.offsetWidth,fC+fy.offsetHeight)}},triggerOnKeyDown:cJ(p),triggerOnKeyPress:cJ(cg),triggerOnKeyUp:cJ(a2),execCommand:function(fw){if(d5.hasOwnProperty(fw)){return d5[fw](this)}},findPosH:function(fC,fz,fA,fx){var fw=1;if(fz<0){fw=-1;fz=-fz}for(var fy=0,fB=e4(this.doc,fC);fy<fz;++fy){fB=bg(this.doc,fB,fw,fA,fx);if(fB.hitSide){break}}return fB},moveH:cJ(function(fx,fy){var fw=this;fw.extendSelectionsBy(function(fz){if(fw.display.shift||fw.doc.extend||fz.empty()){return bg(fw.doc,fz.head,fx,fy,fw.options.rtlMoveVisually)}else{return fx<0?fz.from():fz.to()}},cy)}),deleteH:cJ(function(fw,fx){var fy=this.doc.sel,fz=this.doc;if(fy.somethingSelected()){fz.replaceSelection("",null,"+delete")}else{en(this,function(fB){var fA=bg(fz,fB.head,fw,fx,false);return fw<0?{from:fA,to:fB.head}:{from:fB.head,to:fA}})}}),findPosV:function(fB,fy,fC,fE){var fw=1,fA=fE;if(fy<0){fw=-1;fy=-fy}for(var fx=0,fD=e4(this.doc,fB);fx<fy;++fx){var fz=dm(this,fD,"div");if(fA==null){fA=fz.left}else{fz.left=fA}fD=ba(this,fz,fw,fC);if(fD.hitSide){break}}return fD},moveV:cJ(function(fx,fz){var fw=this,fB=this.doc,fA=[];var fC=!fw.display.shift&&!fB.extend&&fB.sel.somethingSelected();fB.extendSelectionsBy(function(fD){if(fC){return fx<0?fD.from():fD.to()}var fF=dm(fw,fD.head,"div");if(fD.goalColumn!=null){fF.left=fD.goalColumn}fA.push(fF.left);var fE=ba(fw,fF,fx,fz);if(fz=="page"&&fD==fB.sel.primary()){cr(fw,null,cq(fw,fE,"div").top-fF.top)}return fE},cy);if(fA.length){for(var fy=0;fy<fB.sel.ranges.length;fy++){fB.sel.ranges[fy].goalColumn=fA[fy]}}}),toggleOverwrite:function(fw){if(fw!=null&&fw==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){this.display.cursorDiv.className+=" CodeMirror-overwrite"}else{this.display.cursorDiv.className=this.display.cursorDiv.className.replace(" CodeMirror-overwrite","")}av(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return dh()==this.display.input},scrollTo:cJ(function(fw,fx){if(fw!=null||fx!=null){eZ(this)}if(fw!=null){this.curOp.scrollLeft=fw}if(fx!=null){this.curOp.scrollTop=fx}}),getScrollInfo:function(){var fw=this.display.scroller,fx=a4;return{left:fw.scrollLeft,top:fw.scrollTop,height:fw.scrollHeight-fx,width:fw.scrollWidth-fx,clientHeight:fw.clientHeight-fx,clientWidth:fw.clientWidth-fx}},scrollIntoView:cJ(function(fx,fy){if(fx==null){fx={from:this.doc.sel.primary().head,to:null};if(fy==null){fy=this.options.cursorScrollMargin}}else{if(typeof fx=="number"){fx={from:T(fx,0),to:null}}else{if(fx.from==null){fx={from:fx,to:null}}}}if(!fx.to){fx.to=fx.from}fx.margin=fy||0;if(fx.from.line!=null){eZ(this);this.curOp.scrollToPos=fx}else{var fw=F(this,Math.min(fx.from.left,fx.to.left),Math.min(fx.from.top,fx.to.top)-fx.margin,Math.max(fx.from.right,fx.to.right),Math.max(fx.from.bottom,fx.to.bottom)+fx.margin);this.scrollTo(fw.scrollLeft,fw.scrollTop)}}),setSize:cJ(function(fy,fw){function fx(fz){return typeof fz=="number"||/^\d+$/.test(String(fz))?fz+"px":fz}if(fy!=null){this.display.wrapper.style.width=fx(fy)}if(fw!=null){this.display.wrapper.style.height=fx(fw)}if(this.options.lineWrapping){aB(this)}this.curOp.forceUpdate=true;av(this,"refresh",this)}),operation:function(fw){return cs(this,fw)},refresh:cJ(function(){var fw=this.display.cachedTextHeight;ac(this);af(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);if(fw==null||Math.abs(fw-aI(this.display))>0.5){U(this)}av(this,"refresh",this)}),swapDoc:cJ(function(fx){var fw=this.doc;fw.cm=null;dD(this,fx);af(this);eM(this);this.scrollTo(fx.scrollLeft,fx.scrollTop);Z(this,"swapDoc",this,fw);return fw}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bi(G);var es=G.defaults={};var aZ=G.optionHandlers={};function s(fw,fz,fy,fx){G.defaults[fw]=fz;if(fy){aZ[fw]=fx?function(fA,fC,fB){if(fB!=bV){fy(fA,fC,fB)}}:fy}}var bV=G.Init={toString:function(){return"CodeMirror.Init"}};s("value","",function(fw,fx){fw.setValue(fx)},true);s("mode",null,function(fw,fx){fw.doc.modeOption=fx;bb(fw)},true);s("indentUnit",2,bb,true);s("indentWithTabs",false);s("smartIndent",true);s("tabSize",4,function(fw){dN(fw);af(fw);ac(fw)},true);s("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(fw,fx){fw.options.specialChars=new RegExp(fx.source+(fx.test("\t")?"":"|\t"),"g");fw.refresh()},true);s("specialCharPlaceholder",eA,function(fw){fw.refresh()},true);s("electricChars",true);s("rtlMoveVisually",!aC);s("wholeLineUpdateBefore",true);s("theme","default",function(fw){cu(fw);c2(fw)},true);s("keyMap","default",ft);s("extraKeys",null);s("lineWrapping",false,d8,true);s("gutters",[],function(fw){bX(fw.options);c2(fw)},true);s("fixedGutter",true,function(fw,fx){fw.display.gutters.style.left=fx?dq(fw.display)+"px":"0";fw.refresh()},true);s("coverGutterNextToScrollbar",false,eo,true);s("lineNumbers",false,function(fw){bX(fw.options);c2(fw)},true);s("firstLineNumber",1,c2,true);s("lineNumberFormatter",function(fw){return fw},c2,true);s("showCursorWhenSelecting",false,bl,true);s("resetSelectionOnContextMenu",true);s("readOnly",false,function(fw,fx){if(fx=="nocursor"){aG(fw);fw.display.input.blur();fw.display.disabled=true}else{fw.display.disabled=false;if(!fx){eM(fw)}}});s("disableInput",false,function(fw,fx){if(!fx){eM(fw)}},true);s("dragDrop",true);s("cursorBlinkRate",530);s("cursorScrollMargin",0);s("cursorHeight",1);s("workTime",100);s("workDelay",100);s("flattenSpans",true,dN,true);s("addModeClass",false,dN,true);s("pollInterval",100);s("undoDepth",200,function(fw,fx){fw.doc.history.undoDepth=fx});s("historyEventDelay",1250);s("viewportMargin",10,function(fw){fw.refresh()},true);s("maxHighlightLength",10000,dN,true);s("moveInputWithCursor",true,function(fw,fx){if(!fx){fw.display.inputDiv.style.top=fw.display.inputDiv.style.left=0}});s("tabindex",null,function(fw,fx){fw.display.input.tabIndex=fx||""});s("autofocus",null);var cZ=G.modes={},aF=G.mimeModes={};G.defineMode=function(fw,fy){if(!G.defaults.mode&&fw!="null"){G.defaults.mode=fw}if(arguments.length>2){fy.dependencies=[];for(var fx=2;fx<arguments.length;++fx){fy.dependencies.push(arguments[fx])}}cZ[fw]=fy};G.defineMIME=function(fx,fw){aF[fx]=fw};G.resolveMode=function(fw){if(typeof fw=="string"&&aF.hasOwnProperty(fw)){fw=aF[fw]}else{if(fw&&typeof fw.name=="string"&&aF.hasOwnProperty(fw.name)){var fx=aF[fw.name];if(typeof fx=="string"){fx={name:fx}}fw=b3(fx,fw);fw.name=fx.name}else{if(typeof fw=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(fw)){return G.resolveMode("application/xml")}}}if(typeof fw=="string"){return{name:fw}}else{return fw||{name:"null"}}};G.getMode=function(fx,fw){var fw=G.resolveMode(fw);var fz=cZ[fw.name];if(!fz){return G.getMode(fx,"text/plain")}var fA=fz(fx,fw);if(cW.hasOwnProperty(fw.name)){var fy=cW[fw.name];for(var fB in fy){if(!fy.hasOwnProperty(fB)){continue}if(fA.hasOwnProperty(fB)){fA["_"+fB]=fA[fB]}fA[fB]=fy[fB]}}fA.name=fw.name;if(fw.helperType){fA.helperType=fw.helperType}if(fw.modeProps){for(var fB in fw.modeProps){fA[fB]=fw.modeProps[fB]}}return fA};G.defineMode("null",function(){return{token:function(fw){fw.skipToEnd()}}});G.defineMIME("text/plain","null");var cW=G.modeExtensions={};G.extendMode=function(fy,fx){var fw=cW.hasOwnProperty(fy)?cW[fy]:(cW[fy]={});aA(fx,fw)};G.defineExtension=function(fw,fx){G.prototype[fw]=fx};G.defineDocExtension=function(fw,fx){an.prototype[fw]=fx};G.defineOption=s;var aT=[];G.defineInitHook=function(fw){aT.push(fw)};var eL=G.helpers={};G.registerHelper=function(fx,fw,fy){if(!eL.hasOwnProperty(fx)){eL[fx]=G[fx]={_global:[]}}eL[fx][fw]=fy};G.registerGlobalHelper=function(fy,fx,fw,fz){G.registerHelper(fy,fx,fz);eL[fy]._global.push({pred:fw,val:fz})};var bK=G.copyState=function(fz,fw){if(fw===true){return fw}if(fz.copyState){return fz.copyState(fw)}var fy={};for(var fA in fw){var fx=fw[fA];if(fx instanceof Array){fx=fx.concat([])}fy[fA]=fx}return fy};var bI=G.startState=function(fy,fx,fw){return fy.startState?fy.startState(fx,fw):true};G.innerMode=function(fy,fw){while(fy.innerMode){var fx=fy.innerMode(fw);if(!fx||fx.mode==fy){break}fw=fx.state;fy=fx.mode}return fx||{mode:fy,state:fw}};var d5=G.commands={selectAll:function(fw){fw.setSelection(T(fw.firstLine(),0),T(fw.lastLine()),V)},singleSelection:function(fw){fw.setSelection(fw.getCursor("anchor"),fw.getCursor("head"),V)},killLine:function(fw){en(fw,function(fy){if(fy.empty()){var fx=eC(fw.doc,fy.head.line).text.length;if(fy.head.ch==fx&&fy.head.line<fw.lastLine()){return{from:fy.head,to:T(fy.head.line+1,0)}}else{return{from:fy.head,to:T(fy.head.line,fx)}}}else{return{from:fy.from(),to:fy.to()}}})},deleteLine:function(fw){en(fw,function(fx){return{from:T(fx.from().line,0),to:e4(fw.doc,T(fx.to().line+1,0))}})},delLineLeft:function(fw){en(fw,function(fx){return{from:T(fx.from().line,0),to:fx.from()}})},undo:function(fw){fw.undo()},redo:function(fw){fw.redo()},undoSelection:function(fw){fw.undoSelection()},redoSelection:function(fw){fw.redoSelection()},goDocStart:function(fw){fw.extendSelection(T(fw.firstLine(),0))},goDocEnd:function(fw){fw.extendSelection(T(fw.lastLine()))},goLineStart:function(fw){fw.extendSelectionsBy(function(fx){return bd(fw,fx.head.line)},cy)},goLineStartSmart:function(fw){fw.extendSelectionsBy(function(fz){var fC=bd(fw,fz.head.line);var fy=fw.getLineHandle(fC.line);var fx=a(fy);if(!fx||fx[0].level==0){var fB=Math.max(0,fy.text.search(/\S/));var fA=fz.head.line==fC.line&&fz.head.ch<=fB&&fz.head.ch;return T(fC.line,fA?0:fB)}return fC},cy)},goLineEnd:function(fw){fw.extendSelectionsBy(function(fx){return di(fw,fx.head.line)},cy)},goLineRight:function(fw){fw.extendSelectionsBy(function(fx){var fy=fw.charCoords(fx.head,"div").top+5;return fw.coordsChar({left:fw.display.lineDiv.offsetWidth+100,top:fy},"div")},cy)},goLineLeft:function(fw){fw.extendSelectionsBy(function(fx){var fy=fw.charCoords(fx.head,"div").top+5;return fw.coordsChar({left:0,top:fy},"div")},cy)},goLineUp:function(fw){fw.moveV(-1,"line")},goLineDown:function(fw){fw.moveV(1,"line")},goPageUp:function(fw){fw.moveV(-1,"page")},goPageDown:function(fw){fw.moveV(1,"page")},goCharLeft:function(fw){fw.moveH(-1,"char")},goCharRight:function(fw){fw.moveH(1,"char")},goColumnLeft:function(fw){fw.moveH(-1,"column")},goColumnRight:function(fw){fw.moveH(1,"column")},goWordLeft:function(fw){fw.moveH(-1,"word")},goGroupRight:function(fw){fw.moveH(1,"group")},goGroupLeft:function(fw){fw.moveH(-1,"group")},goWordRight:function(fw){fw.moveH(1,"word")},delCharBefore:function(fw){fw.deleteH(-1,"char")},delCharAfter:function(fw){fw.deleteH(1,"char")},delWordBefore:function(fw){fw.deleteH(-1,"word")},delWordAfter:function(fw){fw.deleteH(1,"word")},delGroupBefore:function(fw){fw.deleteH(-1,"group")},delGroupAfter:function(fw){fw.deleteH(1,"group")},indentAuto:function(fw){fw.indentSelection("smart")},indentMore:function(fw){fw.indentSelection("add")},indentLess:function(fw){fw.indentSelection("subtract")},insertTab:function(fw){fw.replaceSelection("\t")},defaultTab:function(fw){if(fw.somethingSelected()){fw.indentSelection("add")}else{fw.execCommand("insertTab")}},transposeChars:function(fw){cs(fw,function(){var fy=fw.listSelections();for(var fz=0;fz<fy.length;fz++){var fA=fy[fz].head,fx=eC(fw.doc,fA.line).text;if(fA.ch>0&&fA.ch<fx.length-1){fw.replaceRange(fx.charAt(fA.ch)+fx.charAt(fA.ch-1),T(fA.line,fA.ch-1),T(fA.line,fA.ch+1))}}})},newlineAndIndent:function(fw){cs(fw,function(){var fx=fw.listSelections().length;for(var fz=0;fz<fx;fz++){var fy=fw.listSelections()[fz];fw.replaceRange("\n",fy.anchor,fy.head,"+input");fw.indentLine(fy.from().line+1,null,true);e1(fw)}})},toggleOverwrite:function(fw){fw.toggleOverwrite()}};var ex=G.keyMap={};ex.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};ex.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};ex.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};ex.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};ex["default"]=bN?ex.macDefault:ex.pcDefault;function fe(fw){if(typeof fw=="string"){return ex[fw]}else{return fw}}var i=G.lookupKey=function(fx,fB,fz){function fA(fG){fG=fe(fG);var fF=fG[fx];if(fF===false){return"stop"}if(fF!=null&&fz(fF)){return true}if(fG.nofallthrough){return"stop"}var fE=fG.fallthrough;if(fE==null){return false}if(Object.prototype.toString.call(fE)!="[object Array]"){return fA(fE)}for(var fD=0;fD<fE.length;++fD){var fC=fA(fE[fD]);if(fC){return fC}}return false}for(var fy=0;fy<fB.length;++fy){var fw=fA(fB[fy]);if(fw){return fw!="stop"}}};var d4=G.isModifierKey=function(fx){var fw=eD[fx.keyCode];return fw=="Ctrl"||fw=="Alt"||fw=="Shift"||fw=="Mod"};var eO=G.keyName=function(fx,fy){if(dv&&fx.keyCode==34&&fx["char"]){return false}var fw=eD[fx.keyCode];if(fw==null||fx.altGraphKey){return false}if(fx.altKey){fw="Alt-"+fw}if(by?fx.metaKey:fx.ctrlKey){fw="Ctrl-"+fw}if(by?fx.ctrlKey:fx.metaKey){fw="Cmd-"+fw}if(!fy&&fx.shiftKey){fw="Shift-"+fw}return fw};G.fromTextArea=function(fD,fE){if(!fE){fE={}}fE.value=fD.value;if(!fE.tabindex&&fD.tabindex){fE.tabindex=fD.tabindex}if(!fE.placeholder&&fD.placeholder){fE.placeholder=fD.placeholder}if(fE.autofocus==null){var fw=dh();fE.autofocus=fw==fD||fD.getAttribute("autofocus")!=null&&fw==document.body}function fA(){fD.value=fC.getValue()}if(fD.form){bF(fD.form,"submit",fA);if(!fE.leaveSubmitMethodAlone){var fx=fD.form,fB=fx.submit;try{var fz=fx.submit=function(){fA();fx.submit=fB;fx.submit();fx.submit=fz}}catch(fy){}}}fD.style.display="none";var fC=G(function(fF){fD.parentNode.insertBefore(fF,fD.nextSibling)},fE);fC.save=fA;fC.getTextArea=function(){return fD};fC.toTextArea=function(){fA();fD.parentNode.removeChild(fC.getWrapperElement());fD.style.display="";if(fD.form){dF(fD.form,"submit",fA);if(typeof fD.form.submit=="function"){fD.form.submit=fB}}};return fC};var ej=G.StringStream=function(fw,fx){this.pos=this.start=0;this.string=fw;this.tabSize=fx||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};ej.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(fw){var fy=this.string.charAt(this.pos);if(typeof fw=="string"){var fx=fy==fw}else{var fx=fy&&(fw.test?fw.test(fy):fw(fy))}if(fx){++this.pos;return fy}},eatWhile:function(fw){var fx=this.pos;while(this.eat(fw)){}return this.pos>fx},eatSpace:function(){var fw=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>fw},skipToEnd:function(){this.pos=this.string.length},skipTo:function(fw){var fx=this.string.indexOf(fw,this.pos);if(fx>-1){this.pos=fx;return true}},backUp:function(fw){this.pos-=fw},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bB(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bB(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bB(this.string,null,this.tabSize)-(this.lineStart?bB(this.string,this.lineStart,this.tabSize):0)},match:function(fA,fx,fw){if(typeof fA=="string"){var fB=function(fC){return fw?fC.toLowerCase():fC};var fz=this.string.substr(this.pos,fA.length);if(fB(fz)==fB(fA)){if(fx!==false){this.pos+=fA.length}return true}}else{var fy=this.string.slice(this.pos).match(fA);if(fy&&fy.index>0){return null}if(fy&&fx!==false){this.pos+=fy[0].length}return fy}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(fx,fw){this.lineStart+=fx;try{return fw()}finally{this.lineStart-=fx}}};var O=G.TextMarker=function(fx,fw){this.lines=[];this.type=fw;this.doc=fx};bi(O);O.prototype.clear=function(){if(this.explicitlyCleared){return}var fD=this.doc.cm,fx=fD&&!fD.curOp;if(fx){cp(fD)}if(eF(this,"clear")){var fE=this.find();if(fE){Z(this,"clear",fE.from,fE.to)}}var fy=null,fB=null;for(var fz=0;fz<this.lines.length;++fz){var fF=this.lines[fz];var fC=ew(fF.markedSpans,this);if(fD&&!this.collapsed){Q(fD,bv(fF),"text")}else{if(fD){if(fC.to!=null){fB=bv(fF)}if(fC.from!=null){fy=bv(fF)}}}fF.markedSpans=d9(fF.markedSpans,fC);if(fC.from==null&&this.collapsed&&!eT(this.doc,fF)&&fD){fj(fF,aI(fD.display))}}if(fD&&this.collapsed&&!fD.options.lineWrapping){for(var fz=0;fz<this.lines.length;++fz){var fw=y(this.lines[fz]),fA=dO(fw);if(fA>fD.display.maxLineLength){fD.display.maxLine=fw;fD.display.maxLineLength=fA;fD.display.maxLineChanged=true}}}if(fy!=null&&fD&&this.collapsed){ac(fD,fy,fB+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(fD){dZ(fD.doc)}}if(fD){Z(fD,"markerCleared",fD,this)}if(fx){ah(fD)}};O.prototype.find=function(fz,fx){if(fz==null&&this.type=="bookmark"){fz=1}var fC,fB;for(var fy=0;fy<this.lines.length;++fy){var fw=this.lines[fy];var fA=ew(fw.markedSpans,this);if(fA.from!=null){fC=T(fx?fw:bv(fw),fA.from);if(fz==-1){return fC}}if(fA.to!=null){fB=T(fx?fw:bv(fw),fA.to);if(fz==1){return fB}}}return fC&&{from:fC,to:fB}};O.prototype.changed=function(){var fy=this.find(-1,true),fx=this,fw=this.doc.cm;if(!fy||!fw){return}cs(fw,function(){var fA=fy.line,fB=bv(fy.line);var fz=ey(fw,fB);if(fz){am(fz);fw.curOp.selectionChanged=fw.curOp.forceUpdate=true}fw.curOp.updateMaxLine=true;if(!eT(fx.doc,fA)&&fx.height!=null){var fD=fx.height;fx.height=null;var fC=cA(fx)-fD;if(fC){fj(fA,fA.height+fC)}}})};O.prototype.attachLine=function(fw){if(!this.lines.length&&this.doc.cm){var fx=this.doc.cm.curOp;if(!fx.maybeHiddenMarkers||cT(fx.maybeHiddenMarkers,this)==-1){(fx.maybeUnhiddenMarkers||(fx.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(fw)};O.prototype.detachLine=function(fw){this.lines.splice(cT(this.lines,fw),1);if(!this.lines.length&&this.doc.cm){var fx=this.doc.cm.curOp;(fx.maybeHiddenMarkers||(fx.maybeHiddenMarkers=[])).push(this)}};var aQ=0;function d7(fE,fC,fD,fG,fA){if(fG&&fG.shared){return N(fE,fC,fD,fG,fA)}if(fE.cm&&!fE.cm.curOp){return cE(fE.cm,d7)(fE,fC,fD,fG,fA)}var fz=new O(fE,fA),fF=bY(fC,fD);if(fG){aA(fG,fz)}if(fF>0||fF==0&&fz.clearWhenEmpty!==false){return fz}if(fz.replacedWith){fz.collapsed=true;fz.widgetNode=fg("span",[fz.replacedWith],"CodeMirror-widget");if(!fG.handleMouseEvents){fz.widgetNode.ignoreEvents=true}if(fG.insertLeft){fz.widgetNode.insertLeft=true}}if(fz.collapsed){if(z(fE,fC.line,fC,fD,fz)||fC.line!=fD.line&&z(fE,fD.line,fC,fD,fz)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}aS=true}if(fz.addToHistory){e7(fE,{from:fC,to:fD,origin:"markText"},fE.sel,NaN)}var fx=fC.line,fB=fE.cm,fw;fE.iter(fx,fD.line+1,function(fH){if(fB&&fz.collapsed&&!fB.options.lineWrapping&&y(fH)==fB.display.maxLine){fw=true}if(fz.collapsed&&fx!=fC.line){fj(fH,0)}bW(fH,new dK(fz,fx==fC.line?fC.ch:null,fx==fD.line?fD.ch:null));++fx});if(fz.collapsed){fE.iter(fC.line,fD.line+1,function(fH){if(eT(fE,fH)){fj(fH,0)}})}if(fz.clearOnEnter){bF(fz,"beforeCursorEnter",function(){fz.clear()})}if(fz.readOnly){fq=true;if(fE.history.done.length||fE.history.undone.length){fE.clearHistory()}}if(fz.collapsed){fz.id=++aQ;fz.atomic=true}if(fB){if(fw){fB.curOp.updateMaxLine=true}if(fz.collapsed){ac(fB,fC.line,fD.line+1)}else{if(fz.className||fz.title||fz.startStyle||fz.endStyle){for(var fy=fC.line;fy<=fD.line;fy++){Q(fB,fy,"text")}}}if(fz.atomic){dZ(fB.doc)}Z(fB,"markerAdded",fB,fz)}return fz}var x=G.SharedTextMarker=function(fz,fx){this.markers=fz;this.primary=fx;for(var fw=0,fy=this;fw<fz.length;++fw){fz[fw].parent=this;bF(fz[fw],"clear",function(){fy.clear()})}};bi(x);x.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var fw=0;fw<this.markers.length;++fw){this.markers[fw].clear()}Z(this,"clear")};x.prototype.find=function(fx,fw){return this.primary.find(fx,fw)};function N(fA,fD,fC,fw,fy){fw=aA(fw);fw.shared=false;var fB=[d7(fA,fD,fC,fw,fy)],fx=fB[0];var fz=fw.widgetNode;dA(fA,function(fF){if(fz){fw.widgetNode=fz.cloneNode(true)}fB.push(d7(fF,e4(fF,fD),e4(fF,fC),fw,fy));for(var fE=0;fE<fF.linked.length;++fE){if(fF.linked[fE].isParent){return}}fx=e2(fB)});return new x(fB,fx)}function dK(fw,fy,fx){this.marker=fw;this.from=fy;this.to=fx}function ew(fy,fw){if(fy){for(var fx=0;fx<fy.length;++fx){var fz=fy[fx];if(fz.marker==fw){return fz}}}}function d9(fx,fy){for(var fz,fw=0;fw<fx.length;++fw){if(fx[fw]!=fy){(fz||(fz=[])).push(fx[fw])}}return fz}function bW(fw,fx){fw.markedSpans=fw.markedSpans?fw.markedSpans.concat([fx]):[fx];fx.marker.attachLine(fw)}function aD(fx,fy,fC){if(fx){for(var fA=0,fD;fA<fx.length;++fA){var fE=fx[fA],fB=fE.marker;var fw=fE.from==null||(fB.inclusiveLeft?fE.from<=fy:fE.from<fy);if(fw||fE.from==fy&&fB.type=="bookmark"&&(!fC||!fE.marker.insertLeft)){var fz=fE.to==null||(fB.inclusiveRight?fE.to>=fy:fE.to>fy);(fD||(fD=[])).push(new dK(fB,fE.from,fz?null:fE.to))}}}return fD}function at(fx,fz,fC){if(fx){for(var fA=0,fD;fA<fx.length;++fA){var fE=fx[fA],fB=fE.marker;var fy=fE.to==null||(fB.inclusiveRight?fE.to>=fz:fE.to>fz);if(fy||fE.from==fz&&fB.type=="bookmark"&&(!fC||fE.marker.insertLeft)){var fw=fE.from==null||(fB.inclusiveLeft?fE.from<=fz:fE.from<fz);(fD||(fD=[])).push(new dK(fB,fw?null:fE.from-fz,fE.to==null?null:fE.to-fz))}}}return fD}function dM(fI,fF){var fE=bP(fI,fF.from.line)&&eC(fI,fF.from.line).markedSpans;var fL=bP(fI,fF.to.line)&&eC(fI,fF.to.line).markedSpans;if(!fE&&!fL){return null}var fx=fF.from.ch,fA=fF.to.ch,fD=bY(fF.from,fF.to)==0;var fC=aD(fE,fx,fD);var fK=at(fL,fA,fD);var fJ=fF.text.length==1,fy=e2(fF.text).length+(fJ?fx:0);if(fC){for(var fz=0;fz<fC.length;++fz){var fH=fC[fz];if(fH.to==null){var fM=ew(fK,fH.marker);if(!fM){fH.to=fx}else{if(fJ){fH.to=fM.to==null?null:fM.to+fy}}}}}if(fK){for(var fz=0;fz<fK.length;++fz){var fH=fK[fz];if(fH.to!=null){fH.to+=fy}if(fH.from==null){var fM=ew(fC,fH.marker);if(!fM){fH.from=fy;if(fJ){(fC||(fC=[])).push(fH)}}}else{fH.from+=fy;if(fJ){(fC||(fC=[])).push(fH)}}}}if(fC){fC=q(fC)}if(fK&&fK!=fC){fK=q(fK)}var fB=[fC];if(!fJ){var fG=fF.text.length-2,fw;if(fG>0&&fC){for(var fz=0;fz<fC.length;++fz){if(fC[fz].to==null){(fw||(fw=[])).push(new dK(fC[fz].marker,null,null))}}}for(var fz=0;fz<fG;++fz){fB.push(fw)}fB.push(fK)}return fB}function q(fx){for(var fw=0;fw<fx.length;++fw){var fy=fx[fw];if(fy.from!=null&&fy.from==fy.to&&fy.marker.clearWhenEmpty!==false){fx.splice(fw--,1)}}if(!fx.length){return null}return fx}function dC(fE,fC){var fw=bL(fE,fC);var fF=dM(fE,fC);if(!fw){return fF}if(!fF){return fw}for(var fz=0;fz<fw.length;++fz){var fA=fw[fz],fB=fF[fz];if(fA&&fB){spans:for(var fy=0;fy<fB.length;++fy){var fD=fB[fy];for(var fx=0;fx<fA.length;++fx){if(fA[fx].marker==fD.marker){continue spans}}fA.push(fD)}}else{if(fB){fw[fz]=fB}}}return fw}function co(fI,fG,fH){var fA=null;fI.iter(fG.line,fH.line+1,function(fJ){if(fJ.markedSpans){for(var fK=0;fK<fJ.markedSpans.length;++fK){var fL=fJ.markedSpans[fK].marker;if(fL.readOnly&&(!fA||cT(fA,fL)==-1)){(fA||(fA=[])).push(fL)}}}});if(!fA){return null}var fB=[{from:fG,to:fH}];for(var fC=0;fC<fA.length;++fC){var fD=fA[fC],fy=fD.find(0);for(var fz=0;fz<fB.length;++fz){var fx=fB[fz];if(bY(fx.to,fy.from)<0||bY(fx.from,fy.to)>0){continue}var fF=[fz,1],fw=bY(fx.from,fy.from),fE=bY(fx.to,fy.to);if(fw<0||!fD.inclusiveLeft&&!fw){fF.push({from:fx.from,to:fy.from})}if(fE>0||!fD.inclusiveRight&&!fE){fF.push({from:fy.to,to:fx.to})}fB.splice.apply(fB,fF);fz+=fF.length-1}}return fB}function fm(fw){var fy=fw.markedSpans;if(!fy){return}for(var fx=0;fx<fy.length;++fx){fy[fx].marker.detachLine(fw)}fw.markedSpans=null}function cF(fw,fy){if(!fy){return}for(var fx=0;fx<fy.length;++fx){fy[fx].marker.attachLine(fw)}fw.markedSpans=fy}function v(fw){return fw.inclusiveLeft?-1:0}function bE(fw){return fw.inclusiveRight?1:0}function dj(fz,fx){var fB=fz.lines.length-fx.lines.length;if(fB!=0){return fB}var fy=fz.find(),fC=fx.find();var fw=bY(fy.from,fC.from)||v(fz)-v(fx);if(fw){return -fw}var fA=bY(fy.to,fC.to)||bE(fz)-bE(fx);if(fA){return fA}return fx.id-fz.id}function aR(fx,fB){var fw=aS&&fx.markedSpans,fA;if(fw){for(var fz,fy=0;fy<fw.length;++fy){fz=fw[fy];if(fz.marker.collapsed&&(fB?fz.from:fz.to)==null&&(!fA||dj(fA,fz.marker)<0)){fA=fz.marker}}}return fA}function ef(fw){return aR(fw,true)}function dW(fw){return aR(fw,false)}function z(fE,fy,fC,fD,fA){var fH=eC(fE,fy);var fw=aS&&fH.markedSpans;if(fw){for(var fz=0;fz<fw.length;++fz){var fx=fw[fz];if(!fx.marker.collapsed){continue}var fG=fx.marker.find(0);var fF=bY(fG.from,fC)||v(fx.marker)-v(fA);var fB=bY(fG.to,fD)||bE(fx.marker)-bE(fA);if(fF>=0&&fB<=0||fF<=0&&fB>=0){continue}if(fF<=0&&(bY(fG.to,fC)||bE(fx.marker)-v(fA))>0||fF>=0&&(bY(fG.from,fD)||v(fx.marker)-bE(fA))<0){return true}}}}function y(fx){var fw;while(fw=ef(fx)){fx=fw.find(-1,true).line}return fx}function h(fy){var fw,fx;while(fw=dW(fy)){fy=fw.find(1,true).line;(fx||(fx=[])).push(fy)}return fx}function aH(fz,fx){var fw=eC(fz,fx),fy=y(fw);if(fw==fy){return fx}return bv(fy)}function dw(fz,fy){if(fy>fz.lastLine()){return fy}var fx=eC(fz,fy),fw;if(!eT(fz,fx)){return fy}while(fw=dW(fx)){fx=fw.find(1,true).line}return bv(fx)+1}function eT(fA,fx){var fw=aS&&fx.markedSpans;if(fw){for(var fz,fy=0;fy<fw.length;++fy){fz=fw[fy];if(!fz.marker.collapsed){continue}if(fz.from==null){return true}if(fz.marker.widgetNode){continue}if(fz.from==0&&fz.marker.inclusiveLeft&&R(fA,fx,fz)){return true}}}}function R(fB,fx,fz){if(fz.to==null){var fw=fz.marker.find(1,true);return R(fB,fw.line,ew(fw.line.markedSpans,fz.marker))}if(fz.marker.inclusiveRight&&fz.to==fx.text.length){return true}for(var fA,fy=0;fy<fx.markedSpans.length;++fy){fA=fx.markedSpans[fy];if(fA.marker.collapsed&&!fA.marker.widgetNode&&fA.from==fz.to&&(fA.to==null||fA.to!=fz.from)&&(fA.marker.inclusiveLeft||fz.marker.inclusiveRight)&&R(fB,fx,fA)){return true}}}var c8=G.LineWidget=function(fw,fz,fx){if(fx){for(var fy in fx){if(fx.hasOwnProperty(fy)){this[fy]=fx[fy]}}}this.cm=fw;this.node=fz};bi(c8);function dt(fw,fx,fy){if(bu(fx)<((fw.curOp&&fw.curOp.scrollTop)||fw.doc.scrollTop)){cr(fw,null,fy)}}c8.prototype.clear=function(){var fx=this.cm,fz=this.line.widgets,fy=this.line,fB=bv(fy);if(fB==null||!fz){return}for(var fA=0;fA<fz.length;++fA){if(fz[fA]==this){fz.splice(fA--,1)}}if(!fz.length){fy.widgets=null}var fw=cA(this);cs(fx,function(){dt(fx,fy,-fw);Q(fx,fB,"widget");fj(fy,Math.max(0,fy.height-fw))})};c8.prototype.changed=function(){var fx=this.height,fw=this.cm,fy=this.line;this.height=null;var fz=cA(this)-fx;if(!fz){return}cs(fw,function(){fw.curOp.forceUpdate=true;dt(fw,fy,fz);fj(fy,fy.height+fz)})};function cA(fw){if(fw.height!=null){return fw.height}if(!fo(document.body,fw.node)){bz(fw.cm.display.measure,fg("div",[fw.node],null,"position: relative"))}return fw.height=fw.node.offsetHeight}function bp(fw,fA,fy,fx){var fz=new c8(fw,fy,fx);if(fz.noHScroll){fw.display.alignWidgets=true}d0(fw,fA,"widget",function(fC){var fD=fC.widgets||(fC.widgets=[]);if(fz.insertAt==null){fD.push(fz)}else{fD.splice(Math.min(fD.length-1,Math.max(0,fz.insertAt)),0,fz)}fz.line=fC;if(!eT(fw.doc,fC)){var fB=bu(fC)<fw.doc.scrollTop;fj(fC,fC.height+cA(fz));if(fB){cr(fw,null,fz.height)}fw.curOp.forceUpdate=true}return true});return fz}var fl=G.Line=function(fy,fx,fw){this.text=fy;cF(this,fx);this.height=fw?fw(this):1};bi(fl);fl.prototype.lineNo=function(){return bv(this)};function dP(fx,fA,fy,fw){fx.text=fA;if(fx.stateAfter){fx.stateAfter=null}if(fx.styles){fx.styles=null}if(fx.order!=null){fx.order=null}fm(fx);cF(fx,fy);var fz=fw?fw(fx):1;if(fz!=fx.height){fj(fx,fz)}}function bk(fw){fw.parent=null;fm(fw)}function w(fF,fH,fA,fx,fB,fz){var fy=fA.flattenSpans;if(fy==null){fy=fF.options.flattenSpans}var fD=0,fC=null;var fG=new ej(fH,fF.options.tabSize),fw;if(fH==""&&fA.blankLine){fA.blankLine(fx)}while(!fG.eol()){if(fG.pos>fF.options.maxHighlightLength){fy=false;if(fz){c3(fF,fH,fx,fG.pos)}fG.pos=fH.length;fw=null}else{fw=fA.token(fG,fx)}if(fF.options.addModeClass){var fI=G.innerMode(fA,fx).mode.name;if(fI){fw="m-"+(fw?fI+" "+fw:fI)}}if(!fy||fC!=fw){if(fD<fG.start){fB(fG.start,fC)}fD=fG.start;fC=fw}fG.start=fG.pos}while(fD<fG.pos){var fE=Math.min(fG.pos,fD+50000);fB(fE,fC);fD=fE}}function eW(fC,fE,fw,fz){var fD=[fC.state.modeGen];w(fC,fE.text,fC.doc.mode,fw,function(fF,fG){fD.push(fF,fG)},fz);for(var fx=0;fx<fC.state.overlays.length;++fx){var fA=fC.state.overlays[fx],fB=1,fy=0;w(fC,fE.text,fA.mode,true,function(fF,fH){var fJ=fB;while(fy<fF){var fG=fD[fB];if(fG>fF){fD.splice(fB,1,fF,fD[fB+1],fG)}fB+=2;fy=Math.min(fF,fG)}if(!fH){return}if(fA.opaque){fD.splice(fJ,fB-fJ,fF,fH);fB=fJ+2}else{for(;fJ<fB;fJ+=2){var fI=fD[fJ+1];fD[fJ+1]=fI?fI+" "+fH:fH}}})}return fD}function cI(fw,fx){if(!fx.styles||fx.styles[0]!=fw.state.modeGen){fx.styles=eW(fw,fx,fx.stateAfter=c7(fw,bv(fx)))}return fx.styles}function c3(fw,fB,fy,fx){var fA=fw.doc.mode;var fz=new ej(fB,fw.options.tabSize);fz.start=fz.pos=fx||0;if(fB==""&&fA.blankLine){fA.blankLine(fy)}while(!fz.eol()&&fz.pos<=fw.options.maxHighlightLength){fA.token(fz,fy);fz.start=fz.pos}}var dp={},bJ={};function em(fz,fy){if(!fz){return null}for(;;){var fx=fz.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!fx){break}fz=fz.slice(0,fx.index)+fz.slice(fx.index+fx[0].length);var fA=fx[1]?"bgClass":"textClass";if(fy[fA]==null){fy[fA]=fx[2]}else{if(!(new RegExp("(?:^|s)"+fx[2]+"(?:$|s)")).test(fy[fA])){fy[fA]+=" "+fx[2]}}}if(/^\s*$/.test(fz)){return null}var fw=fy.cm.options.addModeClass?bJ:dp;return fw[fz]||(fw[fz]=fz.replace(/\S+/g,"cm-$&"))}function ei(fx,fB){var fC=fg("span",null,null,cC?"padding-right: .1px":null);var fz={pre:fg("pre",[fC]),content:fC,col:0,pos:0,cm:fx};fB.measure={};for(var fA=0;fA<=(fB.rest?fB.rest.length:0);fA++){var fy=fA?fB.rest[fA-1]:fB.line,fw;fz.pos=0;fz.addToken=t;if((dd||cC)&&fx.getOption("lineWrapping")){fz.addToken=e0(fz.addToken)}if(bw(fx.display.measure)&&(fw=a(fy))){fz.addToken=S(fz.addToken,fw)}fz.map=[];a9(fy,fz,cI(fx,fy));if(fz.map.length==0){fz.map.push(0,0,fz.content.appendChild(a7(fx.display.measure)))}if(fA==0){fB.measure.map=fz.map;fB.measure.cache={}}else{(fB.measure.maps||(fB.measure.maps=[])).push(fz.map);(fB.measure.caches||(fB.measure.caches=[])).push({})}}av(fx,"renderLine",fx,fB.line,fz.pre);return fz}function eA(fx){var fw=fg("span","\u2022","cm-invalidchar");fw.title="\\u"+fx.charCodeAt(0).toString(16);return fw}function t(fB,fL,fw,fz,fM,fK){if(!fL){return}var fG=fB.cm.options.specialChars,fF=false;if(!fG.test(fL)){fB.col+=fL.length;var fE=document.createTextNode(fL);fB.map.push(fB.pos,fB.pos+fL.length,fE);if(bR){fF=true}fB.pos+=fL.length}else{var fE=document.createDocumentFragment(),fI=0;while(true){fG.lastIndex=fI;var fx=fG.exec(fL);var fD=fx?fx.index-fI:fL.length-fI;if(fD){var fA=document.createTextNode(fL.slice(fI,fI+fD));if(bR){fE.appendChild(fg("span",[fA]))}else{fE.appendChild(fA)}fB.map.push(fB.pos,fB.pos+fD,fA);fB.col+=fD;fB.pos+=fD}if(!fx){break}fI+=fD+1;if(fx[0]=="\t"){var fC=fB.cm.options.tabSize,fH=fC-fB.col%fC;var fA=fE.appendChild(fg("span",b8(fH),"cm-tab"));fB.col+=fH}else{var fA=fB.cm.options.specialCharPlaceholder(fx[0]);if(bR){fE.appendChild(fg("span",[fA]))}else{fE.appendChild(fA)}fB.col+=1}fB.map.push(fB.pos,fB.pos+1,fA);fB.pos++}}if(fw||fz||fM||fF){var fJ=fw||"";if(fz){fJ+=fz}if(fM){fJ+=fM}var fy=fg("span",[fE],fJ);if(fK){fy.title=fK}return fB.content.appendChild(fy)}fB.content.appendChild(fE)}function e0(fw){function fx(fy){var fz=" ";for(var fA=0;fA<fy.length-2;++fA){fz+=fA%2?" ":"\u00a0"}fz+=" ";return fz}return function(fz,fD,fA,fy,fC,fB){fw(fz,fD.replace(/ {3,}/g,fx),fA,fy,fC,fB)}}function S(fx,fw){return function(fE,fG,fy,fC,fH,fF){fy=fy?fy+" cm-force-border":"cm-force-border";var fz=fE.pos,fB=fz+fG.length;for(;;){for(var fD=0;fD<fw.length;fD++){var fA=fw[fD];if(fA.to>fz&&fA.from<=fz){break}}if(fA.to>=fB){return fx(fE,fG,fy,fC,fH,fF)}fx(fE,fG.slice(0,fA.to-fz),fy,fC,null,fF);fC=null;fG=fG.slice(fA.to-fz);fz=fA.to}}}function X(fx,fz,fw,fy){var fA=!fy&&fw.widgetNode;if(fA){fx.map.push(fx.pos,fx.pos+fz,fA);fx.content.appendChild(fA)}fx.pos+=fz}function a9(fF,fL,fE){var fB=fF.markedSpans,fD=fF.text,fJ=0;if(!fB){for(var fO=1;fO<fE.length;fO+=2){fL.addToken(fL,fD.slice(fJ,fJ=fE[fO]),em(fE[fO+1],fL))}return}var fP=fD.length,fA=0,fO=1,fH="",fQ;var fS=0,fw,fR,fI,fT,fy;for(;;){if(fS==fA){fw=fR=fI=fT="";fy=null;fS=Infinity;var fC=[];for(var fM=0;fM<fB.length;++fM){var fN=fB[fM],fK=fN.marker;if(fN.from<=fA&&(fN.to==null||fN.to>fA)){if(fN.to!=null&&fS>fN.to){fS=fN.to;fR=""}if(fK.className){fw+=" "+fK.className}if(fK.startStyle&&fN.from==fA){fI+=" "+fK.startStyle}if(fK.endStyle&&fN.to==fS){fR+=" "+fK.endStyle}if(fK.title&&!fT){fT=fK.title}if(fK.collapsed&&(!fy||dj(fy.marker,fK)<0)){fy=fN}}else{if(fN.from>fA&&fS>fN.from){fS=fN.from}}if(fK.type=="bookmark"&&fN.from==fA&&fK.widgetNode){fC.push(fK)}}if(fy&&(fy.from||0)==fA){X(fL,(fy.to==null?fP+1:fy.to)-fA,fy.marker,fy.from==null);if(fy.to==null){return}}if(!fy&&fC.length){for(var fM=0;fM<fC.length;++fM){X(fL,0,fC[fM])}}}if(fA>=fP){break}var fG=Math.min(fP,fS);while(true){if(fH){var fx=fA+fH.length;if(!fy){var fz=fx>fG?fH.slice(0,fG-fA):fH;fL.addToken(fL,fz,fQ?fQ+fw:fw,fI,fA+fz.length==fS?fR:"",fT)}if(fx>=fG){fH=fH.slice(fG-fA);fA=fG;break}fA=fx;fI=""}fH=fD.slice(fJ,fJ=fE[fO++]);fQ=em(fE[fO++],fL)}}}function dl(fw,fx){return fx.from.ch==0&&fx.to.ch==0&&e2(fx.text)==""&&(!fw.cm||fw.cm.options.wholeLineUpdateBefore)}function eV(fJ,fE,fw,fA){function fK(fM){return fw?fw[fM]:null}function fx(fM,fO,fN){dP(fM,fO,fN,fA);Z(fM,"change",fM,fE)}var fH=fE.from,fI=fE.to,fL=fE.text;var fF=eC(fJ,fH.line),fG=eC(fJ,fI.line);var fD=e2(fL),fz=fK(fL.length-1),fC=fI.line-fH.line;if(dl(fJ,fE)){for(var fy=0,fB=[];fy<fL.length-1;++fy){fB.push(new fl(fL[fy],fK(fy),fA))}fx(fG,fG.text,fz);if(fC){fJ.remove(fH.line,fC)}if(fB.length){fJ.insert(fH.line,fB)}}else{if(fF==fG){if(fL.length==1){fx(fF,fF.text.slice(0,fH.ch)+fD+fF.text.slice(fI.ch),fz)}else{for(var fB=[],fy=1;fy<fL.length-1;++fy){fB.push(new fl(fL[fy],fK(fy),fA))}fB.push(new fl(fD+fF.text.slice(fI.ch),fz,fA));fx(fF,fF.text.slice(0,fH.ch)+fL[0],fK(0));fJ.insert(fH.line+1,fB)}}else{if(fL.length==1){fx(fF,fF.text.slice(0,fH.ch)+fL[0]+fG.text.slice(fI.ch),fK(0));fJ.remove(fH.line+1,fC)}else{fx(fF,fF.text.slice(0,fH.ch)+fL[0],fK(0));fx(fG,fD+fG.text.slice(fI.ch),fz);for(var fy=1,fB=[];fy<fL.length-1;++fy){fB.push(new fl(fL[fy],fK(fy),fA))}if(fC>1){fJ.remove(fH.line+1,fC-1)}fJ.insert(fH.line+1,fB)}}}Z(fJ,"change",fJ,fE)}function ep(fx){this.lines=fx;this.parent=null;for(var fy=0,fw=0;fy<fx.length;++fy){fx[fy].parent=this;fw+=fx[fy].height}this.height=fw}ep.prototype={chunkSize:function(){return this.lines.length},removeInner:function(fw,fA){for(var fy=fw,fz=fw+fA;fy<fz;++fy){var fx=this.lines[fy];this.height-=fx.height;bk(fx);Z(fx,"delete")}this.lines.splice(fw,fA)},collapse:function(fw){fw.push.apply(fw,this.lines)},insertInner:function(fx,fy,fw){this.height+=fw;this.lines=this.lines.slice(0,fx).concat(fy).concat(this.lines.slice(fx));for(var fz=0;fz<fy.length;++fz){fy[fz].parent=this}},iterN:function(fw,fz,fy){for(var fx=fw+fz;fw<fx;++fw){if(fy(this.lines[fw])){return true}}}};function eU(fz){this.children=fz;var fy=0,fw=0;for(var fx=0;fx<fz.length;++fx){var fA=fz[fx];fy+=fA.chunkSize();fw+=fA.height;fA.parent=this}this.size=fy;this.height=fw;this.parent=null}eU.prototype={chunkSize:function(){return this.size},removeInner:function(fw,fD){this.size-=fD;for(var fy=0;fy<this.children.length;++fy){var fC=this.children[fy],fA=fC.chunkSize();if(fw<fA){var fz=Math.min(fD,fA-fw),fB=fC.height;fC.removeInner(fw,fz);this.height-=fB-fC.height;if(fA==fz){this.children.splice(fy--,1);fC.parent=null}if((fD-=fz)==0){break}fw=0}else{fw-=fA}}if(this.size-fD<25&&(this.children.length>1||!(this.children[0] instanceof ep))){var fx=[];this.collapse(fx);this.children=[new ep(fx)];this.children[0].parent=this}},collapse:function(fw){for(var fx=0;fx<this.children.length;++fx){this.children[fx].collapse(fw)}},insertInner:function(fx,fy,fw){this.size+=fy.length;this.height+=fw;for(var fB=0;fB<this.children.length;++fB){var fD=this.children[fB],fC=fD.chunkSize();if(fx<=fC){fD.insertInner(fx,fy,fw);if(fD.lines&&fD.lines.length>50){while(fD.lines.length>50){var fA=fD.lines.splice(fD.lines.length-25,25);var fz=new ep(fA);fD.height-=fz.height;this.children.splice(fB+1,0,fz);fz.parent=this}this.maybeSpill()}break}fx-=fC}},maybeSpill:function(){if(this.children.length<=10){return}var fz=this;do{var fx=fz.children.splice(fz.children.length-5,5);var fy=new eU(fx);if(!fz.parent){var fA=new eU(fz.children);fA.parent=fz;fz.children=[fA,fy];fz=fA}else{fz.size-=fy.size;fz.height-=fy.height;var fw=cT(fz.parent.children,fz);fz.parent.children.splice(fw+1,0,fy)}fy.parent=fz.parent}while(fz.children.length>10);fz.parent.maybeSpill()},iterN:function(fw,fC,fB){for(var fx=0;fx<this.children.length;++fx){var fA=this.children[fx],fz=fA.chunkSize();if(fw<fz){var fy=Math.min(fC,fz-fw);if(fA.iterN(fw,fy,fB)){return true}if((fC-=fy)==0){break}fw=0}else{fw-=fz}}}};var b9=0;var an=G.Doc=function(fy,fx,fw){if(!(this instanceof an)){return new an(fy,fx,fw)}if(fw==null){fw=0}eU.call(this,[new ep([new fl("",null)])]);this.first=fw;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=fw;var fz=T(fw,0);this.sel=eh(fz);this.history=new fc(null);this.id=++b9;this.modeOption=fx;if(typeof fy=="string"){fy=aL(fy)}eV(this,{from:fz,to:fz,text:fy});bC(this,eh(fz),V)};an.prototype=b3(eU.prototype,{constructor:an,iter:function(fy,fx,fw){if(fw){this.iterN(fy-this.first,fx-fy,fw)}else{this.iterN(this.first,this.first+this.size,fy)}},insert:function(fx,fy){var fw=0;for(var fz=0;fz<fy.length;++fz){fw+=fy[fz].height}this.insertInner(fx-this.first,fy,fw)},remove:function(fw,fx){this.removeInner(fw-this.first,fx)},getValue:function(fx){var fw=aN(this,this.first,this.first+this.size);if(fx===false){return fw}return fw.join(fx||"\n")},setValue:ck(function(fx){var fy=T(this.first,0),fw=this.first+this.size-1;a0(this,{from:fy,to:T(fw,eC(this,fw).text.length),text:aL(fx),origin:"setValue"},true);bC(this,eh(fy))}),replaceRange:function(fx,fz,fy,fw){fz=e4(this,fz);fy=fy?e4(this,fy):fz;aM(this,fx,fz,fy,fw)},getRange:function(fz,fy,fx){var fw=fi(this,e4(this,fz),e4(this,fy));if(fx===false){return fw}return fw.join(fx||"\n")},getLine:function(fx){var fw=this.getLineHandle(fx);return fw&&fw.text},getLineHandle:function(fw){if(bP(this,fw)){return eC(this,fw)}},getLineNumber:function(fw){return bv(fw)},getLineHandleVisualStart:function(fw){if(typeof fw=="number"){fw=eC(this,fw)}return y(fw)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(fw){return e4(this,fw)},getCursor:function(fy){var fw=this.sel.primary(),fx;if(fy==null||fy=="head"){fx=fw.head}else{if(fy=="anchor"){fx=fw.anchor}else{if(fy=="end"||fy=="to"||fy===false){fx=fw.to()}else{fx=fw.from()}}}return fx},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ck(function(fw,fy,fx){E(this,e4(this,typeof fw=="number"?T(fw,fy||0):fw),null,fx)}),setSelection:ck(function(fx,fy,fw){E(this,e4(this,fx),e4(this,fy||fx),fw)}),extendSelection:ck(function(fy,fw,fx){fd(this,e4(this,fy),fw&&e4(this,fw),fx)}),extendSelections:ck(function(fx,fw){ap(this,ds(this,fx,fw))}),extendSelectionsBy:ck(function(fx,fw){ap(this,bA(this.sel.ranges,fx),fw)}),setSelections:ck(function(fw,fA,fy){if(!fw.length){return}for(var fz=0,fx=[];fz<fw.length;fz++){fx[fz]=new dr(e4(this,fw[fz].anchor),e4(this,fw[fz].head))}if(fA==null){fA=Math.min(fw.length-1,this.sel.primIndex)}bC(this,cf(fx,fA),fy)}),addSelection:ck(function(fy,fz,fx){var fw=this.sel.ranges.slice(0);fw.push(new dr(e4(this,fy),e4(this,fz||fy)));bC(this,cf(fw,fw.length-1),fx)}),getSelection:function(fA){var fx=this.sel.ranges,fw;for(var fy=0;fy<fx.length;fy++){var fz=fi(this,fx[fy].from(),fx[fy].to());fw=fw?fw.concat(fz):fz}if(fA===false){return fw}else{return fw.join(fA||"\n")}},getSelections:function(fA){var fz=[],fw=this.sel.ranges;for(var fx=0;fx<fw.length;fx++){var fy=fi(this,fw[fx].from(),fw[fx].to());if(fA!==false){fy=fy.join(fA||"\n")}fz[fx]=fy}return fz},replaceSelection:ck(function(fy,fA,fw){var fz=[];for(var fx=0;fx<this.sel.ranges.length;fx++){fz[fx]=fy}this.replaceSelections(fz,fA,fw||"+input")}),replaceSelections:function(fB,fD,fy){var fA=[],fC=this.sel;for(var fz=0;fz<fC.ranges.length;fz++){var fx=fC.ranges[fz];fA[fz]={from:fx.from(),to:fx.to(),text:aL(fB[fz]),origin:fy}}var fw=fD&&fD!="end"&&aa(this,fA,fD);for(var fz=fA.length-1;fz>=0;fz--){a0(this,fA[fz])}if(fw){eu(this,fw)}else{if(this.cm){e1(this.cm)}}},undo:ck(function(){bO(this,"undo")}),redo:ck(function(){bO(this,"redo")}),undoSelection:ck(function(){bO(this,"undo",true)}),redoSelection:ck(function(){bO(this,"redo",true)}),setExtending:function(fw){this.extend=fw},getExtending:function(){return this.extend},historySize:function(){var fz=this.history,fw=0,fy=0;for(var fx=0;fx<fz.done.length;fx++){if(!fz.done[fx].ranges){++fw}}for(var fx=0;fx<fz.undone.length;fx++){if(!fz.undone[fx].ranges){++fy}}return{undo:fw,redo:fy}},clearHistory:function(){this.history=new fc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(fw){if(fw){this.history.lastOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(fw){return this.history.generation==(fw||this.cleanGeneration)},getHistory:function(){return{done:bx(this.history.done),undone:bx(this.history.undone)}},setHistory:function(fx){var fw=this.history=new fc(this.history.maxGeneration);fw.done=bx(fx.done.slice(0),null,true);fw.undone=bx(fx.undone.slice(0),null,true)},markText:function(fy,fx,fw){return d7(this,e4(this,fy),e4(this,fx),fw,"range")},setBookmark:function(fy,fw){var fx={replacedWith:fw&&(fw.nodeType==null?fw.widget:fw),insertLeft:fw&&fw.insertLeft,clearWhenEmpty:false,shared:fw&&fw.shared};fy=e4(this,fy);return d7(this,fy,fy,fx,"bookmark")},findMarksAt:function(fA){fA=e4(this,fA);var fz=[],fx=eC(this,fA.line).markedSpans;if(fx){for(var fw=0;fw<fx.length;++fw){var fy=fx[fw];if((fy.from==null||fy.from<=fA.ch)&&(fy.to==null||fy.to>=fA.ch)){fz.push(fy.marker.parent||fy.marker)}}}return fz},findMarks:function(fz,fy){fz=e4(this,fz);fy=e4(this,fy);var fw=[],fx=fz.line;this.iter(fz.line,fy.line+1,function(fA){var fC=fA.markedSpans;if(fC){for(var fB=0;fB<fC.length;fB++){var fD=fC[fB];if(!(fx==fz.line&&fz.ch>fD.to||fD.from==null&&fx!=fz.line||fx==fy.line&&fD.from>fy.ch)){fw.push(fD.marker.parent||fD.marker)}}}++fx});return fw},getAllMarks:function(){var fw=[];this.iter(function(fy){var fx=fy.markedSpans;if(fx){for(var fz=0;fz<fx.length;++fz){if(fx[fz].from!=null){fw.push(fx[fz].marker)}}}});return fw},posFromIndex:function(fx){var fw,fy=this.first;this.iter(function(fz){var fA=fz.text.length+1;if(fA>fx){fw=fx;return true}fx-=fA;++fy});return e4(this,T(fy,fw))},indexFromPos:function(fx){fx=e4(this,fx);var fw=fx.ch;if(fx.line<this.first||fx.ch<0){return 0}this.iter(this.first,fx.line,function(fy){fw+=fy.text.length+1});return fw},copy:function(fw){var fx=new an(aN(this,this.first,this.first+this.size),this.modeOption,this.first);fx.scrollTop=this.scrollTop;fx.scrollLeft=this.scrollLeft;fx.sel=this.sel;fx.extend=false;if(fw){fx.history.undoDepth=this.history.undoDepth;fx.setHistory(this.getHistory())}return fx},linkedDoc:function(fw){if(!fw){fw={}}var fz=this.first,fy=this.first+this.size;if(fw.from!=null&&fw.from>fz){fz=fw.from}if(fw.to!=null&&fw.to<fy){fy=fw.to}var fx=new an(aN(this,fz,fy),fw.mode||this.modeOption,fz);if(fw.sharedHist){fx.history=this.history}(this.linked||(this.linked=[])).push({doc:fx,sharedHist:fw.sharedHist});fx.linked=[{doc:this,isParent:true,sharedHist:fw.sharedHist}];return fx},unlinkDoc:function(fx){if(fx instanceof G){fx=fx.doc}if(this.linked){for(var fy=0;fy<this.linked.length;++fy){var fz=this.linked[fy];if(fz.doc!=fx){continue}this.linked.splice(fy,1);fx.unlinkDoc(this);break}}if(fx.history==this.history){var fw=[fx.id];dA(fx,function(fA){fw.push(fA.id)},true);fx.history=new fc(null);fx.history.done=bx(this.history.done,fw);fx.history.undone=bx(this.history.undone,fw)}},iterLinkedDocs:function(fw){dA(this,fw)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});an.prototype.eachLine=an.prototype.iter;var e="iter insert remove copy getEditor".split(" ");for(var bs in an.prototype){if(an.prototype.hasOwnProperty(bs)&&cT(e,bs)<0){G.prototype[bs]=(function(fw){return function(){return fw.apply(this.doc,arguments)}})(an.prototype[bs])}}bi(an);function dA(fz,fy,fx){function fw(fF,fD,fB){if(fF.linked){for(var fC=0;fC<fF.linked.length;++fC){var fA=fF.linked[fC];if(fA.doc==fD){continue}var fE=fB&&fA.sharedHist;if(fx&&!fE){continue}fy(fA.doc,fE);fw(fA.doc,fF,fE)}}}fw(fz,null,true)}function dD(fw,fx){if(fx.cm){throw new Error("This document is already in use.")}fw.doc=fx;fx.cm=fw;U(fw);bb(fw);if(!fw.options.lineWrapping){g(fw)}fw.options.mode=fx.modeOption;ac(fw)}function eC(fz,fB){fB-=fz.first;if(fB<0||fB>=fz.size){throw new Error("There is no line "+(fB+fz.first)+" in the document.")}for(var fw=fz;!fw.lines;){for(var fx=0;;++fx){var fA=fw.children[fx],fy=fA.chunkSize();if(fB<fy){fw=fA;break}fB-=fy}}return fw.lines[fB]}function fi(fy,fA,fw){var fx=[],fz=fA.line;fy.iter(fA.line,fw.line+1,function(fB){var fC=fB.text;if(fz==fw.line){fC=fC.slice(0,fw.ch)}if(fz==fA.line){fC=fC.slice(fA.ch)}fx.push(fC);++fz});return fx}function aN(fx,fz,fy){var fw=[];fx.iter(fz,fy,function(fA){fw.push(fA.text)});return fw}function fj(fx,fw){var fy=fw-fx.height;if(fy){for(var fz=fx;fz;fz=fz.parent){fz.height+=fy}}}function bv(fw){if(fw.parent==null){return null}var fA=fw.parent,fz=cT(fA.lines,fw);for(var fx=fA.parent;fx;fA=fx,fx=fx.parent){for(var fy=0;;++fy){if(fx.children[fy]==fA){break}fz+=fx.children[fy].chunkSize()}}return fz+fA.first}function bo(fy,fB){var fD=fy.first;outer:do{for(var fz=0;fz<fy.children.length;++fz){var fC=fy.children[fz],fA=fC.height;if(fB<fA){fy=fC;continue outer}fB-=fA;fD+=fC.chunkSize()}return fD}while(!fy.lines);for(var fz=0;fz<fy.lines.length;++fz){var fx=fy.lines[fz],fw=fx.height;if(fB<fw){break}fB-=fw}return fD+fz}function bu(fy){fy=y(fy);var fA=0,fx=fy.parent;for(var fz=0;fz<fx.lines.length;++fz){var fw=fx.lines[fz];if(fw==fy){break}else{fA+=fw.height}}for(var fB=fx.parent;fB;fx=fB,fB=fx.parent){for(var fz=0;fz<fB.children.length;++fz){var fC=fB.children[fz];if(fC==fx){break}else{fA+=fC.height}}}return fA}function a(fx){var fw=fx.order;if(fw==null){fw=fx.order=a1(fx.text)}return fw}function fc(fw){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=fw||1}function c1(fw,fy){var fx={from:b2(fy.from),to:cz(fy),text:fi(fw,fy.from,fy.to)};bG(fw,fx,fy.from.line,fy.to.line+1);dA(fw,function(fz){bG(fz,fx,fy.from.line,fy.to.line+1)},true);return fx}function eY(fx){while(fx.length){var fw=e2(fx);if(fw.ranges){fx.pop()}else{break}}}function ee(fx,fw){if(fw){eY(fx.done);return e2(fx.done)}else{if(fx.done.length&&!e2(fx.done).ranges){return e2(fx.done)}else{if(fx.done.length>1&&!fx.done[fx.done.length-2].ranges){fx.done.pop();return e2(fx.done)}}}}function e7(fC,fA,fw,fz){var fy=fC.history;fy.undone.length=0;var fx=+new Date,fD;if((fy.lastOp==fz||fy.lastOrigin==fA.origin&&fA.origin&&((fA.origin.charAt(0)=="+"&&fC.cm&&fy.lastModTime>fx-fC.cm.options.historyEventDelay)||fA.origin.charAt(0)=="*"))&&(fD=ee(fy,fy.lastOp==fz))){var fE=e2(fD.changes);if(bY(fA.from,fA.to)==0&&bY(fA.from,fE.to)==0){fE.to=cz(fA)}else{fD.changes.push(c1(fC,fA))}}else{var fB=e2(fy.done);if(!fB||!fB.ranges){ct(fC.sel,fy.done)}fD={changes:[c1(fC,fA)],generation:fy.generation};fy.done.push(fD);while(fy.done.length>fy.undoDepth){fy.done.shift();if(!fy.done[0].ranges){fy.done.shift()}}}fy.done.push(fw);fy.generation=++fy.maxGeneration;fy.lastModTime=fy.lastSelTime=fx;fy.lastOp=fz;fy.lastOrigin=fy.lastSelOrigin=fA.origin;if(!fE){av(fC,"historyAdded")}}function bj(fA,fw,fy,fz){var fx=fw.charAt(0);return fx=="*"||fx=="+"&&fy.ranges.length==fz.ranges.length&&fy.somethingSelected()==fz.somethingSelected()&&new Date-fA.history.lastSelTime<=(fA.cm?fA.cm.options.historyEventDelay:500)}function fp(fB,fz,fw,fy){var fA=fB.history,fx=fy&&fy.origin;if(fw==fA.lastOp||(fx&&fA.lastSelOrigin==fx&&(fA.lastModTime==fA.lastSelTime&&fA.lastOrigin==fx||bj(fB,fx,e2(fA.done),fz)))){fA.done[fA.done.length-1]=fz}else{ct(fz,fA.done)}fA.lastSelTime=+new Date;fA.lastSelOrigin=fx;fA.lastOp=fw;if(fy&&fy.clearRedo!==false){eY(fA.undone)}}function ct(fx,fw){var fy=e2(fw);if(!(fy&&fy.ranges&&fy.equals(fx))){fw.push(fx)}}function bG(fx,fB,fA,fz){var fw=fB["spans_"+fx.id],fy=0;fx.iter(Math.max(fx.first,fA),Math.min(fx.first+fx.size,fz),function(fC){if(fC.markedSpans){(fw||(fw=fB["spans_"+fx.id]={}))[fy]=fC.markedSpans}++fy})}function a5(fy){if(!fy){return null}for(var fx=0,fw;fx<fy.length;++fx){if(fy[fx].marker.explicitlyCleared){if(!fw){fw=fy.slice(0,fx)}}else{if(fw){fw.push(fy[fx])}}}return !fw?fy:fw.length?fw:null}function bL(fz,fA){var fy=fA["spans_"+fz.id];if(!fy){return null}for(var fx=0,fw=[];fx<fA.text.length;++fx){fw.push(a5(fy[fx]))}return fw}function bx(fH,fz,fG){for(var fC=0,fx=[];fC<fH.length;++fC){var fy=fH[fC];if(fy.ranges){fx.push(fG?fh.prototype.deepCopy.call(fy):fy);continue}var fE=fy.changes,fF=[];fx.push({changes:fF});for(var fB=0;fB<fE.length;++fB){var fD=fE[fB],fA;fF.push({from:fD.from,to:fD.to,text:fD.text});if(fz){for(var fw in fD){if(fA=fw.match(/^spans_(\d+)$/)){if(cT(fz,Number(fA[1]))>-1){e2(fF)[fw]=fD[fw];delete fD[fw]}}}}}}return fx}function H(fz,fy,fx,fw){if(fx<fz.line){fz.line+=fw}else{if(fy<fz.line){fz.line=fy;fz.ch=0}}}function eE(fz,fB,fC,fD){for(var fy=0;fy<fz.length;++fy){var fw=fz[fy],fA=true;if(fw.ranges){if(!fw.copied){fw=fz[fy]=fw.deepCopy();fw.copied=true}for(var fx=0;fx<fw.ranges.length;fx++){H(fw.ranges[fx].anchor,fB,fC,fD);H(fw.ranges[fx].head,fB,fC,fD)}continue}for(var fx=0;fx<fw.changes.length;++fx){var fE=fw.changes[fx];if(fC<fE.from.line){fE.from=T(fE.from.line+fD,fE.from.ch);fE.to=T(fE.to.line+fD,fE.to.ch)}else{if(fB<=fE.to.line){fA=false;break}}}if(!fA){fz.splice(0,fy+1);fy=0}}}function da(fx,fA){var fz=fA.from.line,fy=fA.to.line,fw=fA.text.length-(fy-fz)-1;eE(fx.done,fz,fy,fw);eE(fx.undone,fz,fy,fw)}var cn=G.e_preventDefault=function(fw){if(fw.preventDefault){fw.preventDefault()}else{fw.returnValue=false}};var cX=G.e_stopPropagation=function(fw){if(fw.stopPropagation){fw.stopPropagation()}else{fw.cancelBubble=true}};function bt(fw){return fw.defaultPrevented!=null?fw.defaultPrevented:fw.returnValue==false}var dS=G.e_stop=function(fw){cn(fw);cX(fw)};function K(fw){return fw.target||fw.srcElement}function e8(fx){var fw=fx.which;if(fw==null){if(fx.button&1){fw=1}else{if(fx.button&2){fw=3}else{if(fx.button&4){fw=2}}}}if(bN&&fx.ctrlKey&&fw==1){fw=3}return fw}var bF=G.on=function(fz,fx,fy){if(fz.addEventListener){fz.addEventListener(fx,fy,false)}else{if(fz.attachEvent){fz.attachEvent("on"+fx,fy)}else{var fA=fz._handlers||(fz._handlers={});var fw=fA[fx]||(fA[fx]=[]);fw.push(fy)}}};var dF=G.off=function(fA,fy,fz){if(fA.removeEventListener){fA.removeEventListener(fy,fz,false)}else{if(fA.detachEvent){fA.detachEvent("on"+fy,fz)}else{var fw=fA._handlers&&fA._handlers[fy];if(!fw){return}for(var fx=0;fx<fw.length;++fx){if(fw[fx]==fz){fw.splice(fx,1);break}}}}};var av=G.signal=function(fA,fz){var fw=fA._handlers&&fA._handlers[fz];if(!fw){return}var fx=Array.prototype.slice.call(arguments,2);for(var fy=0;fy<fw.length;++fy){fw[fy].apply(null,fx)}};var a8,ca=0;function Z(fB,fA){var fw=fB._handlers&&fB._handlers[fA];if(!fw){return}var fy=Array.prototype.slice.call(arguments,2);if(!a8){++ca;a8=[];setTimeout(d1,0)}function fx(fC){return function(){fC.apply(null,fy)}}for(var fz=0;fz<fw.length;++fz){a8.push(fx(fw[fz]))}}function d1(){--ca;var fw=a8;a8=null;for(var fx=0;fx<fw.length;++fx){fw[fx]()}}function aE(fw,fy,fx){av(fw,fx||fy.type,fw,fy);return bt(fy)||fy.codemirrorIgnore}function eF(fy,fx){var fw=fy._handlers&&fy._handlers[fx];return fw&&fw.length>0}function bi(fw){fw.prototype.on=function(fx,fy){bF(this,fx,fy)};fw.prototype.off=function(fx,fy){dF(this,fx,fy)}}var a4=30;var bS=G.Pass={toString:function(){return"CodeMirror.Pass"}};var V={scroll:false},L={origin:"*mouse"},cy={origin:"+move"};function fv(){this.id=null}fv.prototype.set=function(fw,fx){clearTimeout(this.id);this.id=setTimeout(fx,fw)};var bB=G.countColumn=function(fz,fx,fB,fC,fy){if(fx==null){fx=fz.search(/[^\s\u00a0]/);if(fx==-1){fx=fz.length}}for(var fA=fC||0,fD=fy||0;;){var fw=fz.indexOf("\t",fA);if(fw<0||fw>=fx){return fD+(fx-fA)}fD+=fw-fA;fD+=fB-(fD%fB);fA=fw+1}};function dR(fA,fz,fB){for(var fC=0,fy=0;;){var fx=fA.indexOf("\t",fC);if(fx==-1){fx=fA.length}var fw=fx-fC;if(fx==fA.length||fy+fw>=fz){return fC+Math.min(fw,fz-fy)}fy+=fx-fC;fy+=fB-(fy%fB);fC=fx+1;if(fy>=fz){return fC}}}var aK=[""];function b8(fw){while(aK.length<=fw){aK.push(e2(aK)+" ")}return aK[fw]}function e2(fw){return fw[fw.length-1]}var df=function(fw){fw.select()};if(eq){df=function(fw){fw.selectionStart=0;fw.selectionEnd=fw.value.length}}else{if(dd){df=function(fx){try{fx.select()}catch(fw){}}}}function cT(fy,fw){for(var fx=0;fx<fy.length;++fx){if(fy[fx]==fw){return fx}}return -1}if([].indexOf){cT=function(fx,fw){return fx.indexOf(fw)}}function bA(fz,fy){var fw=[];for(var fx=0;fx<fz.length;fx++){fw[fx]=fy(fz[fx],fx)}return fw}if([].map){bA=function(fx,fw){return fx.map(fw)}}function b3(fz,fw){var fy;if(Object.create){fy=Object.create(fz)}else{var fx=function(){};fx.prototype=fz;fy=new fx()}if(fw){aA(fw,fy)}return fy}function aA(fx,fw){if(!fw){fw={}}for(var fy in fx){if(fx.hasOwnProperty(fy)){fw[fy]=fx[fy]}}return fw}function ce(fx){var fw=Array.prototype.slice.call(arguments,1);return function(){return fx.apply(null,fw)}}var aX=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var ci=G.isWordChar=function(fw){return/\w/.test(fw)||fw>"\x80"&&(fw.toUpperCase()!=fw.toLowerCase()||aX.test(fw))};function ek(fw){for(var fx in fw){if(fw.hasOwnProperty(fx)&&fw[fx]){return false}}return true}var eb=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function eN(fw){return fw.charCodeAt(0)>=768&&eb.test(fw)}function fg(fw,fA,fz,fy){var fB=document.createElement(fw);if(fz){fB.className=fz}if(fy){fB.style.cssText=fy}if(typeof fA=="string"){fB.appendChild(document.createTextNode(fA))}else{if(fA){for(var fx=0;fx<fA.length;++fx){fB.appendChild(fA[fx])}}}return fB}var b4;if(document.createRange){b4=function(fy,fz,fw){var fx=document.createRange();fx.setEnd(fy,fw);fx.setStart(fy,fz);return fx}}else{b4=function(fy,fz,fw){var fx=document.body.createTextRange();fx.moveToElementText(fy.parentNode);fx.collapse(true);fx.moveEnd("character",fw);fx.moveStart("character",fz);return fx}}function du(fx){for(var fw=fx.childNodes.length;fw>0;--fw){fx.removeChild(fx.firstChild)}return fx}function bz(fw,fx){return du(fw).appendChild(fx)}function fo(fw,fx){if(fw.contains){return fw.contains(fx)}while(fx=fx.parentNode){if(fx==fw){return true}}}function dh(){return document.activeElement}if(ec){dh=function(){try{return document.activeElement}catch(fw){return document.body}}}var ed=function(){if(bR){return false}var fw=fg("div");return"draggable" in fw||"dragDrop" in fw}();var dX;function k(fw){if(dX!=null){return dX}var fx=fg("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");bz(fw,fx);if(fx.offsetWidth){dX=fx.offsetHeight-fx.clientHeight}return dX||0}var e6;function a7(fw){if(e6==null){var fx=fg("span","\u200b");bz(fw,fg("span",[fx,document.createTextNode("x")]));if(fw.firstChild.offsetHeight!=0){e6=fx.offsetWidth<=1&&fx.offsetHeight>2&&!bU}}if(e6){return fg("span","\u200b")}else{return fg("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var e5;function bw(fz){if(e5!=null){return e5}var fw=bz(fz,document.createTextNode("A\u062eA"));var fy=b4(fw,0,1).getBoundingClientRect();if(fy.left==fy.right){return false}var fx=b4(fw,1,2).getBoundingClientRect();return e5=(fx.right-fy.right<3)}var aL=G.splitLines="\n\nb".split(/\n/).length!=3?function(fB){var fC=0,fw=[],fA=fB.length;while(fC<=fA){var fz=fB.indexOf("\n",fC);if(fz==-1){fz=fB.length}var fy=fB.slice(fC,fB.charAt(fz-1)=="\r"?fz-1:fz);var fx=fy.indexOf("\r");if(fx!=-1){fw.push(fy.slice(0,fx));fC+=fx+1}else{fw.push(fy);fC=fz+1}}return fw}:function(fw){return fw.split(/\r\n?|\n/)};var bc=window.getSelection?function(fx){try{return fx.selectionStart!=fx.selectionEnd}catch(fw){return false}}:function(fy){try{var fw=fy.ownerDocument.selection.createRange()}catch(fx){}if(!fw||fw.parentElement()!=fy){return false}return fw.compareEndPoints("StartToEnd",fw)!=0};var cL=(function(){var fw=fg("div");if("oncopy" in fw){return true}fw.setAttribute("oncopy","return;");return typeof fw.oncopy=="function"})();var eD={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};G.keyNames=eD;(function(){for(var fw=0;fw<10;fw++){eD[fw+48]=eD[fw+96]=String(fw)}for(var fw=65;fw<=90;fw++){eD[fw]=String.fromCharCode(fw)}for(var fw=1;fw<=12;fw++){eD[fw+111]=eD[fw+63235]="F"+fw}})();function dx(fw,fC,fB,fA){if(!fw){return fA(fC,fB,"ltr")}var fz=false;for(var fy=0;fy<fw.length;++fy){var fx=fw[fy];if(fx.from<fB&&fx.to>fC||fC==fB&&fx.to==fC){fA(Math.max(fx.from,fC),Math.min(fx.to,fB),fx.level==1?"rtl":"ltr");fz=true}}if(!fz){fA(fC,fB,"ltr")}}function c4(fw){return fw.level%2?fw.to:fw.from}function fr(fw){return fw.level%2?fw.from:fw.to}function cm(fx){var fw=a(fx);return fw?c4(fw[0]):0}function cx(fx){var fw=a(fx);if(!fw){return fx.text.length}return fr(e2(fw))}function bd(fx,fA){var fy=eC(fx.doc,fA);var fB=y(fy);if(fB!=fy){fA=bv(fB)}var fw=a(fB);var fz=!fw?0:fw[0].level%2?cx(fB):cm(fB);return T(fA,fz)}function di(fy,fB){var fx,fz=eC(fy.doc,fB);while(fx=dW(fz)){fz=fx.find(1,true).line;fB=null}var fw=a(fz);var fA=!fw?fz.text.length:fw[0].level%2?cm(fz):cx(fz);return T(fB==null?bv(fz):fB,fA)}function ai(fx,fy,fw){var fz=fx[0].level;if(fy==fz){return true}if(fw==fz){return false}return fy<fw}var er;function ax(fw,fA){er=null;for(var fx=0,fy;fx<fw.length;++fx){var fz=fw[fx];if(fz.from<fA&&fz.to>fA){return fx}if((fz.from==fA||fz.to==fA)){if(fy==null){fy=fx}else{if(ai(fw,fz.level,fw[fy].level)){if(fz.from!=fz.to){er=fy}return fx}else{if(fz.from!=fz.to){er=fx}return fy}}}}return fy}function eB(fw,fz,fx,fy){if(!fy){return fz+fx}do{fz+=fx}while(fz>0&&eN(fw.text.charAt(fz)));return fz}function u(fw,fD,fy,fz){var fA=a(fw);if(!fA){return ad(fw,fD,fy,fz)}var fC=ax(fA,fD),fx=fA[fC];var fB=eB(fw,fD,fx.level%2?-fy:fy,fz);for(;;){if(fB>fx.from&&fB<fx.to){return fB}if(fB==fx.from||fB==fx.to){if(ax(fA,fB)==fC){return fB}fx=fA[fC+=fy];return(fy>0)==fx.level%2?fx.to:fx.from}else{fx=fA[fC+=fy];if(!fx){return null}if((fy>0)==fx.level%2){fB=eB(fw,fx.to,-1,fz)}else{fB=eB(fw,fx.from,1,fz)}}}}function ad(fw,fA,fx,fy){var fz=fA+fx;if(fy){while(fz>0&&eN(fw.text.charAt(fz))){fz+=fx}}return fz<0||fz>fw.text.length?null:fz}var a1=(function(){var fC="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var fA="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function fz(fG){if(fG<=247){return fC.charAt(fG)}else{if(1424<=fG&&fG<=1524){return"R"}else{if(1536<=fG&&fG<=1773){return fA.charAt(fG-1536)}else{if(1774<=fG&&fG<=2220){return"r"}else{if(8192<=fG&&fG<=8203){return"w"}else{if(fG==8204){return"b"}else{return"L"}}}}}}}var fw=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var fF=/[stwN]/,fy=/[LRr]/,fx=/[Lb1n]/,fB=/[1n]/;var fE="L";function fD(fI,fH,fG){this.level=fI;this.from=fH;this.to=fG}return function(fQ){if(!fw.test(fQ)){return false}var fW=fQ.length,fM=[];for(var fV=0,fI;fV<fW;++fV){fM.push(fI=fz(fQ.charCodeAt(fV)))}for(var fV=0,fP=fE;fV<fW;++fV){var fI=fM[fV];if(fI=="m"){fM[fV]=fP}else{fP=fI}}for(var fV=0,fG=fE;fV<fW;++fV){var fI=fM[fV];if(fI=="1"&&fG=="r"){fM[fV]="n"}else{if(fy.test(fI)){fG=fI;if(fI=="r"){fM[fV]="R"}}}}for(var fV=1,fP=fM[0];fV<fW-1;++fV){var fI=fM[fV];if(fI=="+"&&fP=="1"&&fM[fV+1]=="1"){fM[fV]="1"}else{if(fI==","&&fP==fM[fV+1]&&(fP=="1"||fP=="n")){fM[fV]=fP}}fP=fI}for(var fV=0;fV<fW;++fV){var fI=fM[fV];if(fI==","){fM[fV]="N"}else{if(fI=="%"){for(var fJ=fV+1;fJ<fW&&fM[fJ]=="%";++fJ){}var fX=(fV&&fM[fV-1]=="!")||(fJ<fW&&fM[fJ]=="1")?"1":"N";for(var fT=fV;fT<fJ;++fT){fM[fT]=fX}fV=fJ-1}}}for(var fV=0,fG=fE;fV<fW;++fV){var fI=fM[fV];if(fG=="L"&&fI=="1"){fM[fV]="L"}else{if(fy.test(fI)){fG=fI}}}for(var fV=0;fV<fW;++fV){if(fF.test(fM[fV])){for(var fJ=fV+1;fJ<fW&&fF.test(fM[fJ]);++fJ){}var fN=(fV?fM[fV-1]:fE)=="L";var fH=(fJ<fW?fM[fJ]:fE)=="L";var fX=fN||fH?"L":"R";for(var fT=fV;fT<fJ;++fT){fM[fT]=fX}fV=fJ-1}}var fU=[],fR;for(var fV=0;fV<fW;){if(fx.test(fM[fV])){var fK=fV;for(++fV;fV<fW&&fx.test(fM[fV]);++fV){}fU.push(new fD(0,fK,fV))}else{var fL=fV,fO=fU.length;for(++fV;fV<fW&&fM[fV]!="L";++fV){}for(var fT=fL;fT<fV;){if(fB.test(fM[fT])){if(fL<fT){fU.splice(fO,0,new fD(1,fL,fT))}var fS=fT;for(++fT;fT<fV&&fB.test(fM[fT]);++fT){}fU.splice(fO,0,new fD(2,fS,fT));fL=fT}else{++fT}}if(fL<fV){fU.splice(fO,0,new fD(1,fL,fV))}}}if(fU[0].level==1&&(fR=fQ.match(/^\s+/))){fU[0].from=fR[0].length;fU.unshift(new fD(0,0,fR[0].length))}if(e2(fU).level==1&&(fR=fQ.match(/\s+$/))){e2(fU).to-=fR[0].length;fU.push(new fD(0,fW-fR[0].length,fW))}if(fU[0].level!=e2(fU).level){fU.push(new fD(fU[0].level,fW,fW))}return fU}})();G.version="4.0.3";return G});