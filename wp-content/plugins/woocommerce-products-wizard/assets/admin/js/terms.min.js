var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){"use strict";var e={},n=function(n,i){return this.element=n,this.options=t.extend({},e,i),this.init()};n.prototype.init=function(){return this.$element=t(this.element),this.$select=this.$element.find('[data-component="wcpw-terms-select"]'),this.$list=this.$element.find('[data-component="wcpw-terms-list"] tbody'),this.ajaxUrl=window.wordpressAjaxUrl||"/wp-admin/admin-ajax.php",t.fn.sortable&&this.$element.sortable({items:'[data-component="wcpw-terms-list-item"]'}),this.$element.data("wcpw-terms",this),this},n.prototype.addItem=function(){var e=this.$select.val(),n=this.$select.find("option:selected");if(!e)return this;n.addClass("hidden"),this.$select.val("");var i=this.$element.find('[data-component="wcpw-terms-list-item-template"]').clone().appendTo(this.$list).attr("data-component","wcpw-terms-list-item").attr("data-id",e),s=i.find('[data-component="wcpw-terms-list-item-settings"]');return i.find('[data-component="wcpw-terms-list-item-name"]').text(n.text()).end().find('[data-component="wcpw-terms-list-item-id"]').attr("name","terms_list_ids["+e+"]").attr("value",e),s.attr("data-settings",s.attr("data-settings").replace(/%TERM_ID%/g,e)),t(document).trigger("itemAdded.terms.wcProductsWizard"),this},n.prototype.getSettings=function(e){var n=t.extend({},{action:"wcpwGetTermsListItemSettingsAjax"},e);return t.get(this.ajaxUrl,n,function(e){window.tb_show("Add item","#TB_inline",!1),t("#TB_ajaxContent").html(e),t(document.body).trigger("wc-enhanced-select-init")})},n.prototype.saveSettings=function(e){var n={action:"wcpwSaveTermsListItemSettingsAjax",post_id:e.attr("data-post-id"),term_id:e.attr("data-term-id"),values:e.serialize()};return t.post(this.ajaxUrl,n,function(){},"json")},n.prototype.removeItem=function(e){return this.$select.find('[value="'+e.attr("data-id")+'"]').removeClass("hidden"),e.remove(),t(document).trigger("itemRemoved.terms.wcProductsWizard"),this},t.fn.wcpwTerms=function(e){return this.each(function(){t.data(this,"plugin_wcpwTerms")||t.data(this,"plugin_wcpwTerms",new n(this,e))})};var i=function(){return t('[data-component="wcpw-terms"]').each(function(){return t(this).wcpwTerms()})};t(document).ready(function(){return i()}).on("ajaxComplete.wcProductsWizard init.terms.wcProductsWizard",function(){return i()}).on("click",'[data-component="wcpw-terms-add"]',function(e){e.preventDefault();var n=t(this),i=n.closest('[data-component="wcpw-terms"]');return i.data("wcpw-terms")?i.data("wcpw-terms").addItem():this}).on("click",'[data-component="wcpw-terms-list-item-remove"]',function(e){e.preventDefault();var n=t(this),i=n.closest('[data-component="wcpw-terms"]');return i.data("wcpw-terms")?i.data("wcpw-terms").removeItem(n.closest('[data-component="wcpw-terms-list-item"]')):this}).on("click",'[data-component="wcpw-terms-list-item-settings"]',function(e){e.preventDefault();var n=t(this),i=n.closest('[data-component="wcpw-terms"]');return i.data("wcpw-terms")?i.data("wcpw-terms").getSettings(n.data("settings")):this}).on("click",'[data-component="wcpw-terms-list-item-settings-save"]',function(e){e.preventDefault();var n=t(this),i=t('[data-component="wcpw-terms"]'),s=n.closest('[data-component="wcpw-terms-list-item-settings-form"]');return i.data("wcpw-terms")&&i.data("wcpw-terms").saveSettings(s),window.tb_remove(),this})});