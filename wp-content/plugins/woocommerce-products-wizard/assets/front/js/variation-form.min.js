var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=a(require("jquery")):a(t.jQuery)}(this,function(t){"use strict";t.fn.wcpwVariationForm=function(){this.unbind("checkVariations.variationForm.wcProductsWizard updateVariationValues.variationForm.wcProductsWizard foundVariation.variationForm.wcProductsWizard"),this.find('[data-component="wcpw-form-item-variations-attributes-item-value"]').unbind("change focusin");var a=this.on("change",'[data-component="wcpw-form-item-variations-attributes-item-value"]',function(){var a=t(this).closest('[data-component="wcpw-form-item-variations"]');a.find('[data-component="wcpw-form-item-variations-variation-id"]').val("").change(),a.trigger("woocommerceVariationSelectChange.variationForm.wcProductsWizard").trigger("checkVariations.variationForm.wcProductsWizard",["",!1]),t(this).blur(),t().uniform&&t.isFunction(t.uniform.update)&&t.uniform.update()}).on("focusin touchstart",'[data-component="wcpw-form-item-variations-attributes-item-value"]',function(){var a=t(this);a.closest('[data-component="wcpw-form-item-variations"]').trigger("checkVariations.variationForm.wcProductsWizard",[a.attr("data-name"),!0])}).on("checkVariations.variationForm.wcProductsWizard",function(a,i,r){var o=!0,e={},n=t(this),c=n.closest('[data-component="wcpw-form-item"]'),m=c.find('[data-component="wcpw-form-item-price"]'),s=c.find('[data-component="wcpw-form-item-description"]');n.find('[data-component="wcpw-form-item-variations-attributes-item-value"]').each(function(){var a=t(this);"SELECT"===a.prop("tagName")&&0===a.val().length&&(o=!1),i&&a.attr("data-name")===i?(o=!1,e[a.attr("data-name")]=""):"SELECT"===a.prop("tagName")?e[a.attr("data-name")]=a.val():!0===a.prop("checked")&&(e[a.attr("data-name")]=a.val())});var d=parseInt(n.data("product_id"),10),u=n.data("product_variations");u||(u=window.product_variations.product_id),u||(u=window.product_variations),u||(u=window["product_variations_"+d]);var p=t.fn.wcpwVariationFormFindMatchingVariations(u,e);if(o){var f=p.shift();f?(n.find('[data-component="wcpw-form-item-variations-variation-id"]').val(f.variation_id).change(),n.trigger("foundVariation.variationForm.wcProductsWizard",[f])):r||n.trigger("resetImage.variationForm.wcProductsWizard")}else r||n.trigger("resetImage.variationForm.wcProductsWizard"),i||(m.html(m.data("default")),s.html(s.data("default")))}).on("resetImage.variationForm.wcProductsWizard",function(){return t.fn.wcpwVariationFormUpdateImage(a,!1)}).on("updateVariationValues.variationForm.wcProductsWizard",function(a,i){var r=t(this).closest('[data-component="wcpw-form-item-variations"]');r.find('[data-component="wcpw-form-item-variations-attributes-item-value"]').each(function(){var a=t(this);a.data("attribute_options")||a.data("attribute_options",a.find("option:gt(0)").get()),a.find("option:gt(0)").remove(),a.append(a.data("attribute_options")),a.find("option:gt(0)").removeClass("active");var r=a.attr("data-name");for(var o in i){if(!i.hasOwnProperty(o))break;var e=i[o].attributes;for(var n in e){if(!e.hasOwnProperty(n))break;var c=e[n];if(n!==r)break;c?(c=t("<div/>").html(c).text(),c=c.replace(/'/g,"\\'"),c=c.replace(/"/g,'"'),a.find('option[value="'+c+'"]').addClass("active")):a.find("option:gt(0)").addClass("active")}}a.find("option:gt(0):not(.active)").remove()}),r.trigger("woocommerceUpdateVariationValues")}).on("foundVariation.variationForm.wcProductsWizard",function(i,r){var o=t(this),e=o.closest('[data-component="wcpw-form-item"]'),n=e.find('[data-component="wcpw-form-item-description"]');return r.price_html&&e.find('[data-component="wcpw-form-item-price"]').html(r.price_html),r.description?n.html(r.description):r.variation_description?n.html(r.variation_description):n.html(n.data("default")),t.fn.wcpwVariationFormUpdateImage(a,r)});return a.trigger("launched.variationFrom.wcProductsWizard"),a},t.fn.wcpwVariationFormResetAttribute=function(t){void 0!==this.attr("data-o_"+t)&&this.attr(t,this.attr("data-o_"+t))},t.fn.wcpwVariationFormSetAttribute=function(t,a){void 0===this.attr("data-o_"+t)&&this.attr("data-o_"+t,this.attr(t)?this.attr(t):""),!1===a?this.removeAttr(t):this.attr(t,a)},t.fn.wcpwVariationFormUpdateImage=function(t,a){var i=t.closest('[data-component="wcpw-form-item"]'),r=i.find('[data-component="wcpw-form-item-thumbnail-image"]'),o=i.find('[data-component="wcpw-form-item-thumbnail-link"]');a&&a.image&&a.image.src&&a.image.src.length>1?(r.wcpwVariationFormSetAttribute("src",a.image_src||a.image.src),r.wcpwVariationFormSetAttribute("srcset",a.image_srcset||a.image.srcset),r.wcpwVariationFormSetAttribute("sizes",a.image_sizes||a.image.sizes),r.wcpwVariationFormSetAttribute("title",a.image_title||a.image.title),r.wcpwVariationFormSetAttribute("alt",a.image_alt||a.image.alt),o.wcpwVariationFormSetAttribute("href",a.image_link||a.image.full_src)):(r.wcpwVariationFormResetAttribute("src"),r.wcpwVariationFormResetAttribute("srcset"),r.wcpwVariationFormResetAttribute("sizes"),r.wcpwVariationFormResetAttribute("alt"),o.wcpwVariationFormResetAttribute("href"))},t.fn.wcpwVariationFormFindMatchingVariations=function(a,i){for(var r=[],o=0;o<a.length;o++){var e=a[o];t.fn.wcpwVariationFormVariationsMatch(e.attributes,i)&&r.push(e)}return r},t.fn.wcpwVariationFormVariationsMatch=function(t,a){var i=!0;for(var r in t){if(!t.hasOwnProperty(r))break;var o=t[r],e=a[r];o&&e&&0!==o.length&&0!==e.length&&o!==e&&(i=!1)}return i};var a=function(){t('[data-component="wcpw-form-item-variations"]').each(function(){return t(this).wcpwVariationForm()}),t('[data-component="wcpw-form-item-variations-attributes-item-value"]').trigger("change")};t(document).ready(function(){return a()}).on("ajaxComplete.wcProductsWizard init.variationForm.wcProductsWizard",function(){return a()})});